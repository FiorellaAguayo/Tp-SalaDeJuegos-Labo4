var wR=Object.defineProperty,ER=Object.defineProperties;var DR=Object.getOwnPropertyDescriptors;var BI=Object.getOwnPropertySymbols,CR=Object.getPrototypeOf,bR=Object.prototype.hasOwnProperty,TR=Object.prototype.propertyIsEnumerable,SR=Reflect.get;var $I=(t,e,n)=>e in t?wR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})bR.call(e,n)&&$I(t,n,e[n]);if(BI)for(var n of BI(e))TR.call(e,n)&&$I(t,n,e[n]);return t},oe=(t,e)=>ER(t,DR(e));var nr=(t,e,n)=>SR(CR(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function HI(t,e){return Object.is(t,e)}var je=null,Bc=!1,$c=1,rr=Symbol("SIGNAL");function me(t){let e=je;return je=t,e}function qI(){return je}var jo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xh(t){if(Bc)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(Gc(je),e<je.producerNode.length&&je.producerNode[e]!==t&&Uo(je)){let n=je.producerNode[e];zc(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=Uo(je)?KI(t,je,e):0),je.producerLastReadVersion[e]=t.version}function AR(){$c++}function zI(t){if(!(Uo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===$c)){if(!t.producerMustRecompute(t)&&!tf(t)){t.dirty=!1,t.lastCleanEpoch=$c;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=$c}}function GI(t){if(t.liveConsumerNode===void 0)return;let e=Bc;Bc=!0;try{for(let n of t.liveConsumerNode)n.dirty||RR(n)}finally{Bc=e}}function WI(){return je?.consumerAllowSignalWrites!==!1}function RR(t){t.dirty=!0,GI(t),t.consumerMarkedDirty?.(t)}function qc(t){return t&&(t.nextProducerIndex=0),me(t)}function ef(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Uo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)zc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function tf(t){Gc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(zI(n),r!==n.version))return!0}return!1}function nf(t){if(Gc(t),Uo(t))for(let e=0;e<t.producerNode.length;e++)zc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function KI(t,e,n){if(QI(t),t.liveConsumerNode.length===0&&YI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=KI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function zc(t,e){if(QI(t),t.liveConsumerNode.length===1&&YI(t))for(let r=0;r<t.producerNode.length;r++)zc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Gc(i),i.producerIndexOfThis[r]=e}}function Uo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Gc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function QI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function YI(t){return t.producerNode!==void 0}function ZI(t){let e=Object.create(MR);e.computation=t;let n=()=>{if(zI(e),Xh(e),e.value===Hc)throw e.error;return e.value};return n[rr]=e,n}var Zh=Symbol("UNSET"),Jh=Symbol("COMPUTING"),Hc=Symbol("ERRORED"),MR=oe(k({},jo),{value:Zh,dirty:!0,error:null,equal:HI,producerMustRecompute(t){return t.value===Zh||t.value===Jh},producerRecomputeValue(t){if(t.value===Jh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Jh;let n=qc(t),r;try{r=t.computation()}catch(i){r=Hc,t.error=i}finally{ef(t,n)}if(e!==Zh&&e!==Hc&&r!==Hc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function NR(){throw new Error}var JI=NR;function XI(){JI()}function ew(t){JI=t}var xR=null;function tw(t){let e=Object.create(rw);e.value=t;let n=()=>(Xh(e),e.value);return n[rr]=e,n}function rf(t,e){WI()||XI(),t.equal(t.value,e)||(t.value=e,PR(t))}function nw(t,e){WI()||XI(),rf(t,e(t.value))}var rw=oe(k({},jo),{equal:HI,value:void 0});function PR(t){t.version++,AR(),GI(t),xR?.()}function J(t){return typeof t=="function"}function Vi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wc=Vi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var xe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof Wc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{iw(s)}catch(o){e=e??[],o instanceof Wc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)iw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&zr(n,e)}remove(e){let{_finalizers:n}=this;n&&zr(n,e),e instanceof t&&e._removeParent(this)}};xe.EMPTY=(()=>{let t=new xe;return t.closed=!0,t})();var sf=xe.EMPTY;function Kc(t){return t instanceof xe||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function iw(t){J(t)?t():t.unsubscribe()}var Ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ui={setTimeout(t,e,...n){let{delegate:r}=Ui;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ui;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Qc(t){Ui.setTimeout(()=>{let{onUnhandledError:e}=Ht;if(e)e(t);else throw t})}function Bo(){}var sw=of("C",void 0,void 0);function ow(t){return of("E",void 0,t)}function aw(t){return of("N",t,void 0)}function of(t,e,n){return{kind:t,value:e,error:n}}var Gr=null;function ji(t){if(Ht.useDeprecatedSynchronousErrorHandling){let e=!Gr;if(e&&(Gr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Gr;if(Gr=null,n)throw r}}else t()}function cw(t){Ht.useDeprecatedSynchronousErrorHandling&&Gr&&(Gr.errorThrown=!0,Gr.error=t)}var Wr=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kc(e)&&e.add(this)):this.destination=FR}static create(e,n,r){return new Bi(e,n,r)}next(e){this.isStopped?cf(aw(e),this):this._next(e)}error(e){this.isStopped?cf(ow(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cf(sw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OR=Function.prototype.bind;function af(t,e){return OR.call(t,e)}var uf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Yc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Yc(r)}else Yc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Yc(n)}}},Bi=class extends Wr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ht.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&af(e.next,s),error:e.error&&af(e.error,s),complete:e.complete&&af(e.complete,s)}):i=e}this.destination=new uf(i)}};function Yc(t){Ht.useDeprecatedSynchronousErrorHandling?cw(t):Qc(t)}function kR(t){throw t}function cf(t,e){let{onStoppedNotification:n}=Ht;n&&Ui.setTimeout(()=>n(t,e))}var FR={closed:!0,next:Bo,error:kR,complete:Bo};var $i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function lf(...t){return df(t)}function df(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=VR(n)?n:new Bi(n,r,i);return ji(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=uw(r),new r((i,s)=>{let o=new Bi({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[$i](){return this}pipe(...n){return df(n)(this)}toPromise(n){return n=uw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function uw(t){var e;return(e=t??Ht.Promise)!==null&&e!==void 0?e:Promise}function LR(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function VR(t){return t&&t instanceof Wr||LR(t)&&Kc(t)}function hf(t){return J(t?.lift)}function pe(t){return e=>{if(hf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,r,i){return new ff(t,e,n,r,i)}var ff=class extends Wr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Hi(){return pe((t,e)=>{let n=null;t._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var qi=class extends fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Hi()(this)}};var lw=Vi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new lw}next(n){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?sf:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,zr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new Zc(e,n),t})(),Zc=class extends He{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:sf}};var Ke=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var pf={now(){return(pf.delegate||Date).now()},delegate:void 0};var Jc=class extends xe{constructor(e,n){super()}schedule(e,n=0){return this}};var $o={setInterval(t,e,...n){let{delegate:r}=$o;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=$o;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var zi=class extends Jc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return $o.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&$o.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,zr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Gi.now=pf.now;var Wi=class extends Gi{constructor(e,n=Gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var gf=new Wi(zi);var Xc=class extends zi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var eu=class extends Wi{};var mf=new eu(Xc);var Ct=new fe(t=>t.complete());function dw(t){return t&&J(t.schedule)}function hw(t){return t[t.length-1]}function tu(t){return J(hw(t))?t.pop():void 0}function ir(t){return dw(hw(t))?t.pop():void 0}function yf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function fw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kr(t){return this instanceof Kr?(this.v=t,this):new Kr(t)}function gw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(S){return Promise.resolve(S).then(v,p)}}function a(v,S){r[v]&&(i[v]=function(N){return new Promise(function(M,F){s.push([v,N,M,F])>1||u(v,N)})},S&&(i[v]=S(i[v])))}function u(v,S){try{l(r[v](S))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Kr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,S){v(S),s.shift(),s.length&&u(s[0][0],s[0][1])}}function mw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof fw=="function"?fw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var nu=t=>t&&typeof t.length=="number"&&typeof t!="function";function ru(t){return J(t?.then)}function iu(t){return J(t[$i])}function su(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function ou(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var au=UR();function cu(t){return J(t?.[au])}function uu(t){return gw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Kr(n.read());if(i)return yield Kr(void 0);yield yield Kr(r)}}finally{n.releaseLock()}})}function lu(t){return J(t?.getReader)}function Oe(t){if(t instanceof fe)return t;if(t!=null){if(iu(t))return jR(t);if(nu(t))return BR(t);if(ru(t))return $R(t);if(su(t))return yw(t);if(cu(t))return HR(t);if(lu(t))return qR(t)}throw ou(t)}function jR(t){return new fe(e=>{let n=t[$i]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BR(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $R(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Qc)})}function HR(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yw(t){return new fe(e=>{zR(t,e).catch(n=>e.error(n))})}function qR(t){return yw(uu(t))}function zR(t,e){var n,r,i,s;return pw(this,void 0,void 0,function*(){try{for(n=mw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function gt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function sr(t,e=0){return pe((n,r)=>{n.subscribe(ce(r,i=>gt(r,t,()=>r.next(i),e),()=>gt(r,t,()=>r.complete(),e),i=>gt(r,t,()=>r.error(i),e)))})}function or(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vw(t,e){return Oe(t).pipe(or(e),sr(e))}function _w(t,e){return Oe(t).pipe(or(e),sr(e))}function Iw(t,e){return new fe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ww(t,e){return new fe(n=>{let r;return gt(n,e,()=>{r=t[au](),gt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function du(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{gt(n,e,()=>{let r=t[Symbol.asyncIterator]();gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ew(t,e){return du(uu(t),e)}function Dw(t,e){if(t!=null){if(iu(t))return vw(t,e);if(nu(t))return Iw(t,e);if(ru(t))return _w(t,e);if(su(t))return du(t,e);if(cu(t))return ww(t,e);if(lu(t))return Ew(t,e)}throw ou(t)}function Se(t,e){return e?Dw(t,e):Oe(t)}function W(...t){let e=ir(t);return Se(t,e)}function Ki(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new fe(e?i=>e.schedule(r,0,i):r)}function vf(t){return!!t&&(t instanceof fe||J(t.lift)&&J(t.subscribe))}var Tn=Vi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(t,e){return pe((n,r)=>{let i=0;n.subscribe(ce(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:GR}=Array;function WR(t,e){return GR(e)?t(...e):t(e)}function hu(t){return ae(e=>WR(t,e))}var{isArray:KR}=Array,{getPrototypeOf:QR,prototype:YR,keys:ZR}=Object;function fu(t){if(t.length===1){let e=t[0];if(KR(e))return{args:e,keys:null};if(JR(e)){let n=ZR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function JR(t){return t&&typeof t=="object"&&QR(t)===YR}function pu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ho(...t){let e=ir(t),n=tu(t),{args:r,keys:i}=fu(t);if(r.length===0)return Se([],e);let s=new fe(XR(r,e,i?o=>pu(i,o):Dt));return n?s.pipe(hu(n)):s}function XR(t,e,n=Dt){return r=>{Cw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)Cw(e,()=>{let l=Se(t[u],e),h=!1;l.subscribe(ce(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Cw(t,e,n){t?gt(n,t,e):e()}function bw(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?S(N):u.push(N),S=N=>{s&&e.next(N),l++;let M=!1;Oe(n(N,h++)).subscribe(ce(e,F=>{i?.(F),s?v(F):e.next(F)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let F=u.shift();o?gt(e,o,()=>S(F)):S(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(ce(e,v,()=>{p=!0,m()})),()=>{a?.()}}function ke(t,e,n=1/0){return J(e)?ke((r,i)=>ae((s,o)=>e(r,s,i,o))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>bw(r,i,t,n)))}function Qi(t=1/0){return ke(Dt,t)}function Tw(){return Qi(1)}function Yi(...t){return Tw()(Se(t,ir(t)))}function gu(t){return new fe(e=>{Oe(t()).subscribe(e)})}function _f(...t){let e=tu(t),{args:n,keys:r}=fu(t),i=new fe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Oe(n[h]).subscribe(ce(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?pu(r,a):a),s.complete())}))}});return e?i.pipe(hu(e)):i}function Nt(t,e){return pe((n,r)=>{let i=0;n.subscribe(ce(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ar(t){return pe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ce(n,void 0,void 0,o=>{s=Oe(t(o,ar(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Sw(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ce(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Qr(t,e){return J(e)?ke(t,e,1):ke(t,1)}function cr(t){return pe((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Sn(t){return t<=0?()=>Ct:pe((e,n)=>{let r=0;e.subscribe(ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function If(t){return ae(()=>t)}function mu(t=eM){return pe((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function eM(){return new Tn}function qo(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function en(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,s)=>t(i,s,r)):Dt,Sn(1),n?cr(e):mu(()=>new Tn))}function Zi(t){return t<=0?()=>Ct:pe((e,n)=>{let r=[];e.subscribe(ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nt((i,s)=>t(i,s,r)):Dt,Zi(1),n?cr(e):mu(()=>new Tn))}function Ef(t,e){return pe(Sw(t,e,arguments.length>=2,!0))}function Df(...t){let e=ir(t);return pe((n,r)=>{(e?Yi(t,n,e):Yi(t,n)).subscribe(r)})}function xt(t,e){return pe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=s++;Oe(t(u,h)).subscribe(i=ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Cf(t){return pe((e,n)=>{Oe(t).subscribe(ce(n,()=>n.complete(),Bo)),!n.closed&&e.subscribe(n)})}function Be(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ce(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var dE="https://g.co/ng/security#xss",B=class extends Error{constructor(e,n){super(Cp(e,n)),this.code=e}};function Cp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Xo(t){return{toString:t}.toString()}var yu="__parameters__";function tM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function hE(t,e,n){return Xo(()=>{let r=tM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(yu)?u[yu]:Object.defineProperty(u,yu,{value:[]})[yu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Vf=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function nM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ut(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ut).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Aw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var rM=De({__forward_ref__:De});function ys(t){return t.__forward_ref__=ys,t.toString=function(){return ut(this())},t}function ct(t){return fE(t)?t():t}function fE(t){return typeof t=="function"&&t.hasOwnProperty(rM)&&t.__forward_ref__===ys}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yu(t){return Rw(t,gE)||Rw(t,mE)}function pE(t){return Yu(t)!==null}function Rw(t,e){return t.hasOwnProperty(e)?t[e]:null}function iM(t){let e=t&&(t[gE]||t[mE]);return e||null}function Mw(t){return t&&(t.hasOwnProperty(Nw)||t.hasOwnProperty(sM))?t[Nw]:null}var gE=De({\u0275prov:De}),Nw=De({\u0275inj:De}),mE=De({ngInjectableDef:De}),sM=De({ngInjectorDef:De}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yE(t){return t&&!!t.\u0275providers}var oM=De({\u0275cmp:De}),aM=De({\u0275dir:De}),cM=De({\u0275pipe:De}),uM=De({\u0275mod:De}),Su=De({\u0275fac:De}),Go=De({__NG_ELEMENT_ID__:De}),xw=De({__NG_ENV_ID__:De});function Zu(t){return typeof t=="string"?t:t==null?"":String(t)}function lM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Zu(t)}function dM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new B(-200,t)}function bp(t,e){throw new B(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Uf;function vE(){return Uf}function Pt(t){let e=Uf;return Uf=t,e}function _E(t,e,n){let r=Yu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;bp(t,"Injector")}var hM={},Wo=hM,jf="__NG_DI_FLAG__",Au="ngTempTokenPath",fM="ngTokenPath",pM=/\n/gm,gM="\u0275",Pw="__source",ns;function mM(){return ns}function ur(t){let e=ns;return ns=t,e}function yM(t,e=te.Default){if(ns===void 0)throw new B(-203,!1);return ns===null?_E(t,void 0,e):ns.get(t,e&te.Optional?null:void 0,e)}function z(t,e=te.Default){return(vE()||yM)(ct(t),e)}function P(t,e=te.Default){return z(t,Ju(e))}function Ju(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bf(t){let e=[];for(let n=0;n<t.length;n++){let r=ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=te.Default;for(let o=0;o<r.length;o++){let a=r[o],u=vM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function IE(t,e){return t[jf]=e,t.prototype[jf]=e,t}function vM(t){return t[jf]}function _M(t,e,n,r){let i=t[Au];throw e[Pw]&&i.unshift(e[Pw]),t.message=IM(`
`+t.message,i,n,r),t[fM]=i,t[Au]=null,t}function IM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==gM?t.slice(2):t;let i=ut(e);if(Array.isArray(e))i=e.map(ut).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ut(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(pM,`
  `)}`}var dt=IE(hE("Optional"),8);var wE=IE(hE("SkipSelf"),4);function is(t,e){let n=t.hasOwnProperty(Su);return n?t[Su]:null}function Tp(t,e){t.forEach(n=>Array.isArray(n)?Tp(n,e):e(n))}function EE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ru(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function EM(t,e,n){let r=ea(t,e);return r>=0?t[r|1]=n:(r=~r,wM(t,r,e,n)),r}function bf(t,e){let n=ea(t,e);if(n>=0)return t[n|1]}function ea(t,e){return DM(t,e,1)}function DM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ss={},Ot=[],os=new U(""),DE=new U("",-1),CE=new U(""),Mu=class{get(e,n=Wo){if(n===Wo){let r=new Error(`NullInjectorError: No provider for ${ut(e)}!`);throw r.name="NullInjectorError",r}return n}},bE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(bE||{}),rn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(rn||{}),hr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(hr||{});function CM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function $f(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];bM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function TE(t){return t===3||t===4||t===6}function bM(t){return t.charCodeAt(0)===64}function Ko(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Ow(t,n,i,null,e[++r]):Ow(t,n,i,null,null))}}return t}function Ow(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var SE="ng-template";function TM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Sp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Sp(t){return t.type===4&&t.value!==SE}function SM(t,e,n){let r=t.type===4&&!n?SE:t.value;return e===r}function AM(t,e,n){let r=4,i=t.attrs,s=i!==null?NM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!qt(r)&&!qt(u))return!1;if(o&&qt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!SM(t,u,n)||u===""&&e.length===1){if(qt(r))return!1;o=!0}}else if(r&8){if(i===null||!TM(t,i,u,n)){if(qt(r))return!1;o=!0}}else{let l=e[++a],h=RM(u,i,Sp(t),n);if(h===-1){if(qt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(qt(r))return!1;o=!0}}}}return qt(r)||o}function qt(t){return(t&1)===0}function RM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return xM(e,t)}function MM(t,e,n=!1){for(let r=0;r<e.length;r++)if(AM(t,e[r],n))return!0;return!1}function NM(t){for(let e=0;e<t.length;e++){let n=t[e];if(TE(n))return e}return t.length}function xM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kw(t,e){return t?":not("+e.trim()+")":e}function PM(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!qt(o)&&(e+=kw(s,i),i=""),r=o,s=s||!qt(r);n++}return i!==""&&(e+=kw(s,i)),e}function OM(t){return t.map(PM).join(",")}function kM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!qt(i))break;i=s}r++}return{attrs:e,classes:n}}function mt(t){return Xo(()=>{let e=xE(t),n=oe(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||rn.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});PE(n);let r=t.dependencies;return n.directiveDefs=Lw(r,!1),n.pipeDefs=Lw(r,!0),n.id=VM(n),n})}function FM(t){return fr(t)||AE(t)}function LM(t){return t!==null}function xn(t){return Xo(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Fw(t,e){if(t==null)return ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=hr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==hr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function yt(t){return Xo(()=>{let e=xE(t);return PE(e),e})}function fr(t){return t[oM]||null}function AE(t){return t[aM]||null}function RE(t){return t[cM]||null}function ME(t){let e=fr(t)||AE(t)||RE(t);return e!==null?e.standalone:!1}function NE(t,e){let n=t[uM]||null;if(!n&&e===!0)throw new Error(`Type ${ut(t)} does not have '\u0275mod' property.`);return n}function xE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fw(t.inputs,e),outputs:Fw(t.outputs),debugInfo:null}}function PE(t){t.features?.forEach(e=>e(t))}function Lw(t,e){if(!t)return null;let n=e?RE:FM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(LM)}function VM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function cn(t){return{\u0275providers:t}}function UM(...t){return{\u0275providers:OE(!0,t),\u0275fromNgModule:!0}}function OE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Tp(e,o=>{let a=o;Hf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&kE(i,s),n}function kE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ap(i,s=>{e(s,r)})}}function Hf(t,e,n,r){if(t=ct(t),!t)return!1;let i=null,s=Mw(t),o=!s&&fr(t);if(!s&&!o){let u=t.ngModule;if(s=Mw(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Hf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Tp(s.imports,h=>{Hf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&kE(l,e)}if(!a){let l=is(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ot},i),e({provide:CE,useValue:i,multi:!0},i),e({provide:os,useValue:()=>z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Ap(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ap(t,e){for(let n of t)yE(n)&&(n=n.\u0275providers),Array.isArray(n)?Ap(n,e):e(n)}var jM=De({provide:String,useValue:De});function FE(t){return t!==null&&typeof t=="object"&&jM in t}function BM(t){return!!(t&&t.useExisting)}function $M(t){return!!(t&&t.useFactory)}function as(t){return typeof t=="function"}function HM(t){return!!t.useClass}var Xu=new U(""),Eu={},qM={},Tf;function Rp(){return Tf===void 0&&(Tf=new Mu),Tf}var bt=class{},Qo=class extends bt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zf(e,o=>this.processProvider(o)),this.records.set(DE,Ji(void 0,this)),i.has("environment")&&this.records.set(bt,Ji(void 0,this));let s=this.records.get(Xu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(CE,Ot,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ur(this),r=Pt(void 0),i;try{return e()}finally{ur(n),Pt(r)}}get(e,n=Wo,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xw))return e[xw](this);r=Ju(r);let i,s=ur(this),o=Pt(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=QM(e)&&Yu(e);l&&this.injectableDefInScope(l)?u=Ji(qf(e),Eu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&te.Self?Rp():this.parent;return n=r&te.Optional&&n===Wo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Au]=a[Au]||[]).unshift(ut(e)),s)throw a;return _M(a,e,"R3InjectorError",this.source)}else throw a}finally{Pt(o),ur(s)}}resolveInjectorInitializers(){let e=me(null),n=ur(this),r=Pt(void 0),i;try{let s=this.get(os,Ot,te.Self);for(let o of s)o()}finally{ur(n),Pt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new B(205,!1)}processProvider(e){e=ct(e);let n=as(e)?e:ct(e&&e.provide),r=GM(e);if(!as(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ji(void 0,Eu,!0),i.factory=()=>Bf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===Eu&&(n.value=qM,n.value=n.factory()),typeof n.value=="object"&&n.value&&KM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function qf(t){let e=Yu(t),n=e!==null?e.factory:is(t);if(n!==null)return n;if(t instanceof U)throw new B(204,!1);if(t instanceof Function)return zM(t);throw new B(204,!1)}function zM(t){if(t.length>0)throw new B(204,!1);let n=iM(t);return n!==null?()=>n.factory(t):()=>new t}function GM(t){if(FE(t))return Ji(void 0,t.useValue);{let e=LE(t);return Ji(e,Eu)}}function LE(t,e,n){let r;if(as(t)){let i=ct(t);return is(i)||qf(i)}else if(FE(t))r=()=>ct(t.useValue);else if($M(t))r=()=>t.useFactory(...Bf(t.deps||[]));else if(BM(t))r=()=>z(ct(t.useExisting));else{let i=ct(t&&(t.useClass||t.provide));if(WM(t))r=()=>new i(...Bf(t.deps));else return is(i)||qf(i)}return r}function Ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function WM(t){return!!t.deps}function KM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function QM(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function zf(t,e){for(let n of t)Array.isArray(n)?zf(n,e):n&&yE(n)?zf(n.\u0275providers,e):e(n)}function un(t,e){t instanceof Qo&&t.assertNotDestroyed();let n,r=ur(t),i=Pt(void 0);try{return e()}finally{ur(r),Pt(i)}}function VE(){return vE()!==void 0||mM()!=null}function YM(t){if(!VE())throw new B(-203,!1)}function ZM(t){return typeof t=="function"}var Pn=0,ue=1,K=2,lt=3,zt=4,Wt=5,Nu=6,xu=7,Gt=8,cs=9,sn=10,Qe=11,Yo=12,Vw=13,vs=14,on=15,us=16,Xi=17,ls=18,el=19,UE=20,lr=21,Sf=22,kt=23,pr=25,jE=1;var Xr=7,Pu=8,Ou=9,Ft=10,ku=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ku||{});function dr(t){return Array.isArray(t)&&typeof t[jE]=="object"}function On(t){return Array.isArray(t)&&t[jE]===!0}function BE(t){return(t.flags&4)!==0}function tl(t){return t.componentOffset>-1}function Mp(t){return(t.flags&1)===1}function gr(t){return!!t.template}function Gf(t){return(t[K]&512)!==0}var Wf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function $E(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function yr(){return HE}function HE(t){return t.type.prototype.ngOnChanges&&(t.setInput=XM),JM}yr.ngInherit=!0;function JM(){let t=zE(this),e=t?.current;if(e){let n=t.previous;if(n===ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function XM(t,e,n,r,i){let s=this.declaredInputs[r],o=zE(t)||eN(t,{previous:ss,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Wf(l&&l.currentValue,n,u===ss),$E(t,e,i,n)}var qE="__ngSimpleChanges__";function zE(t){return t[qE]||null}function eN(t,e){return t[qE]=e}var Uw=null;var tn=function(t,e,n){Uw?.(t,e,n)},tN="svg",nN="math";function an(t){for(;Array.isArray(t);)t=t[Pn];return t}function GE(t,e){return an(e[t])}function Lt(t,e){return an(e[t.index])}function WE(t,e){return t.data[e]}function vr(t,e){let n=e[t];return dr(n)?n:n[Pn]}function Np(t){return(t[K]&128)===128}function rN(t){return On(t[lt])}function Fu(t,e){return e==null?null:t[e]}function KE(t){t[Xi]=0}function QE(t){t[K]&1024||(t[K]|=1024,Np(t)&&rl(t))}function iN(t,e){for(;t>0;)e=e[vs],t--;return e}function nl(t){return!!(t[K]&9216||t[kt]?.dirty)}function Kf(t){t[sn].changeDetectionScheduler?.notify(8),t[K]&64&&(t[K]|=1024),nl(t)&&rl(t)}function rl(t){t[sn].changeDetectionScheduler?.notify(0);let e=ei(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!Np(e)));)e=ei(e)}function YE(t,e){if((t[K]&256)===256)throw new B(911,!1);t[lr]===null&&(t[lr]=[]),t[lr].push(e)}function sN(t,e){if(t[lr]===null)return;let n=t[lr].indexOf(e);n!==-1&&t[lr].splice(n,1)}function ei(t){let e=t[lt];return On(e)?e[lt]:e}var le={lFrame:sD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ZE=!1;function oN(){return le.lFrame.elementDepthCount}function aN(){le.lFrame.elementDepthCount++}function cN(){le.lFrame.elementDepthCount--}function JE(){return le.bindingsEnabled}function uN(){return le.skipHydrationRootTNode!==null}function lN(t){return le.skipHydrationRootTNode===t}function dN(){le.skipHydrationRootTNode=null}function Ae(){return le.lFrame.lView}function Kt(){return le.lFrame.tView}function xp(t){return le.lFrame.contextLView=t,t[Gt]}function Pp(t){return le.lFrame.contextLView=null,t}function vt(){let t=XE();for(;t!==null&&t.type===64;)t=t.parent;return t}function XE(){return le.lFrame.currentTNode}function hN(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ta(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function eD(){return le.lFrame.isParent}function fN(){le.lFrame.isParent=!1}function tD(){return ZE}function jw(t){ZE=t}function pN(t){return le.lFrame.bindingIndex=t}function Op(){return le.lFrame.bindingIndex++}function gN(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function mN(){return le.lFrame.inI18n}function yN(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qf(e)}function vN(){return le.lFrame.currentDirectiveIndex}function Qf(t){le.lFrame.currentDirectiveIndex=t}function _N(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function nD(t){le.lFrame.currentQueryIndex=t}function IN(t){let e=t[ue];return e.type===2?e.declTNode:e.type===1?t[Wt]:null}function rD(t,e,n){if(n&te.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=IN(s),i===null||(s=s[vs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=le.lFrame=iD();return r.currentTNode=e,r.lView=t,!0}function kp(t){let e=iD(),n=t[ue];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function iD(){let t=le.lFrame,e=t===null?null:t.child;return e===null?sD(t):e}function sD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function oD(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var aD=oD;function Fp(){let t=oD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wN(t){return(le.lFrame.contextLView=iN(t,le.lFrame.contextLView))[Gt]}function _s(){return le.lFrame.selectedIndex}function ti(t){le.lFrame.selectedIndex=t}function cD(){let t=le.lFrame;return WE(t.tView,t.selectedIndex)}function EN(){return le.lFrame.currentNamespace}var uD=!0;function Lp(){return uD}function Vp(t){uD=t}function DN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=HE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Up(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Du(t,e,n){lD(t,e,3,n)}function Cu(t,e,n,r){(t[K]&3)===n&&lD(t,e,n,r)}function Af(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function lD(t,e,n,r){let i=r!==void 0?t[Xi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Xi]+=65536),(a<s||s==-1)&&(CN(t,n,e,u),t[Xi]=(t[Xi]&4294901760)+u+2),u++}function Bw(t,e){tn(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),tn(5,t,e)}}function CN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[K]>>14<t[Xi]>>16&&(t[K]&3)===e&&(t[K]+=16384,Bw(a,s)):Bw(a,s)}var rs=-1,ni=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function bN(t){return t instanceof ni}function TN(t){return(t.flags&8)!==0}function SN(t){return(t.flags&16)!==0}var Rf={},Yf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ju(r);let i=this.injector.get(e,Rf,r);return i!==Rf||n===Rf?i:this.parentInjector.get(e,n,r)}};function dD(t){return t!==rs}function Lu(t){return t&32767}function AN(t){return t>>16}function Vu(t,e){let n=AN(t),r=e;for(;n>0;)r=r[vs],n--;return r}var Zf=!0;function $w(t){let e=Zf;return Zf=t,e}var RN=256,hD=RN-1,fD=5,MN=0,nn={};function NN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Go)&&(r=n[Go]),r==null&&(r=n[Go]=MN++);let i=r&hD,s=1<<i;e.data[t+(i>>fD)]|=s}function Uu(t,e){let n=pD(t,e);if(n!==-1)return n;let r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,Mf(r.data,t),Mf(e,null),Mf(r.blueprint,null));let i=jp(t,e),s=t.injectorIndex;if(dD(i)){let o=Lu(i),a=Vu(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Mf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function pD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function jp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=_D(i),r===null)return rs;if(n++,i=i[vs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return rs}function Jf(t,e,n){NN(t,e,n)}function xN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(TE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function gD(t,e,n){if(n&te.Optional||t!==void 0)return t;bp(e,"NodeInjector")}function mD(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[cs],s=Pt(void 0);try{return i?i.get(e,r,n&te.Optional):_E(e,r,n&te.Optional)}finally{Pt(s)}}return gD(r,e,n)}function yD(t,e,n,r=te.Default,i){if(t!==null){if(e[K]&2048&&!(r&te.Self)){let o=LN(t,e,n,r,nn);if(o!==nn)return o}let s=vD(t,e,n,r,nn);if(s!==nn)return s}return mD(e,n,r,i)}function vD(t,e,n,r,i){let s=kN(n);if(typeof s=="function"){if(!rD(e,t,r))return r&te.Host?gD(i,n,r):mD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&te.Optional))bp(n);else return o}finally{aD()}}else if(typeof s=="number"){let o=null,a=pD(t,e),u=rs,l=r&te.Host?e[on][Wt]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?jp(t,e):e[a+8],u===rs||!qw(r,!1)?a=-1:(o=e[ue],a=Lu(u),e=Vu(u,e)));a!==-1;){let h=e[ue];if(Hw(s,a,h.data)){let p=PN(a,e,n,o,r,l);if(p!==nn)return p}u=e[a+8],u!==rs&&qw(r,e[ue].data[a+8]===l)&&Hw(s,a,e)?(o=h,a=Lu(u),e=Vu(u,e)):a=-1}}return i}function PN(t,e,n,r,i,s){let o=e[ue],a=o.data[t+8],u=r==null?tl(a)&&Zf:r!=o&&(a.type&3)!==0,l=i&te.Host&&s===a,h=ON(a,o,n,u,l);return h!==null?ds(e,o,h,a):nn}function ON(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let S=o[v];if(v<u&&n===S||v>=u&&S.type===n)return v}if(i){let v=o[u];if(v&&gr(v)&&v.type===n)return u}return null}function ds(t,e,n,r){let i=t[n],s=e.data;if(bN(i)){let o=i;o.resolving&&dM(lM(s[n]));let a=$w(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Pt(o.injectImpl):null,h=rD(t,r,te.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&DN(n,s[n],e)}finally{l!==null&&Pt(l),$w(a),o.resolving=!1,aD()}}return i}function kN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Go)?t[Go]:void 0;return typeof e=="number"?e>=0?e&hD:FN:e}function Hw(t,e,n){let r=1<<t;return!!(n[e+(t>>fD)]&r)}function qw(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var Jr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return yD(this._tNode,this._lView,e,Ju(r),n)}};function FN(){return new Jr(vt(),Ae())}function na(t){return Xo(()=>{let e=t.prototype.constructor,n=e[Su]||Xf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Su]||Xf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Xf(t){return fE(t)?()=>{let e=Xf(ct(t));return e&&e()}:is(t)}function LN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=vD(s,o,n,r|te.Self,nn);if(a!==nn)return a;let u=s.parent;if(!u){let l=o[UE];if(l){let h=l.get(n,nn,r);if(h!==nn)return h}u=_D(o),o=o[vs]}s=u}return i}function _D(t){let e=t[ue],n=e.type;return n===2?e.declTNode:n===1?t[Wt]:null}function Bp(t){return xN(vt(),t)}function zw(t,e=null,n=null,r){let i=ID(t,e,n,r);return i.resolveInjectorInitializers(),i}function ID(t,e=null,n=null,r,i=new Set){let s=[n||Ot,UM(t)];return r=r||(typeof t=="object"?void 0:ut(t)),new Qo(s,e||Rp(),r||null,i)}var Yr=class Yr{static create(e,n){if(Array.isArray(e))return zw({name:""},n,e,"");{let r=e.name??"";return zw({name:r},e.parent,e.providers,r)}}};Yr.THROW_IF_NOT_FOUND=Wo,Yr.NULL=new Mu,Yr.\u0275prov=j({token:Yr,providedIn:"any",factory:()=>z(DE)}),Yr.__NG_ELEMENT_ID__=-1;var Ye=Yr;var VN=new U("");VN.__NG_ELEMENT_ID__=t=>{let e=vt();if(e===null)throw new B(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new B(204,!1)};var UN="ngOriginalError";function Nf(t){return t[UN]}var wD=!0,$p=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),ep=class extends $p{constructor(e){super(),this._lView=e}onDestroy(e){return YE(this._lView,e),()=>sN(this._lView,e)}};function jN(){return new ep(Ae())}var Is=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var tp=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,VE()&&(this.destroyRef=P($p,{optional:!0})??void 0,this.pendingTasks=P(Is,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Fe=tp;function ju(...t){}function ED(t){let e,n;function r(){t=ju;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Gw(t){return queueMicrotask(()=>t()),()=>{t=ju}}var Hp="isAngularZone",Bu=Hp+"_ID",BN=0,Ie=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fe(!1),this.onMicrotaskEmpty=new Fe(!1),this.onStable=new Fe(!1),this.onError=new Fe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=wD}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,qN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Hp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new B(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,$N,ju,ju);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},$N={};function qp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function HN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){ED(()=>{t.callbackScheduled=!1,np(t),t.isCheckStableRunning=!0,qp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),np(t)}function qN(t){let e=()=>{HN(t)},n=BN++;t._inner=t._inner.fork({name:"angular",properties:{[Hp]:!0,[Bu]:n,[Bu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(zN(u))return r.invokeTask(s,o,a,u);try{return Ww(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Kw(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return Ww(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!GN(u)&&e(),Kw(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,np(t),qp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function np(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ww(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Kw(t){t._nesting--,qp(t)}var rp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fe,this.onMicrotaskEmpty=new Fe,this.onStable=new Fe,this.onError=new Fe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function zN(t){return DD(t,"__ignore_ng_zone__")}function GN(t){return DD(t,"__scheduler_tick__")}function DD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var An=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Nf(e);for(;n&&Nf(n);)n=Nf(n);return n||null}},WN=new U("",{providedIn:"root",factory:()=>{let t=P(Ie),e=P(An);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function KN(){return il(vt(),Ae())}function il(t,e){return new _r(Lt(t,e))}var _r=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=KN;let t=e;return t})();function CD(t){return(t.flags&128)===128}var bD=new Map,QN=0;function YN(){return QN++}function ZN(t){bD.set(t[el],t)}function ip(t){bD.delete(t[el])}var Qw="__ngContext__";function ri(t,e){dr(e)?(t[Qw]=e[el],ZN(e)):t[Qw]=e}function TD(t){return AD(t[Yo])}function SD(t){return AD(t[zt])}function AD(t){for(;t!==null&&!On(t);)t=t[zt];return t}var sp;function RD(t){sp=t}function JN(){if(sp!==void 0)return sp;if(typeof document<"u")return document;throw new B(210,!1)}var zp=new U("",{providedIn:"root",factory:()=>XN}),XN="ng",Gp=new U(""),ln=new U("",{providedIn:"platform",factory:()=>"unknown"});var Wp=new U("",{providedIn:"root",factory:()=>JN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ex="h",tx="b";var nx=()=>null;function Kp(t,e,n=!1){return nx(t,e,n)}var MD=!1,rx=new U("",{providedIn:"root",factory:()=>MD});var vu;function ix(){if(vu===void 0&&(vu=null,Vf.trustedTypes))try{vu=Vf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vu}function Yw(t){return ix()?.createScriptURL(t)||t}var $u=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dE})`}};function ra(t){return t instanceof $u?t.changingThisBreaksApplicationSecurity:t}function Qp(t,e){let n=sx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${dE})`)}return n===e}function sx(t){return t instanceof $u&&t.getTypeName()||null}var ox=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ND(t){return t=String(t),t.match(ox)?t:"unsafe:"+t}var sl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sl||{});function ax(t){let e=PD();return e?e.sanitize(sl.URL,t)||"":Qp(t,"URL")?ra(t):ND(Zu(t))}function cx(t){let e=PD();if(e)return Yw(e.sanitize(sl.RESOURCE_URL,t)||"");if(Qp(t,"ResourceURL"))return Yw(ra(t));throw new B(904,!1)}function ux(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?cx:ax}function xD(t,e,n){return ux(e,n)(t)}function PD(){let t=Ae();return t&&t[sn].sanitizer}function OD(t){return t instanceof Function?t():t}function lx(t){return(t??P(Ye)).get(ln)==="browser"}var Rn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Rn||{}),dx;function Yp(t,e){return dx(t,e)}function es(t,e,n,r,i){if(r!=null){let s,o=!1;On(r)?s=r:dr(r)&&(o=!0,r=r[Pn]);let a=an(r);t===0&&n!==null?i==null?UD(e,n,a):Hu(e,n,a,i||null,!0):t===1&&n!==null?Hu(e,n,a,i||null,!0):t===2?Tx(e,a,o):t===3&&e.destroyNode(a),s!=null&&Ax(e,t,s,n,i)}}function hx(t,e){return t.createText(e)}function fx(t,e,n){t.setValue(e,n)}function kD(t,e,n){return t.createElement(e,n)}function px(t,e){FD(t,e),e[Pn]=null,e[Wt]=null}function gx(t,e,n,r,i,s){r[Pn]=i,r[Wt]=e,ol(t,r,n,1,i,s)}function FD(t,e){e[sn].changeDetectionScheduler?.notify(9),ol(t,e,e[Qe],2,null,null)}function mx(t){let e=t[Yo];if(!e)return xf(t[ue],t);for(;e;){let n=null;if(dr(e))n=e[Yo];else{let r=e[Ft];r&&(n=r)}if(!n){for(;e&&!e[zt]&&e!==t;)dr(e)&&xf(e[ue],e),e=e[lt];e===null&&(e=t),dr(e)&&xf(e[ue],e),n=e&&e[zt]}e=n}}function yx(t,e,n,r){let i=Ft+r,s=n.length;r>0&&(n[i-1][zt]=e),r<s-Ft?(e[zt]=n[i],EE(n,Ft+r,e)):(n.push(e),e[zt]=null),e[lt]=n;let o=e[us];o!==null&&n!==o&&LD(o,e);let a=e[ls];a!==null&&a.insertView(t),Kf(e),e[K]|=128}function LD(t,e){let n=t[Ou],r=e[lt];if(dr(r))t[K]|=ku.HasTransplantedViews;else{let i=r[lt][on];e[on]!==i&&(t[K]|=ku.HasTransplantedViews)}n===null?t[Ou]=[e]:n.push(e)}function Zp(t,e){let n=t[Ou],r=n.indexOf(e);n.splice(r,1)}function op(t,e){if(t.length<=Ft)return;let n=Ft+e,r=t[n];if(r){let i=r[us];i!==null&&i!==t&&Zp(i,r),e>0&&(t[n-1][zt]=r[zt]);let s=Ru(t,Ft+e);px(r[ue],r);let o=s[ls];o!==null&&o.detachView(s[ue]),r[lt]=null,r[zt]=null,r[K]&=-129}return r}function VD(t,e){if(!(e[K]&256)){let n=e[Qe];n.destroyNode&&ol(t,e,n,3,null,null),mx(e)}}function xf(t,e){if(e[K]&256)return;let n=me(null);try{e[K]&=-129,e[K]|=256,e[kt]&&nf(e[kt]),_x(t,e),vx(t,e),e[ue].type===1&&e[Qe].destroy();let r=e[us];if(r!==null&&On(e[lt])){r!==e[lt]&&Zp(r,e);let i=e[ls];i!==null&&i.detachView(t)}ip(e)}finally{me(n)}}function vx(t,e){let n=t.cleanup,r=e[xu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[xu]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function _x(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ni)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];tn(4,a,u);try{u.call(a)}finally{tn(5,a,u)}}else{tn(4,i,s);try{s.call(i)}finally{tn(5,i,s)}}}}}function Ix(t,e,n){return wx(t,e.parent,n)}function wx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===rn.None||s===rn.Emulated)return null}return Lt(r,n)}}function Hu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function UD(t,e,n){t.appendChild(e,n)}function Zw(t,e,n,r,i){r!==null?Hu(t,e,n,r,i):UD(t,e,n)}function jD(t,e){return t.parentNode(e)}function Ex(t,e){return t.nextSibling(e)}function Dx(t,e,n){return bx(t,e,n)}function Cx(t,e,n){return t.type&40?Lt(t,n):null}var bx=Cx,Jw;function Jp(t,e,n,r){let i=Ix(t,r,e),s=e[Qe],o=r.parent||e[Wt],a=Dx(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Zw(s,i,n[u],a,!1);else Zw(s,i,n,a,!1);Jw!==void 0&&Jw(s,r,e,n,i)}function zo(t,e){if(e!==null){let n=e.type;if(n&3)return Lt(e,t);if(n&4)return ap(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return zo(t,r);{let i=t[e.index];return On(i)?ap(-1,i):an(i)}}else{if(n&128)return zo(t,e.next);if(n&32)return Yp(e,t)()||an(t[e.index]);{let r=BD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ei(t[on]);return zo(i,r)}else return zo(t,e.next)}}}return null}function BD(t,e){if(e!==null){let r=t[on][Wt],i=e.projection;return r.projection[i]}return null}function ap(t,e){let n=Ft+t+1;if(n<e.length){let r=e[n],i=r[ue].firstChild;if(i!==null)return zo(r,i)}return e[Xr]}function Tx(t,e,n){t.removeChild(null,e,n)}function Xp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ri(an(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Xp(t,e,n.child,r,i,s,!1),es(e,t,i,a,s);else if(u&32){let l=Yp(n,r),h;for(;h=l();)es(e,t,i,h,s);es(e,t,i,a,s)}else u&16?Sx(t,e,r,n,i,s):es(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ol(t,e,n,r,i,s){Xp(n,r,t.firstChild,e,i,s,!1)}function Sx(t,e,n,r,i,s){let o=n[on],u=o[Wt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];es(e,t,i,h,s)}else{let l=u,h=o[lt];CD(r)&&(l.flags|=128),Xp(t,e,l,h,i,s,!0)}}function Ax(t,e,n,r,i){let s=n[Xr],o=an(n);s!==o&&es(e,t,r,s,i);for(let a=Ft;a<n.length;a++){let u=n[a];ol(u[ue],u,t,e,r,s)}}function Rx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Rn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Rn.Important),t.setStyle(n,r,i,s))}}function Mx(t,e,n){t.setAttribute(e,"style",n)}function $D(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function HD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&$f(t,e,r),i!==null&&$D(t,e,i),s!==null&&Mx(t,e,s)}var ws={};function Ze(t=1){qD(Kt(),Ae(),_s()+t,!1)}function qD(t,e,n,r){if(!r)if((e[K]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Du(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Cu(e,s,0,n)}ti(n)}function ne(t,e=te.Default){let n=Ae();if(n===null)return z(t,e);let r=vt();return yD(r,n,ct(t),e)}function zD(){let t="invalid";throw new Error(t)}function GD(t,e,n,r,i,s){let o=me(null);try{let a=null;i&hr.SignalBased&&(a=e[r][rr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&hr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):$E(e,a,r,s)}finally{me(o)}}function Nx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ti(~i);else{let s=i,o=n[++r],a=n[++r];yN(o,s);let u=e[s];a(2,u)}}}finally{ti(-1)}}function al(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Pn]=i,p[K]=r|4|128|8|64,(l!==null||t&&t[K]&2048)&&(p[K]|=2048),KE(p),p[lt]=p[vs]=t,p[Gt]=n,p[sn]=o||t&&t[sn],p[Qe]=a||t&&t[Qe],p[cs]=u||t&&t[cs]||null,p[Wt]=s,p[el]=YN(),p[Nu]=h,p[UE]=l,p[on]=e.type==2?t[on]:p,p}function cl(t,e,n,r,i){let s=t.data[e];if(s===null)s=xx(t,e,n,r,i),mN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=hN();s.injectorIndex=o===null?-1:o.injectorIndex}return ta(s,!0),s}function xx(t,e,n,r,i){let s=XE(),o=eD(),a=o?s:s&&s.parent,u=t.data[e]=Lx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function WD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function KD(t,e,n,r,i){let s=_s(),o=r&2;try{ti(-1),o&&e.length>pr&&qD(t,e,pr,!1),tn(o?2:0,i),n(r,i)}finally{ti(s),tn(o?3:1,i)}}function QD(t,e,n){if(BE(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{me(r)}}}function YD(t,e,n){JE()&&(qx(t,e,n,Lt(n,e)),(n.flags&64)===64&&tC(t,e,n))}function ZD(t,e,n=Lt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function JD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=eg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function eg(t,e,n,r,i,s,o,a,u,l,h){let p=pr+r,m=p+i,v=Px(p,m),S=typeof l=="function"?l():l;return v[ue]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Px(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ws);return n}function Ox(t,e,n,r){let s=r.get(rx,MD)||n===rn.ShadowDom,o=t.selectRootElement(e,s);return kx(o),o}function kx(t){Fx(t)}var Fx=()=>null;function Lx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Xw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=hr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?eE(r,n,l,a,u):eE(r,n,l,a)}return r}function eE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Vx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,S=m?m.outputs:null;u=Xw(0,p.inputs,h,u,v),l=Xw(1,p.outputs,h,l,S);let N=u!==null&&o!==null&&!Sp(e)?tP(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Ux(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jx(t,e,n,r,i,s,o,a){let u=Lt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(tg(t,n,h,r,i),tl(e)&&Bx(n,e.index)):e.type&3?(r=Ux(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function Bx(t,e){let n=vr(e,t);n[K]&16||(n[K]|=64)}function XD(t,e,n,r){if(JE()){let i=r===null?null:{"":-1},s=Gx(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&eC(t,e,n,o,i,a),i&&Wx(n,r,i)}n.mergedAttrs=Ko(n.mergedAttrs,n.attrs)}function eC(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Jf(Uu(n,e),t,r[l].type);Qx(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=WD(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Ko(n.mergedAttrs,h.hostAttrs),Yx(t,n,e,u,h),Kx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}Vx(t,n,s)}function $x(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Hx(o)!=a&&o.push(a),o.push(n,r,s)}}function Hx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function qx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;tl(n)&&Zx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Uu(n,e),ri(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=ds(e,t,a,n);if(ri(l,e),o!==null&&eP(e,a-i,l,u,n,o),gr(u)){let h=vr(n.index,e);h[Gt]=ds(e,t,a,n)}}}function tC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=vN();try{ti(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Qf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&zx(u,l)}}finally{ti(-1),Qf(o)}}function zx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Gx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(MM(e,o.selectors,!1))if(r||(r=[]),gr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;cp(t,e,u)}else r.unshift(o),cp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function cp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Wx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}}function Kx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gr(e)&&(n[""]=t)}}function Qx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=is(i.type,!0)),o=new ni(s,gr(i),ne);t.blueprint[r]=o,n[r]=o,$x(t,e,r,WD(t,n,i.hostVars,ws),i)}function Zx(t,e,n){let r=Lt(e,t),i=JD(n),s=t[sn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ul(t,al(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Jx(t,e,n,r,i,s){let o=Lt(t,e);Xx(e[Qe],o,s,t.value,n,r,i)}function Xx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Zu(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function eP(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];GD(r,n,u,l,h,p)}}function tP(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function nC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function rC(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];nD(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function ul(t,e){return t[Yo]?t[Vw][zt]=e:t[Yo]=e,t[Vw]=e,e}function up(t,e,n){nD(0);let r=me(null);try{e(t,n)}finally{me(r)}}function nP(t){return t[xu]??=[]}function rP(t){return t.cleanup??=[]}function iC(t,e){let n=t[cs],r=n?n.get(An,null):null;r&&r.handleError(e)}function tg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];GD(h,l,r,a,u,i)}}function iP(t,e,n){let r=GE(e,t);fx(t[Qe],r,n)}function sP(t,e){let n=vr(e,t),r=n[ue];oP(r,n);let i=n[Pn];i!==null&&n[Nu]===null&&(n[Nu]=Kp(i,n[cs])),ng(r,n,n[Gt])}function oP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ng(t,e,n){kp(e);try{let r=t.viewQuery;r!==null&&up(1,r,n);let i=t.template;i!==null&&KD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ls]?.finishViewCreation(t),t.staticContentQueries&&rC(t,e),t.staticViewQueries&&up(2,t.viewQuery,n);let s=t.components;s!==null&&aP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,Fp()}}function aP(t,e){for(let n=0;n<e.length;n++)sP(t,e[n])}function cP(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[K]&4096?4096:16,u=al(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[us]=l;let h=t[ls];return h!==null&&(u[ls]=h.createEmbeddedView(s)),ng(s,u,n),u}finally{me(i)}}function tE(t,e){return!e||e.firstChild===null||CD(t)}function uP(t,e,n,r=!0){let i=e[ue];if(yx(i,e,t,n),r){let o=ap(n,t),a=e[Qe],u=jD(a,t[Xr]);u!==null&&gx(i,t[Wt],a,e,u,o)}let s=e[Nu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function qu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(an(s)),On(s)&&lP(s,r);let o=n.type;if(o&8)qu(t,e,n.child,r);else if(o&32){let a=Yp(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=BD(e,n);if(Array.isArray(a))r.push(...a);else{let u=ei(e[on]);qu(u[ue],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lP(t,e){for(let n=Ft;n<t.length;n++){let r=t[n],i=r[ue].firstChild;i!==null&&qu(r[ue],r,i,e)}t[Xr]!==t[Pn]&&e.push(t[Xr])}var sC=[];function dP(t){return t[kt]??hP(t)}function hP(t){let e=sC.pop()??Object.create(pP);return e.lView=t,e}function fP(t){t.lView[kt]!==t&&(t.lView=null,sC.push(t))}var pP=oe(k({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{rl(t.lView)},consumerOnSignalRead(){this.lView[kt]=this}});function gP(t){let e=t[kt]??Object.create(mP);return e.lView=t,e}var mP=oe(k({},jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ei(t.lView);for(;e&&!oC(e[ue]);)e=ei(e);e&&QE(e)},consumerOnSignalRead(){this.lView[kt]=this}});function oC(t){return t.type!==2}var yP=100;function aC(t,e=!0,n=0){let r=t[sn],i=r.rendererFactory,s=!1;s||i.begin?.();try{vP(t,n)}catch(o){throw e&&iC(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function vP(t,e){let n=tD();try{jw(!0),lp(t,e);let r=0;for(;nl(t);){if(r===yP)throw new B(103,!1);r++,lp(t,1)}}finally{jw(n)}}function _P(t,e,n,r){let i=e[K];if((i&256)===256)return;let s=!1,o=!1;!s&&e[sn].inlineEffectRunner?.flush(),kp(e);let a=!0,u=null,l=null;s||(oC(t)?(l=dP(e),u=qc(l)):qI()===null?(a=!1,l=gP(e),u=qc(l)):e[kt]&&(nf(e[kt]),e[kt]=null));try{KE(e),pN(t.bindingStartIndex),n!==null&&KD(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&Du(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Cu(e,v,0,null),Af(e,0)}if(o||IP(e),cC(e,0),t.contentQueries!==null&&rC(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&Du(e,v)}else{let v=t.contentHooks;v!==null&&Cu(e,v,1),Af(e,1)}Nx(t,e);let p=t.components;p!==null&&lC(e,p,0);let m=t.viewQuery;if(m!==null&&up(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&Du(e,v)}else{let v=t.viewHooks;v!==null&&Cu(e,v,2),Af(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Sf]){for(let v of e[Sf])v();e[Sf]=null}s||(e[K]&=-73)}catch(h){throw s||rl(e),h}finally{l!==null&&(ef(l,u),a&&fP(l)),Fp()}}function cC(t,e){for(let n=TD(t);n!==null;n=SD(n))for(let r=Ft;r<n.length;r++){let i=n[r];uC(i,e)}}function IP(t){for(let e=TD(t);e!==null;e=SD(e)){if(!(e[K]&ku.HasTransplantedViews))continue;let n=e[Ou];for(let r=0;r<n.length;r++){let i=n[r];QE(i)}}}function wP(t,e,n){let r=vr(e,t);uC(r,n)}function uC(t,e){Np(t)&&lp(t,e)}function lp(t,e){let r=t[ue],i=t[K],s=t[kt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&tf(s)),o||=!1,s&&(s.dirty=!1),t[K]&=-9217,o)_P(r,t,r.template,t[Gt]);else if(i&8192){cC(t,1);let a=r.components;a!==null&&lC(t,a,1)}}function lC(t,e,n){for(let r=0;r<e.length;r++)wP(t,e[r],n)}function rg(t,e){let n=tD()?64:1088;for(t[sn].changeDetectionScheduler?.notify(e);t;){t[K]|=n;let r=ei(t);if(Gf(t)&&!r)return t;t=r}return null}var ii=class{get rootNodes(){let e=this._lView,n=e[ue];return qu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gt]}set context(e){this._lView[Gt]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[lt];if(On(e)){let n=e[Pu],r=n?n.indexOf(this):-1;r>-1&&(op(e,r),Ru(n,r))}this._attachedToViewContainer=!1}VD(this._lView[ue],this._lView)}onDestroy(e){YE(this._lView,e)}markForCheck(){rg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){Kf(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,aC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Gf(this._lView),n=this._lView[us];n!==null&&!e&&Zp(n,this._lView),FD(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let n=Gf(this._lView),r=this._lView[us];r!==null&&!n&&LD(r,this._lView),Kf(this._lView)}},ig=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CP;let t=e;return t})(),EP=ig,DP=class extends EP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=cP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ii(i)}};function CP(){return bP(vt(),Ae())}function bP(t,e){return t.type&4?new DP(e,t,il(t,e)):null}var b3=new RegExp(`^(\\d+)*(${tx}|${ex})*(.*)`);var TP=()=>null;function nE(t,e){return TP(t,e)}var hs=class{},sg=new U("",{providedIn:"root",factory:()=>!1});var dC=new U(""),hC=new U(""),dp=class{},zu=class{};function SP(t){let e=Error(`No component factory found for ${ut(t)}.`);return e[AP]=t,e}var AP="ngComponent";var hp=class{resolveComponentFactory(e){throw SP(e)}},lg=class lg{};lg.NULL=new hp;var fs=lg,ps=class{},oi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>RP();let t=e;return t})();function RP(){let t=Ae(),e=vt(),n=vr(e.index,t);return(dr(n)?n:t)[Qe]}var MP=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function fp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Aw(i,a);else if(s==2){let u=a,l=e[++o];r=Aw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Gu=class extends fs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fr(e);return new gs(n,this.ngModule)}};function rE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:hr.None;e?n.push({propName:o,templateName:r,isSignal:(a&hr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function NP(t){let e=t.toLowerCase();return e==="svg"?tN:e==="math"?nN:null}var gs=class extends zu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=rE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return rE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=OM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof bt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Yf(e,o):e,u=a.get(ps,null);if(u===null)throw new B(407,!1);let l=a.get(MP,null),h=a.get(hs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",S=r?Ox(m,r,this.componentDef.encapsulation,a):kD(m,v,NP(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let M=null;S!==null&&(M=Kp(S,a,!0));let F=eg(0,null,null,1,0,null,null,null,null,null,null),$=al(null,F,null,N,null,null,p,m,a,null,M);kp($);let q,se,Me=null;try{let Z=this.componentDef,D,y=null;Z.findHostDirectiveDefs?(D=[],y=new Map,Z.findHostDirectiveDefs(Z,D,y),D.push(Z)):D=[Z];let _=xP($,S);Me=PP(_,S,Z,D,$,p,m),se=WE(F,pr),S&&FP(m,Z,S,r),n!==void 0&&LP(se,this.ngContentSelectors,n),q=kP(Me,Z,D,y,$,[VP]),ng(F,$,null)}catch(Z){throw Me!==null&&ip(Me),ip($),Z}finally{Fp()}return new pp(this.componentType,q,il(se,$),$,se)}finally{me(s)}}},pp=class extends dp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ii(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;tg(s[ue],s,i,e,n),this.previousInputValues.set(e,n);let o=vr(this._tNode.index,s);rg(o,1)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xP(t,e){let n=t[ue],r=pr;return t[r]=e,cl(n,r,2,"#host",null)}function PP(t,e,n,r,i,s,o){let a=i[ue];OP(r,t,e,o);let u=null;e!==null&&(u=Kp(e,i[cs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=al(i,JD(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&cp(a,t,r.length-1),ul(i,p),i[t.index]=p}function OP(t,e,n,r){for(let i of t)e.mergedAttrs=Ko(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fp(e,e.mergedAttrs,!0),n!==null&&HD(r,n,e))}function kP(t,e,n,r,i,s){let o=vt(),a=i[ue],u=Lt(o,i);eC(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=ds(i,a,p,o);ri(m,i)}tC(a,i,o),u&&ri(u,i);let l=ds(i,a,o.directiveStart+o.componentOffset,o);if(t[Gt]=i[Gt]=l,s!==null)for(let h of s)h(l,e);return QD(a,o,i),l}function FP(t,e,n,r){if(r)$f(t,n,["ng-version","18.2.4"]);else{let{attrs:i,classes:s}=kM(e.selectors[0]);i&&$f(t,n,i),s&&s.length>0&&$D(t,n,s.join(" "))}}function LP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function VP(){let t=vt();Up(Ae()[ue],t)}var ia=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=UP;let t=e;return t})();function UP(){let t=vt();return BP(t,Ae())}var jP=ia,fC=class extends jP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=jp(this._hostTNode,this._hostLView);if(dD(e)){let n=Vu(e,this._hostLView),r=Lu(e),i=n[ue].data[r+8];return new Jr(i,n)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=nE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,tE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!ZM(e),a;if(o)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new gs(fr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(bt,null);N&&(s=N)}let h=fr(u.componentType??{}),p=nE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,tE(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(rN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[lt],l=new fC(u,u[Wt],u[lt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return uP(o,i,s,r),e.attachToViewContainerRef(),EE(Pf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=op(this._lContainer,n);r&&(Ru(Pf(this._lContainer),n),VD(r[ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=op(this._lContainer,n);return r&&Ru(Pf(this._lContainer),n)!=null?new ii(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iE(t){return t[Pu]}function Pf(t){return t[Pu]||(t[Pu]=[])}function BP(t,e){let n,r=e[t.index];return On(r)?n=r:(n=nC(r,e,null,t),e[t.index]=n,ul(e,n)),HP(n,e,t,r),new fC(n,t,e)}function $P(t,e){let n=t[Qe],r=n.createComment(""),i=Lt(e,t),s=jD(n,i);return Hu(n,s,r,Ex(n,i),!1),r}var HP=GP,qP=()=>!1;function zP(t,e,n){return qP(t,e,n)}function GP(t,e,n,r){if(t[Xr])return;let i;n.type&8?i=an(r):i=$P(e,n),t[Xr]=i}var sE=new Set;function Es(t){sE.has(t)||(sE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sa(t,e){Es("NgSignals");let n=tw(t),r=n[rr];return e?.equal&&(r.equal=e.equal),n.set=i=>rf(r,i),n.update=i=>nw(r,i),n.asReadonly=WP.bind(n),n}function WP(){let t=this[rr];if(t.readonlyFn===void 0){let e=()=>this();e[rr]=t,t.readonlyFn=e}return t.readonlyFn}function KP(t){return Object.getPrototypeOf(t.prototype).constructor}function Ir(t){let e=KP(t.type),n=!0,r=[t];for(;e;){let i;if(gr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=_u(t.inputs),o.inputTransforms=_u(t.inputTransforms),o.declaredInputs=_u(t.declaredInputs),o.outputs=_u(t.outputs);let a=i.hostBindings;a&&XP(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&ZP(t,u),l&&JP(t,l),QP(t,i),nM(t.outputs,i.outputs),gr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ir&&(n=!1)}}e=Object.getPrototypeOf(e)}YP(r)}function QP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function YP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ko(i.hostAttrs,n=Ko(n,i.hostAttrs))}}function _u(t){return t===ss?{}:t===Ot?[]:t}function ZP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function JP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function XP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function og(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var mr=class{},Zo=class{};var gp=class extends mr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gu(this);let s=NE(e);this._bootstrapComponents=OD(s.bootstrap),this._r3Injector=ID(e,n,[{provide:mr,useValue:this},{provide:fs,useValue:this.componentFactoryResolver},...r],ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mp=class extends Zo{constructor(e){super(),this.moduleType=e}create(e){return new gp(this.moduleType,e,[])}};var Wu=class extends mr{constructor(e){super(),this.componentFactoryResolver=new Gu(this),this.instance=null;let n=new Qo([...e.providers,{provide:mr,useValue:this},{provide:fs,useValue:this.componentFactoryResolver}],e.parent||Rp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ll(t,e,n=null){return new Wu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function dl(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function eO(t){return(t.flags&32)===32}function tO(t,e,n,r,i,s,o,a,u){let l=e.consts,h=cl(e,t,4,o||null,a||null);XD(e,n,h,Fu(l,u)),Up(e,h);let p=h.tView=eg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function nO(t,e,n,r,i,s,o,a,u,l){let h=n+pr,p=e.firstCreatePass?tO(h,e,t,r,i,s,o,a,u):e.data[h];ta(p,!1);let m=rO(e,t,p,n);Lp()&&Jp(e,t,m,p),ri(m,t);let v=nC(m,t,m,p);return t[h]=v,ul(t,v),zP(v,p,t),Mp(p)&&YD(e,t,p),u!=null&&ZD(t,p,l),p}function wr(t,e,n,r,i,s,o,a){let u=Ae(),l=Kt(),h=Fu(l.consts,s);return nO(u,l,t,e,n,r,i,h,o,a),wr}var rO=iO;function iO(t,e,n,r){return Vp(!0),e[Qe].createComment("")}var ts=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ts||{}),pC=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Zr=class Zr{constructor(){this.ngZone=P(Ie),this.scheduler=P(hs),this.errorHandler=P(An,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Zr.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Zr.PHASES=[ts.EarlyRead,ts.Write,ts.MixedReadWrite,ts.Read],Zr.\u0275prov=j({token:Zr,providedIn:"root",factory:()=>new Zr});var yp=Zr,vp=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function ag(t,e){!e?.injector&&YM(ag);let n=e?.injector??P(Ye);return lx(n)?(Es("NgAfterNextRender"),oO(t,n,e,!0)):aO}function sO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function oO(t,e,n,r){let i=e.get(pC);i.impl??=e.get(yp);let s=n?.phase??ts.MixedReadWrite,o=new vp(i.impl,sO(t,s),r,e.get($p));return i.impl.register(o),o}var aO={destroy(){}};function hl(t,e,n,r){let i=Ae(),s=Op();if(dl(i,s,e)){let o=Kt(),a=cD();Jx(a,i,t,e,n,r)}return hl}function cO(t,e,n,r){return dl(t,Op(),n)?e+Zu(n)+r:ws}function Iu(t,e){return t<<17|e<<2}function si(t){return t>>17&32767}function uO(t){return(t&2)==2}function lO(t,e){return t&131071|e<<17}function _p(t){return t|2}function ms(t){return(t&131068)>>2}function Of(t,e){return t&-131069|e<<2}function dO(t){return(t&1)===1}function Ip(t){return t|1}function hO(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=si(o),u=ms(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ea(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=si(t[a+1]);t[r+1]=Iu(m,a),m!==0&&(t[m+1]=Of(t[m+1],r)),t[a+1]=lO(t[a+1],r)}else t[r+1]=Iu(a,0),a!==0&&(t[a+1]=Of(t[a+1],r)),a=r;else t[r+1]=Iu(u,0),a===0?a=r:t[u+1]=Of(t[u+1],r),u=r;l&&(t[r+1]=_p(t[r+1])),oE(t,h,r,!0),oE(t,h,r,!1),fO(e,h,t,r,s),o=Iu(a,u),s?e.classBindings=o:e.styleBindings=o}function fO(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ea(s,e)>=0&&(n[r+1]=Ip(n[r+1]))}function oE(t,e,n,r){let i=t[n+1],s=e===null,o=r?si(i):ms(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];pO(u,e)&&(a=!0,t[o+1]=r?Ip(l):_p(l)),o=r?si(l):ms(l)}a&&(t[n+1]=r?_p(i):Ip(i))}function pO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ea(t,e)>=0:!1}function _t(t,e,n){let r=Ae(),i=Op();if(dl(r,i,e)){let s=Kt(),o=cD();jx(s,o,r,t,e,r[Qe],n,!1)}return _t}function aE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";tg(t,n,s[o],o,r)}function fl(t,e){return gO(t,e,null,!0),fl}function gO(t,e,n,r){let i=Ae(),s=Kt(),o=gN(2);if(s.firstUpdatePass&&yO(s,t,o,r),e!==ws&&dl(i,o,e)){let a=s.data[_s()];EO(s,a,i,i[Qe],t,i[o+1]=DO(e,n),r,o)}}function mO(t,e){return e>=t.expandoStartIndex}function yO(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[_s()],o=mO(t,n);CO(s,r)&&e===null&&!o&&(e=!1),e=vO(i,s,e,r),hO(i,s,e,n,o,r)}}function vO(t,e,n,r){let i=_N(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=kf(null,t,e,n,r),n=Jo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=kf(i,t,e,n,r),s===null){let u=_O(t,e,r);u!==void 0&&Array.isArray(u)&&(u=kf(null,t,e,u[1],r),u=Jo(u,e.attrs,r),IO(t,e,r,u))}else s=wO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function _O(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ms(r)!==0)return t[si(r)]}function IO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[si(i)]=r}function wO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Jo(r,o,n)}return Jo(r,e.attrs,n)}function kf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Jo(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Jo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),EM(t,o,n?!0:e[++s]))}return t===void 0?null:t}function EO(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=dO(l)?cE(u,e,n,i,ms(l),o):void 0;if(!Ku(h)){Ku(s)||uO(l)&&(s=cE(u,null,n,i,a,o));let p=GE(_s(),n);Rx(r,o,p,i,s)}}function cE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===ws&&(m=p?Ot:void 0);let v=p?bf(m,r):h===r?m:void 0;if(l&&!Ku(v)&&(v=bf(u,r)),Ku(v)&&(a=v,o))return a;let S=t[i+1];i=o?si(S):ms(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=bf(u,r))}return a}function Ku(t){return t!==void 0}function DO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ut(ra(t)))),t}function CO(t,e){return(t.flags&(e?8:16))!==0}function bO(t,e,n,r,i,s){let o=e.consts,a=Fu(o,i),u=cl(e,t,2,r,a);return XD(e,n,u,Fu(o,s)),u.attrs!==null&&fp(u,u.attrs,!1),u.mergedAttrs!==null&&fp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function re(t,e,n,r){let i=Ae(),s=Kt(),o=pr+t,a=i[Qe],u=s.firstCreatePass?bO(o,s,i,e,n,r):s.data[o],l=TO(s,i,u,a,e,t);i[o]=l;let h=Mp(u);return ta(u,!0),HD(a,l,u),!eO(u)&&Lp()&&Jp(s,i,l,u),oN()===0&&ri(l,i),aN(),h&&(YD(s,i,u),QD(s,u,i)),r!==null&&ZD(i,u),re}function ie(){let t=vt();eD()?fN():(t=t.parent,ta(t,!1));let e=t;lN(e)&&dN(),cN();let n=Kt();return n.firstCreatePass&&(Up(n,t),BE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&TN(e)&&aE(n,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&SN(e)&&aE(n,e,Ae(),e.stylesWithoutHost,!1),ie}function Tt(t,e,n,r){return re(t,e,n,r),ie(),Tt}var TO=(t,e,n,r,i,s)=>(Vp(!0),kD(r,i,EN()));function cg(){return Ae()}var Qu="en-US";var SO=Qu;function AO(t){typeof t=="string"&&(SO=t.toLowerCase().replace(/_/g,"-"))}var RO=(t,e,n)=>{};function ht(t,e,n,r){let i=Ae(),s=Kt(),o=vt();return NO(s,i,i[Qe],o,t,e,r),ht}function MO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[xu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function NO(t,e,n,r,i,s,o){let a=Mp(r),l=t.firstCreatePass&&rP(t),h=e[Gt],p=nP(e),m=!0;if(r.type&3||o){let N=Lt(r,e),M=o?o(N):N,F=p.length,$=o?se=>o(an(se[r.index])):r.index,q=null;if(!o&&a&&(q=MO(t,e,i,r.index)),q!==null){let se=q.__ngLastListenerFn__||q;se.__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,m=!1}else{s=lE(r,e,h,s),RO(N,i,s);let se=n.listen(M,i,s);p.push(s,se),l&&l.push(i,$,F,F+1)}}else s=lE(r,e,h,s);let v=r.outputs,S;if(m&&v!==null&&(S=v[i])){let N=S.length;if(N)for(let M=0;M<N;M+=2){let F=S[M],$=S[M+1],Me=e[F][$].subscribe(s),Z=p.length;p.push(s,Me),l&&l.push(i,r.index,Z,-(Z+1))}}}function uE(t,e,n,r){let i=me(null);try{return tn(6,e,n),n(r)!==!1}catch(s){return iC(t,s),!1}finally{tn(7,e,n),me(i)}}function lE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?vr(t.index,e):e;rg(o,5);let a=uE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=uE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function dn(t=1){return wN(t)}function ve(t,e=""){let n=Ae(),r=Kt(),i=t+pr,s=r.firstCreatePass?cl(r,i,1,e,null):r.data[i],o=xO(r,n,s,e,t);n[i]=o,Lp()&&Jp(r,n,o,s),ta(s,!1)}var xO=(t,e,n,r,i)=>(Vp(!0),hx(e[Qe],r));function ai(t){return gC("",t,""),ai}function gC(t,e,n){let r=Ae(),i=cO(r,t,e,n);return i!==ws&&iP(r,_s(),i),gC}function PO(t,e,n){let r=Kt();if(r.firstCreatePass){let i=gr(t);wp(n,r.data,r.blueprint,i,!0),wp(e,r.data,r.blueprint,i,!1)}}function wp(t,e,n,r,i){if(t=ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)wp(t[s],e,n,r,i);else{let s=Kt(),o=Ae(),a=vt(),u=as(t)?t:ct(t.provide),l=LE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(as(t)||!t.multi){let v=new ni(l,i,ne),S=Lf(u,e,i?h:h+m,p);S===-1?(Jf(Uu(a,o),s,u),Ff(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[S]=v,o[S]=v)}else{let v=Lf(u,e,h+m,p),S=Lf(u,e,h,h+m),N=v>=0&&n[v],M=S>=0&&n[S];if(i&&!M||!i&&!N){Jf(Uu(a,o),s,u);let F=FO(i?kO:OO,n.length,i,r,l);!i&&M&&(n[S].providerFactory=F),Ff(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else{let F=mC(n[i?S:v],l,!i&&r);Ff(s,t,v>-1?v:S,F)}!i&&r&&M&&n[S].componentProviders++}}}function Ff(t,e,n,r){let i=as(e),s=HM(e);if(i||s){let u=(s?ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function mC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function OO(t,e,n,r){return Ep(this.multi,[])}function kO(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ds(n,n[ue],this.providerFactory.index,r);s=a.slice(0,o),Ep(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Ep(i,s);return s}function Ep(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function FO(t,e,n,r,i){let s=new ni(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,mC(s,i,r&&!n),s}function pl(t,e=[]){return n=>{n.providersResolver=(r,i)=>PO(r,i?i(t):t,e)}}var LO=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=OE(!1,r.type),s=i.length>0?ll([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(z(bt))});let t=e;return t})();function It(t){Es("NgStandalone"),t.getStandaloneInjector=e=>e.get(LO).getOrCreateStandaloneInjector(t)}var Mn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},yC=new Mn("18.2.4");var gl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var vC=new U("");function ci(t){return!!t&&typeof t.then=="function"}function _C(t){return!!t&&typeof t.subscribe=="function"}var ml=new U(""),IC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(ml,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ci(o))r.push(o);else if(_C(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yl=new U("");function VO(){ew(()=>{throw new B(600,!1)})}function UO(t){return t.isBoundToModule}var jO=10;function BO(t,e,n){try{let r=n();return ci(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ui=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(WN),this.afterRenderManager=P(pC),this.zonelessEnabled=P(sg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=P(Is).hasPendingTasks.pipe(ae(r=>!r)),this._injector=P(bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof zu;if(!this._injector.get(IC).done){let v=!s&&ME(r),S=!1;throw new B(405,S)}let a;s?a=r:a=this._injector.get(fs).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=UO(a)?void 0:this._injector.get(mr),l=i||a.selector,h=a.create(Ye.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(vC,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),bu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new B(101,!1);let r=me(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,me(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(ps,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<jO;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)$O(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>nl(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;bu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(yl,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>bu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new B(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $O(t,e,n,r){if(!n&&!nl(t))return;aC(t,e,n&&!r?0:1)}var Dp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vl=(()=>{let e=class e{compileModuleSync(r){return new mp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=NE(r),o=OD(s.declarations).reduce((a,u)=>{let l=fr(u);return l&&a.push(new gs(l)),a},[]);return new Dp(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var HO=(()=>{let e=class e{constructor(){this.zone=P(Ie),this.changeDetectionScheduler=P(hs),this.applicationRef=P(ui)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qO=new U("",{factory:()=>!1});function wC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ie(oe(k({},DC()),{scheduleInRootZone:n})),[{provide:Ie,useFactory:t},{provide:os,multi:!0,useFactory:()=>{let r=P(HO,{optional:!0});return()=>r.initialize()}},{provide:os,multi:!0,useFactory:()=>{let r=P(zO);return()=>{r.initialize()}}},e===!0?{provide:dC,useValue:!0}:[],{provide:hC,useValue:n??wD}]}function EC(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=wC({ngZoneFactory:()=>{let i=DC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Es("NgZone_CoalesceEvent"),new Ie(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return cn([{provide:qO,useValue:!0},{provide:sg,useValue:!1},r])}function DC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var zO=(()=>{let e=class e{constructor(){this.subscription=new xe,this.initialized=!1,this.zone=P(Ie),this.pendingTasks=P(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GO=(()=>{let e=class e{constructor(){this.appRef=P(ui),this.taskService=P(Is),this.ngZone=P(Ie),this.zonelessEnabled=P(sg),this.disableScheduling=P(dC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(hC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?Gw:ED;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Gw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function WO(){return typeof $localize<"u"&&$localize.locale||Qu}var ug=new U("",{providedIn:"root",factory:()=>P(ug,te.Optional|te.SkipSelf)||WO()});var CC=new U("");function wu(t){return!!t.platformInjector}function KO(t){let e=wu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ie);return n.run(()=>{wu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(An,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),wu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(CC);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{bu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return BO(r,n,()=>{let s=e.get(IC);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(ug,Qu);if(AO(o||Qu),wu(t)){let a=e.get(ui);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return QO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function QO(t,e){let n=t.injector.get(ui);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new B(-403,!1);e.push(t)}var Tu=null;function YO(t=[],e){return Ye.create({name:e,providers:[{provide:Xu,useValue:"platform"},{provide:CC,useValue:new Set([()=>Tu=null])},...t]})}function ZO(t=[]){if(Tu)return Tu;let e=YO(t);return Tu=e,VO(),JO(e),e}function JO(t){t.get(Gp,null)?.forEach(n=>n())}var Ds=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XO;let t=e;return t})();function XO(t){return ek(vt(),Ae(),(t&16)===16)}function ek(t,e,n){if(tl(t)&&!n){let r=vr(t.index,e);return new ii(r,r)}else if(t.type&175){let r=e[on];return new ii(r,e)}return null}function bC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=ZO(r),s=[wC({}),{provide:hs,useExisting:GO},...n||[]],o=new Wu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return KO({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var TC=new U("");function Cs(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function oa(t,e){Es("NgSignals");let n=ZI(t);return e?.equal&&(n[rr].equal=e.equal),n}function kn(t){let e=me(null);try{return t()}finally{me(e)}}function SC(t){let e=fr(t);if(!e)return null;let n=new gs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var NC=null;function Ln(){return NC}function xC(t){NC??=t}var _l=class{};var ft=new U(""),pg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(tk),providedIn:"platform"});let t=e;return t})(),PC=new U(""),tk=(()=>{let e=class e extends pg{constructor(){super(),this._doc=P(ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(r){let i=Ln().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ln().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function gg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function AC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Fn(t){return t&&t[0]!=="?"?"?"+t:t}var Vn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(mg),providedIn:"root"});let t=e;return t})(),OC=new U(""),mg=(()=>{let e=class e extends Vn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return gg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Fn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Fn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Fn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(pg),z(OC,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kC=(()=>{let e=class e extends Vn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=gg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Fn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Fn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(pg),z(OC,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),bs=(()=>{let e=class e{constructor(r){this._subject=new Fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ik(AC(RC(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Fn(i))}normalize(r){return e.stripTrailingSlash(rk(this._basePath,RC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Fn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Fn,e.joinWithSlash=gg,e.stripTrailingSlash=AC,e.\u0275fac=function(i){return new(i||e)(z(Vn))},e.\u0275prov=j({token:e,factory:()=>nk(),providedIn:"root"});let t=e;return t})();function nk(){return new bs(z(Vn))}function rk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function RC(t){return t.replace(/\/index.html$/,"")}function ik(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function FC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ts=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new dg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){MC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){MC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(ia),ne(ig))},e.\u0275dir=yt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),dg=class{constructor(){this.$implicit=null,this.ngIf=null}};function MC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ut(e)}'.`)}var yg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xn({type:e}),e.\u0275inj=Nn({});let t=e;return t})(),vg="browser",sk="server";function ok(t){return t===vg}function _g(t){return t===sk}var LC=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>ok(P(ln))?new hg(P(ft),window):new fg});let t=e;return t})(),hg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=ak(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function ak(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var fg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Il=class{};var Eg=class extends _l{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dg=class t extends Eg{static makeCurrent(){xC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uk();return n==null?null:lk(n)}resetBaseElement(){aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return FC(document.cookie,e)}},aa=null;function uk(){return aa=aa||document.querySelector("base"),aa?aa.getAttribute("href"):null}function lk(t){return new URL(t,document.baseURI).pathname}var dk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),wl=new U(""),BC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(wl),z(Ie))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ca=class{constructor(e){this._doc=e}},Ig="ng-app-id",$C=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_g(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ig}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ig),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ig,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(ft),z(zp),z(Wp,8),z(ln))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bg=/%COMP%/g,HC="%COMP%",hk=`_nghost-${HC}`,fk=`_ngcontent-${HC}`,pk=!0,gk=new U("",{providedIn:"root",factory:()=>pk});function mk(t){return fk.replace(bg,t)}function yk(t){return hk.replace(bg,t)}function qC(t,e){return e.map(n=>n.replace(bg,t))}var VC=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=_g(u),this.defaultRenderer=new ua(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===rn.ShadowDom&&(i=oe(k({},i),{encapsulation:rn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof El?s.applyToHost(r):s instanceof la&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case rn.Emulated:o=new El(l,h,i,this.appId,p,a,u,m);break;case rn.ShadowDom:return new Cg(l,h,r,i,a,u,this.nonce,m);default:o=new la(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(BC),z($C),z(zp),z(gk),z(ft),z(ln),z(Ie),z(Wp))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ua=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(wg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(UC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(UC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=wg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Rn.DashCase|Rn.Important)?e.style.setProperty(n,r,i&Rn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Rn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function UC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Cg=class extends ua{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=qC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},la=class extends ua{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?qC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},El=class extends la{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=mk(l),this.hostAttr=yk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},vk=(()=>{let e=class e extends ca{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(z(ft))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),_k=(()=>{let e=class e extends ca{constructor(r){super(r),this.delegate=P(TC,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(z(ft))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),jC=["alt","control","meta","shift"],Ik={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ek=(()=>{let e=class e extends ca{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),jC.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Ik[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),jC.forEach(a=>{if(a!==s){let u=wk[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(ft))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function zC(t,e){return bC(k({rootComponent:t},Dk(e)))}function Dk(t){return{appProviders:[...Ak,...t?.providers??[]],platformProviders:Sk}}function Ck(){Dg.makeCurrent()}function bk(){return new An}function Tk(){return RD(document),document}var Sk=[{provide:ln,useValue:vg},{provide:Gp,useValue:Ck,multi:!0},{provide:ft,useFactory:Tk,deps:[]}];var Ak=[{provide:Xu,useValue:"root"},{provide:An,useFactory:bk,deps:[]},{provide:wl,useClass:vk,multi:!0,deps:[ft,Ie,ln]},{provide:wl,useClass:Ek,multi:!0,deps:[ft]},{provide:wl,useClass:_k,multi:!0},VC,$C,BC,{provide:ps,useExisting:VC},{provide:Il,useClass:dk,deps:[]},[]];var GC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(ft))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ee="primary",ba=Symbol("RouteTitle"),Mg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xs(t){return new Mg(t)}function Mk(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Nk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!hn(t[n],e[n]))return!1;return!0}function hn(t,e){let n=t?Ng(t):void 0,r=e?Ng(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!rb(t[i],e[i]))return!1;return!0}function Ng(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function ib(t){return t.length>0?t[t.length-1]:null}function Cr(t){return vf(t)?t:ci(t)?Se(Promise.resolve(t)):W(t)}var xk={exact:ob,subset:ab},sb={exact:Pk,subset:Ok,ignored:()=>!0};function WC(t,e,n){return xk[n.paths](t.root,e.root,n.matrixParams)&&sb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Pk(t,e){return hn(t,e)}function ob(t,e,n){if(!di(t.segments,e.segments)||!bl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ob(t.children[r],e.children[r],n))return!1;return!0}function Ok(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>rb(t[n],e[n]))}function ab(t,e,n){return cb(t,e,e.segments,n)}function cb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!di(i,n)||e.hasChildren()||!bl(i,n,r))}else if(t.segments.length===n.length){if(!di(t.segments,n)||!bl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ab(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!di(t.segments,i)||!bl(t.segments,i,r)||!t.children[ee]?!1:cb(t.children[ee],e,s,r)}}function bl(t,e,n){return e.every((r,i)=>sb[n](t[i].parameters,r.parameters))}var jn=class{constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return Lk.serialize(this)}},we=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tl(this)}},li=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xs(this.parameters),this._parameterMap}toString(){return lb(this)}};function kk(t,e){return di(t,e)&&t.every((n,r)=>hn(n.parameters,e[r].parameters))}function di(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Fk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var Ta=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>new Ps,providedIn:"root"});let t=e;return t})(),Ps=class{parse(e){let n=new Pg(e);return new jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${da(e.root,!0)}`,r=jk(e.queryParams),i=typeof e.fragment=="string"?`#${Vk(e.fragment)}`:"";return`${n}${r}${i}`}},Lk=new Ps;function Tl(t){return t.segments.map(e=>lb(e)).join("/")}function da(t,e){if(!t.hasChildren())return Tl(t);if(e){let n=t.children[ee]?da(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ee&&r.push(`${i}:${da(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Fk(t,(r,i)=>i===ee?[da(t.children[ee],!1)]:[`${i}:${da(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${Tl(t)}/${n[0]}`:`${Tl(t)}/(${n.join("//")})`}}function ub(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dl(t){return ub(t).replace(/%3B/gi,";")}function Vk(t){return encodeURI(t)}function xg(t){return ub(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sl(t){return decodeURIComponent(t)}function KC(t){return Sl(t.replace(/\+/g,"%20"))}function lb(t){return`${xg(t.path)}${Uk(t.parameters)}`}function Uk(t){return Object.entries(t).map(([e,n])=>`;${xg(e)}=${xg(n)}`).join("")}function jk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Dl(n)}=${Dl(i)}`).join("&"):`${Dl(n)}=${Dl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Bk=/^[^\/()?;#]+/;function Tg(t){let e=t.match(Bk);return e?e[0]:""}var $k=/^[^\/()?;=#]+/;function Hk(t){let e=t.match($k);return e?e[0]:""}var qk=/^[^=?&#]+/;function zk(t){let e=t.match(qk);return e?e[0]:""}var Gk=/^[^&#]+/;function Wk(t){let e=t.match(Gk);return e?e[0]:""}var Pg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new we(e,n)),r}parseSegment(){let e=Tg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new B(4009,!1);return this.capture(e),new li(Sl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Hk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tg(this.remaining);i&&(r=i,this.capture(r))}e[Sl(n)]=Sl(r)}parseQueryParam(e){let n=zk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Wk(this.remaining);o&&(r=o,this.capture(r))}let i=KC(n),s=KC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new B(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ee);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ee]:new we([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new B(4011,!1)}};function db(t){return t.segments.length>0?new we([],{[ee]:t}):t}function hb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=hb(i);if(r===ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new we(t.segments,e);return Kk(n)}function Kk(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new we(t.segments.concat(e.segments),e.children)}return t}function hi(t){return t instanceof jn}function Qk(t,e,n=null,r=null){let i=fb(t);return pb(i,e,n,r)}function fb(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new we(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=db(r);return e??i}function pb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Sg(i,i,i,n,r);let s=Yk(e);if(s.toRoot())return Sg(i,i,new we([],{}),n,r);let o=Zk(s,i,t),a=o.processChildren?pa(o.segmentGroup,o.index,s.commands):mb(o.segmentGroup,o.index,s.commands);return Sg(i,o.segmentGroup,a,n,r)}function Al(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ya(t){return typeof t=="object"&&t!=null&&t.outlets}function Sg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=gb(t,e,n);let a=db(hb(o));return new jn(a,s,i)}function gb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=gb(s,e,n)}),new we(t.segments,r)}var Rl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Al(r[0]))throw new B(4003,!1);let i=r.find(ya);if(i&&i!==ib(r))throw new B(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Rl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Rl(n,e,r)}var Rs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Zk(t,e,n){if(t.isAbsolute)return new Rs(e,!0,0);if(!n)return new Rs(e,!1,NaN);if(n.parent===null)return new Rs(n,!0,0);let r=Al(t.commands[0])?0:1,i=n.segments.length-1+r;return Jk(n,i,t.numberOfDoubleDots)}function Jk(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new B(4005,!1);i=r.segments.length}return new Rs(r,!1,i-s)}function Xk(t){return ya(t[0])?t[0].outlets:{[ee]:t}}function mb(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return pa(t,e,n);let r=e1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new we(t.segments.slice(0,r.pathIndex),{});return s.children[ee]=new we(t.segments.slice(r.pathIndex),t.children),pa(s,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?Og(t,e,n):r.match?pa(t,0,i):Og(t,e,n)}function pa(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=Xk(n),i={};if(Object.keys(r).some(s=>s!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let s=pa(t.children[ee],e,n);return new we(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=mb(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(t.segments,i)}}function e1(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ya(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!YC(u,l,o))return s;r+=2}else{if(!YC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Og(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ya(s)){let u=t1(s.outlets);return new we(r,u)}if(i===0&&Al(n[0])){let u=t.segments[e];r.push(new li(u.path,QC(n[0]))),i++;continue}let o=ya(s)?s.outlets[ee]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Al(a)?(r.push(new li(o,QC(a))),i+=2):(r.push(new li(o,{})),i++)}return new we(r,{})}function t1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Og(new we([],{}),0,r))}),e}function QC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function YC(t,e,n){return t==n.path&&hn(e,n.parameters)}var ga="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Ut=class{constructor(e,n){this.id=e,this.url=n}},Os=class extends Ut{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fn=class extends Ut{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),Ml=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ml||{}),Un=class extends Ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Er=class extends Ut{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},va=class extends Ut{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nl=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kg=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends Ut{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lg=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends Ut{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ug=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$g=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},_a=class{},ks=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function n1(t,e){return t.providers&&!t._injector&&(t._injector=ll(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qt(t){return t.outlet||ee}function r1(t,e){let n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}function Sa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zg=class{get injector(){return Sa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Aa(this.rootInjector),this.attachRef=null}},Aa=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new zg(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(z(bt))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wg(e,this._root).map(n=>n.value)}};function Gg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gg(t,n);if(r)return r}return null}function Wg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wg(t,n);if(r.length)return r.unshift(e),r}return[]}var St=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function As(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ol=class extends Pl{constructor(e,n){super(e),this.snapshot=n,nm(this,e)}toString(){return this.snapshot.toString()}};function yb(t){let e=i1(t),n=new Ke([new li("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),a=new Dr(n,r,s,o,i,ee,t,e.root);return a.snapshot=e.root,new Ol(new St(a,[]),e)}function i1(t){let e={},n={},r={},i="",s=new Ms([],e,r,i,n,ee,t,null,{});return new Fl("",new St(s,[]))}var Dr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[ba]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&_b(i)&&(r.resolve[ba]=i.title),r}var Ms=class{get title(){return this.data?.[ba]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fl=class extends Pl{constructor(e,n){super(n),this.url=e,nm(this,n)}toString(){return vb(this._root)}};function nm(t,e){e.value._routerState=t,e.children.forEach(n=>nm(t,n))}function vb(t){let e=t.children.length>0?` { ${t.children.map(vb).join(", ")} } `:"";return`${t.value}${e}`}function Ag(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),hn(e.params,n.params)||t.paramsSubject.next(n.params),Nk(e.url,n.url)||t.urlSubject.next(n.url),hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Kg(t,e){let n=hn(t.params,e.params)&&kk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Kg(t.parent,e.parent))}function _b(t){return typeof t.title=="string"||t.title===null}var rm=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new Fe,this.deactivateEvents=new Fe,this.attachEvents=new Fe,this.detachEvents=new Fe,this.parentContexts=P(Aa),this.location=P(ia),this.changeDetector=P(Ds),this.inputBinder=P(jl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new B(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Qg(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=yt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yr]});let t=e;return t})(),Qg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Dr?this.route:e===Aa?this.childContexts:this.parent.get(e,n)}},jl=new U(""),ZC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ho([i.queryParams,i.params,i.data]).pipe(xt(([o,a,u],l)=>(u=k(k(k({},o),a),u),l===0?W(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=SC(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function s1(t,e,n){let r=Ia(t,e._root,n?n._root:void 0);return new Ol(r,e)}function Ia(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=o1(t,e,n);return new St(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ia(t,a)),o}}let r=a1(e.value),i=e.children.map(s=>Ia(t,s));return new St(r,i)}}function o1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ia(t,r,i);return Ia(t,r)})}function a1(t){return new Dr(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var wa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Ib="ngNavigationCancelingError";function Ll(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wb(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Ib]=!0,n.cancellationCode=e,n}function c1(t){return Eb(t)&&hi(t.url)}function Eb(t){return!!t&&t[Ib]}var u1=(t,e,n,r)=>ae(i=>(new Yg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Yg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ag(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=As(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=As(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=As(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=As(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new qg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $g(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Ag(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ag(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Vl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,n){this.component=e,this.route=n}};function l1(t,e,n){let r=t._root,i=e?e._root:null;return ha(r,i,n,[r.value])}function d1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!pE(t)?t:e.get(t):r}function ha(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=As(e);return t.children.forEach(o=>{h1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ma(a,n.getContext(o),i)),i}function h1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=f1(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ha(t,e,a?a.children:null,r,i):ha(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,o))}else o&&ma(e,a,i),i.canActivateChecks.push(new Vl(r)),s.component?ha(t,null,a?a.children:null,r,i):ha(t,null,n,r,i);return i}function f1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!di(t.url,e.url);case"pathParamsOrQueryParamsChange":return!di(t.url,e.url)||!hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kg(t,e)||!hn(t.queryParams,e.queryParams);case"paramsChange":default:return!Kg(t,e)}}function ma(t,e,n){let r=As(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ma(o,e.children.getContext(s),n):ma(o,null,n):ma(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ns(e.outlet.component,i)):n.canDeactivateChecks.push(new Ns(null,i)):n.canDeactivateChecks.push(new Ns(null,i))}function Ra(t){return typeof t=="function"}function p1(t){return typeof t=="boolean"}function g1(t){return t&&Ra(t.canLoad)}function m1(t){return t&&Ra(t.canActivate)}function y1(t){return t&&Ra(t.canActivateChild)}function v1(t){return t&&Ra(t.canDeactivate)}function _1(t){return t&&Ra(t.canMatch)}function Db(t){return t instanceof Tn||t?.name==="EmptyError"}var Cl=Symbol("INITIAL_VALUE");function Fs(){return xt(t=>Ho(t.map(e=>e.pipe(Sn(1),Df(Cl)))).pipe(ae(e=>{for(let n of e)if(n!==!0){if(n===Cl)return Cl;if(n===!1||I1(n))return n}return!0}),Nt(e=>e!==Cl),Sn(1)))}function I1(t){return hi(t)||t instanceof wa}function w1(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?W(oe(k({},n),{guardsResult:!0})):E1(o,r,i,t).pipe(ke(a=>a&&p1(a)?D1(r,s,t,e):W(a)),ae(a=>oe(k({},n),{guardsResult:a})))})}function E1(t,e,n,r){return Se(t).pipe(ke(i=>A1(i.component,i.route,n,e,r)),en(i=>i!==!0,!0))}function D1(t,e,n,r){return Se(e).pipe(Qr(i=>Yi(b1(i.route.parent,r),C1(i.route,r),S1(t,i.path,n),T1(t,i.route,n))),en(i=>i!==!0,!0))}function C1(t,e){return t!==null&&e&&e(new Hg(t)),W(!0)}function b1(t,e){return t!==null&&e&&e(new Bg(t)),W(!0)}function T1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(s=>gu(()=>{let o=Sa(e)??n,a=Ls(s,o),u=m1(a)?a.canActivate(e,t):un(o,()=>a(e,t));return Cr(u).pipe(en())}));return W(i).pipe(Fs())}function S1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>d1(o)).filter(o=>o!==null).map(o=>gu(()=>{let a=o.guards.map(u=>{let l=Sa(o.node)??n,h=Ls(u,l),p=y1(h)?h.canActivateChild(r,t):un(l,()=>h(r,t));return Cr(p).pipe(en())});return W(a).pipe(Fs())}));return W(s).pipe(Fs())}function A1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(a=>{let u=Sa(e)??i,l=Ls(a,u),h=v1(l)?l.canDeactivate(t,e,n,r):un(u,()=>l(t,e,n,r));return Cr(h).pipe(en())});return W(o).pipe(Fs())}function R1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let s=i.map(o=>{let a=Ls(o,t),u=g1(a)?a.canLoad(e,n):un(t,()=>a(e,n));return Cr(u)});return W(s).pipe(Fs(),Cb(r))}function Cb(t){return lf(Be(e=>{if(typeof e!="boolean")throw Ll(t,e)}),ae(e=>e===!0))}function M1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let s=i.map(o=>{let a=Ls(o,t),u=_1(a)?a.canMatch(e,n):un(t,()=>a(e,n));return Cr(u)});return W(s).pipe(Fs(),Cb(r))}var Ea=class{constructor(e){this.segmentGroup=e||null}},Da=class extends Error{constructor(e){super(),this.urlTree=e}};function Ss(t){return Ki(new Ea(t))}function N1(t){return Ki(new B(4e3,!1))}function x1(t){return Ki(wb(!1,At.GuardRejected))}var Zg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[ee])return N1(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:S,title:N}=i,M=un(s,()=>a({params:v,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(M instanceof jn)throw new Da(M);n=M}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Da(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new jn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new we(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new B(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Jg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function P1(t,e,n,r,i){let s=bb(t,e,n);return s.matched?(r=n1(e,r),M1(r,e,n,i).pipe(ae(o=>o===!0?s:k({},Jg)))):W(s)}function bb(t,e,n){if(e.path==="**")return O1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},Jg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Mk)(n,t,e);if(!i)return k({},Jg);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function O1(t){return{matched:!0,parameters:t.length>0?ib(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function JC(t,e,n,r){return n.length>0&&L1(t,n,r)?{segmentGroup:new we(e,F1(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&V1(t,n,r)?{segmentGroup:new we(t.segments,k1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function k1(t,e,n,r){let i={};for(let s of n)if(Bl(t,e,s)&&!r[Qt(s)]){let o=new we([],{});i[Qt(s)]=o}return k(k({},r),i)}function F1(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Qt(r)!==ee){let i=new we([],{});n[Qt(r)]=i}return n}function L1(t,e,n){return n.some(r=>Bl(t,e,r)&&Qt(r)!==ee)}function V1(t,e,n){return n.some(r=>Bl(t,e,r))}function Bl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function U1(t,e,n){return e.length===0&&!t.children[n]}var Xg=class{};function j1(t,e,n,r,i,s,o="emptyOnly"){return new em(t,e,n,r,i,o,s).recognize()}var B1=31,em=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Zg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new B(4002,`'${e.segmentGroup}'`)}recognize(){let e=JC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:n,rootSnapshot:r})=>{let i=new St(r,n),s=new Fl("",i),o=Qk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Ms([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(ae(r=>({children:r,rootSnapshot:n})),ar(r=>{if(r instanceof Da)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ea?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof St?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(Qr(o=>{let a=r.children[o],u=r1(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Ef((o,a)=>(o.push(...a),o)),cr(null),wf(),ke(o=>{if(o===null)return Ss(r);let a=Tb(o);return $1(a),W(a)}))}processSegment(e,n,r,i,s,o,a){return Se(n).pipe(Qr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(ar(l=>{if(l instanceof Ea)return W(null);throw l}))),en(u=>!!u),ar(u=>{if(Db(u))return U1(r,i,s)?W(new Xg):Ss(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Qt(r)!==o&&(o===ee||!Bl(i,s,r))?Ss(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Ss(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=bb(n,i,s);if(!u)return Ss(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>B1&&(this.allowRedirects=!1));let v=new Ms(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,XC(i),Qt(i),i.component??i._loadedComponent??null,i,eb(i)),S=kl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(ke(M=>this.processSegment(e,r,n,M.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=P1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(xt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,S=new Ms(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,XC(r),Qt(r),r.component??r._loadedComponent??null,r,eb(r)),N=kl(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:M,slicedSegments:F}=JC(n,m,v,l);if(F.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(ae(q=>new St(S,q)));if(l.length===0&&F.length===0)return W(new St(S,[]));let $=Qt(r)===s;return this.processSegment(h,l,M,F,$?ee:s,!0,S).pipe(ae(q=>new St(S,q instanceof St?[q]:[])))}))):Ss(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):R1(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Be(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):x1(n))):W({routes:[],injector:e})}};function $1(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function H1(t){let e=t.value.routeConfig;return e&&e.path===""}function Tb(t){let e=[],n=new Set;for(let r of t){if(!H1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Tb(r.children);e.push(new St(r.value,i))}return e.filter(r=>!n.has(r))}function XC(t){return t.data||{}}function eb(t){return t.resolve||{}}function q1(t,e,n,r,i,s){return ke(o=>j1(t,e,n,r,o.extractedUrl,i,s).pipe(ae(({state:a,tree:u})=>oe(k({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function z1(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of Sb(u))o.add(l);let a=0;return Se(o).pipe(Qr(u=>s.has(u)?G1(u,r,t,e):(u.data=kl(u,u.parent,t).resolve,W(void 0))),Be(()=>a++),Zi(1),ke(u=>a===o.size?W(n):Ct))})}function Sb(t){let e=t.children.map(n=>Sb(n)).flat();return[t,...e]}function G1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!_b(i)&&(s[ba]=i.title),W1(s,t,e,r).pipe(ae(o=>(t._resolvedData=o,t.data=kl(t,t.parent,n).resolve,null)))}function W1(t,e,n,r){let i=Ng(t);if(i.length===0)return W({});let s={};return Se(i).pipe(ke(o=>K1(t[o],e,n,r).pipe(en(),Be(a=>{if(a instanceof wa)throw Ll(new Ps,a);s[o]=a}))),Zi(1),If(s),ar(o=>Db(o)?Ct:Ki(o)))}function K1(t,e,n,r){let i=Sa(e)??r,s=Ls(t,i),o=s.resolve?s.resolve(e,n):un(i,()=>s(e,n));return Cr(o)}function Rg(t){return xt(e=>{let n=t(e);return n?Se(n).pipe(ae(()=>e)):W(e)})}var Ab=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ee);return i}getResolvedTitleForRoute(r){return r.data[ba]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(Q1),providedIn:"root"});let t=e;return t})(),Q1=(()=>{let e=class e extends Ab{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(GC))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ma=new U("",{providedIn:"root",factory:()=>({})}),Y1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=mt({type:e,selectors:[["ng-component"]],standalone:!0,features:[It],decls:1,vars:0,template:function(i,s){i&1&&Tt(0,"router-outlet")},dependencies:[rm],encapsulation:2});let t=e;return t})();function im(t){let e=t.children&&t.children.map(im),n=e?oe(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=Y1),n}var Ca=new U(""),sm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(vl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Cr(r.loadComponent()).pipe(ae(Rb),Be(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),qo(()=>{this.componentLoaders.delete(r)})),s=new qi(i,()=>new He).pipe(Hi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return W({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Z1(i,this.compiler,r,this.onLoadEndListener).pipe(qo(()=>{this.childrenLoaders.delete(i)})),a=new qi(o,()=>new He).pipe(Hi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Z1(t,e,n,r){return Cr(t.loadChildren()).pipe(ae(Rb),ke(i=>i instanceof Zo||Array.isArray(i)?W(i):Se(e.compileModuleAsync(i))),ae(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ca,[],{optional:!0,self:!0}).flat()),{routes:o.map(im),injector:s}}))}function J1(t){return t&&typeof t=="object"&&"default"in t}function Rb(t){return J1(t)?t.default:t}var om=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(X1),providedIn:"root"});let t=e;return t})(),X1=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mb=new U(""),Nb=new U("");function eF(t,e,n){let r=t.get(Nb),i=t.get(ft);return t.get(Ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),tF(t))),{onViewTransitionCreated:u}=r;return u&&un(t,()=>u({transition:a,from:e,to:n})),o})}function tF(t){return new Promise(e=>{ag({read:()=>setTimeout(e)},{injector:t})})}var nF=new U(""),am=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=P(sm),this.environmentInjector=P(bt),this.urlSerializer=P(Ta),this.rootContexts=P(Aa),this.location=P(bs),this.inputBindingEnabled=P(jl,{optional:!0})!==null,this.titleStrategy=P(Ab),this.options=P(Ma,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(om),this.createViewTransition=P(Mb,{optional:!0}),this.navigationErrorHandler=P(nF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ug(s)),i=s=>this.events.next(new jg(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(oe(k(k({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ga,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nt(o=>o.id!==0),ae(o=>oe(k({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xt(o=>{let a=!1,u=!1;return W(o).pipe(xt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),Ct;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Er(l.id,this.urlSerializer.serialize(l.rawUrl),m,Ml.IgnoredSameUrlNavigation)),l.resolve(!1),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(xt(m=>{let v=this.transitions?.getValue();return this.events.next(new Os(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?Ct:Promise.resolve(m)}),q1(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=oe(k({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new Nl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:S,restoredState:N,extras:M}=l,F=new Os(m,this.urlSerializer.serialize(v),S,N);this.events.next(F);let $=yb(this.rootComponentType).snapshot;return this.currentTransition=o=oe(k({},l),{targetSnapshot:$,urlAfterRedirects:v,extras:oe(k({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,W(o)}else{let m="";return this.events.next(new Er(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Ml.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ct}}),Be(l=>{let h=new kg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ae(l=>(this.currentTransition=o=oe(k({},l),{guards:l1(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),w1(this.environmentInjector,l=>this.events.next(l)),Be(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ll(this.urlSerializer,l.guardsResult);let h=new Fg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Nt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",At.GuardRejected),!1)),Rg(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(Be(h=>{let p=new Lg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),xt(h=>{let p=!1;return W(h).pipe(z1(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",At.NoDataFromResolver)}}))}),Be(h=>{let p=new Vg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Rg(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Be(v=>{p.component=v}),ae(()=>{})));for(let v of p.children)m.push(...h(v));return m};return Ho(h(l.targetSnapshot.root)).pipe(cr(null),Sn(1))}),Rg(()=>this.afterPreactivation()),xt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Se(p).pipe(ae(()=>o)):W(o)}),ae(l=>{let h=s1(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=oe(k({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Be(()=>{this.events.next(new _a)}),u1(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Sn(1),Be({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Cf(this.transitionAbortSubject.pipe(Be(l=>{throw l}))),qo(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ar(l=>{if(u=!0,Eb(l))this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),c1(l)?this.events.next(new ks(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new va(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=un(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof wa){let{message:m,cancellationCode:v}=Ll(this.urlSerializer,p);this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),m,v)),this.events.next(new ks(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Ct}))}))}cancelNavigationTransition(r,i,s){let o=new Un(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rF(t){return t!==ga}var iF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(sF),providedIn:"root"});let t=e;return t})(),tm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},sF=(()=>{let e=class e extends tm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=na(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:()=>P(oF),providedIn:"root"});let t=e;return t})(),oF=(()=>{let e=class e extends xb{constructor(){super(...arguments),this.location=P(bs),this.urlSerializer=P(Ta),this.options=P(Ma,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(om),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=yb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Os)this.stateMemento=this.createStateMemento();else if(r instanceof Er)this.rawUrlTree=i.initialUrl;else if(r instanceof Nl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof _a?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Un&&(r.code===At.GuardRejected||r.code===At.NoDataFromResolver)?this.restoreHistory(i):r instanceof va?this.restoreHistory(i,!0):r instanceof fn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof jn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=k(k({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=k(k({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=na(e)))(s||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(fa||{});function Pb(t,e){t.events.pipe(Nt(n=>n instanceof fn||n instanceof Un||n instanceof va||n instanceof Er),ae(n=>n instanceof fn||n instanceof Er?fa.COMPLETE:(n instanceof Un?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?fa.REDIRECTING:fa.FAILED),Nt(n=>n!==fa.REDIRECTING),Sn(1)).subscribe(()=>{e()})}function aF(t){throw t}var cF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(gl),this.stateManager=P(xb),this.options=P(Ma,{optional:!0})||{},this.pendingTasks=P(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(am),this.urlSerializer=P(Ta),this.location=P(bs),this.urlHandlingStrategy=P(om),this._events=new He,this.errorHandler=this.options.errorHandler||aF,this.navigated=!1,this.routeReuseStrategy=P(iF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Ca,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(jl,{optional:!0}),this.eventsSubscription=new xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Un&&i.code!==At.Redirect&&i.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fn)this.navigated=!0;else if(i instanceof ks){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=k({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||rF(s.source)},a);this.scheduleNavigation(u,ga,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}dF(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=k({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(im),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=fb(v)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return pb(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=hi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ga,null,i)}navigate(r,i={skipLocationChange:!1}){return lF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=k({},cF):i===!1?s=k({},uF):s=i,hi(r))return WC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return WC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,l=v});let p=this.pendingTasks.add();return Pb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new B(4008,!1)}function dF(t){return!(t instanceof _a)&&!(t instanceof ks)}var Ob=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new He,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(hi(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:xD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ne(pt),ne(Dr),Bp("tabindex"),ne(oi),ne(_r),ne(Vn))},e.\u0275dir=yt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ht("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&hl("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Cs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Cs],replaceUrl:[2,"replaceUrl","replaceUrl",Cs],routerLink:"routerLink"},standalone:!0,features:[og,yr]});let t=e;return t})();var Ul=class{};var hF=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Nt(r=>r instanceof fn),Qr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ll(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Se(s).pipe(Qi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=W(null);let o=s.pipe(ke(a=>a===null?W(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Se([o,a]).pipe(Qi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(z(pt),z(vl),z(bt),z(Ul),z(sm))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kb=new U(""),fF=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof fn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Er&&r.code===Ml.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof xl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){zD()},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function Fb(t,...e){return cn([{provide:Ca,multi:!0,useValue:t},[],{provide:Dr,useFactory:Lb,deps:[pt]},{provide:yl,multi:!0,useFactory:Vb},e.map(n=>n.\u0275providers)])}function Lb(t){return t.routerState.root}function Na(t,e){return{\u0275kind:t,\u0275providers:e}}function Vb(){let t=P(Ye);return e=>{let n=t.get(ui);if(e!==n.components[0])return;let r=t.get(pt),i=t.get(Ub);t.get(cm)===1&&r.initialNavigation(),t.get(jb,null,te.Optional)?.setUpPreloading(),t.get(kb,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ub=new U("",{factory:()=>new He}),cm=new U("",{providedIn:"root",factory:()=>1});function pF(){return Na(2,[{provide:cm,useValue:0},{provide:ml,multi:!0,deps:[Ye],useFactory:e=>{let n=e.get(PC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(pt),s=e.get(Ub);Pb(i,()=>{r(!0)}),e.get(am).afterPreactivation=()=>(r(!0),s.closed?W(void 0):s),i.initialNavigation()}))}}])}function gF(){return Na(3,[{provide:ml,multi:!0,useFactory:()=>{let e=P(pt);return()=>{e.setUpLocationChangeListener()}}},{provide:cm,useValue:2}])}var jb=new U("");function mF(t){return Na(0,[{provide:jb,useExisting:hF},{provide:Ul,useExisting:t}])}function yF(){return Na(8,[ZC,{provide:jl,useExisting:ZC}])}function vF(t){let e=[{provide:Mb,useValue:eF},{provide:Nb,useValue:k({skipNextTransition:!!t?.skipInitialTransition},t)}];return Na(9,e)}var tb=new U("ROUTER_FORROOT_GUARD"),_F=[bs,{provide:Ta,useClass:Ps},pt,Aa,{provide:Dr,useFactory:Lb,deps:[pt]},sm,[]],$l=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[_F,[],{provide:Ca,multi:!0,useValue:r},{provide:tb,useFactory:DF,deps:[[pt,new dt,new wE]]},{provide:Ma,useValue:i||{}},i?.useHash?wF():EF(),IF(),i?.preloadingStrategy?mF(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?CF(i):[],i?.bindToComponentInputs?yF().\u0275providers:[],i?.enableViewTransitions?vF().\u0275providers:[],bF()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ca,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(z(tb,8))},e.\u0275mod=xn({type:e}),e.\u0275inj=Nn({});let t=e;return t})();function IF(){return{provide:kb,useFactory:()=>{let t=P(LC),e=P(Ie),n=P(Ma),r=P(am),i=P(Ta);return n.scrollOffset&&t.setOffset(n.scrollOffset),new fF(i,r,t,e,n)}}}function wF(){return{provide:Vn,useClass:kC}}function EF(){return{provide:Vn,useClass:mg}}function DF(t){return"guarded"}function CF(t){return[t.initialNavigation==="disabled"?gF().\u0275providers:[],t.initialNavigation==="enabledBlocking"?pF().\u0275providers:[]]}var nb=new U("");function bF(){return[{provide:nb,useFactory:Vb},{provide:yl,multi:!0,useExisting:nb}]}var $b=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($b(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new lm;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},lm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},SF=function(t){let e=$b(t);return Hb.encodeByteArray(e,!0)},xa=function(t){return SF(t).replace(/\./g,"")},hm=function(t){try{return Hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function AF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RF=()=>AF().__FIREBASE_DEFAULTS__,MF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&hm(t[1]);return e&&JSON.parse(e)},zl=()=>{try{return RF()||MF()||NF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fm=t=>{var e,n;return(n=(e=zl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qb=t=>{let e=fm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pm=()=>{var t;return(t=zl())===null||t===void 0?void 0:t.config},gm=t=>{var e;return(e=zl())===null||e===void 0?void 0:e[`_${t}`]};var ql=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function zb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xa(JSON.stringify(n)),xa(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function xF(){var t;let e=(t=zl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qb(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Yb(){return!xF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mm(){try{return typeof indexedDB=="object"}catch{return!1}}function Zb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var PF="FirebaseError",Rt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bn.prototype.create)}},Bn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?OF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rt(i,a,r)}};function OF(t,e){return t.replace(kF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kF=/\{\$([^}]+)}/g;function Jb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Bb(s)&&Bb(o)){if(!fi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Bb(t){return t!==null&&typeof t=="object"}function Pa(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xb(t,e){let n=new dm(t,e);return n.subscribe.bind(n)}var dm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=um),i.error===void 0&&(i.error=um),i.complete===void 0&&(i.complete=um);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function um(){}var z9=4*60*60*1e3;function wt(t){return t&&t._delegate?t._delegate:t}var jt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var pi="[DEFAULT]";var ym=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ql;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VF(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LF(t){return t===pi?void 0:t}function VF(t){return t.instantiationMode==="EAGER"}var Gl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ym(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var UF=[],de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{}),jF={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},BF=de.INFO,$F={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},HF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=$F[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},br=class{constructor(e){this.name=e,this._logLevel=BF,this._logHandler=HF,this._userLogHandler=null,UF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var qF=(t,e)=>e.some(n=>t instanceof n),eT,tT;function zF(){return eT||(eT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GF(){return tT||(tT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nT=new WeakMap,_m=new WeakMap,rT=new WeakMap,vm=new WeakMap,wm=new WeakMap;function WF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(pn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nT.set(n,t)}).catch(()=>{}),wm.set(e,t),e}function KF(t){if(_m.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_m.set(t,e)}var Im={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _m.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iT(t){Im=t(Im)}function QF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Wl(this),e,...n);return rT.set(r,e.sort?e.sort():[e]),pn(r)}:GF().includes(t)?function(...e){return t.apply(Wl(this),e),pn(nT.get(this))}:function(...e){return pn(t.apply(Wl(this),e))}}function YF(t){return typeof t=="function"?QF(t):(t instanceof IDBTransaction&&KF(t),qF(t,zF())?new Proxy(t,Im):t)}function pn(t){if(t instanceof IDBRequest)return WF(t);if(vm.has(t))return vm.get(t);let e=YF(t);return e!==t&&(vm.set(t,e),wm.set(e,t)),e}var Wl=t=>wm.get(t);function oT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=pn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(pn(o.result),u.oldVersion,u.newVersion,pn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZF=["get","getKey","getAll","getAllKeys","count"],JF=["put","add","delete","clear"],Em=new Map;function sT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZF.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Em.set(e,s),s}iT(t=>oe(k({},t),{get:(e,n,r)=>sT(e,n)||t.get(e,n,r),has:(e,n)=>!!sT(e,n)||t.has(e,n)}));var Cm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function XF(t){let e=t.getComponent();return e?.type==="VERSION"}var bm="@firebase/app",aT="0.10.10";var $n=new br("@firebase/app"),eL="@firebase/app-compat",tL="@firebase/analytics-compat",nL="@firebase/analytics",rL="@firebase/app-check-compat",iL="@firebase/app-check",sL="@firebase/auth",oL="@firebase/auth-compat",aL="@firebase/database",cL="@firebase/database-compat",uL="@firebase/functions",lL="@firebase/functions-compat",dL="@firebase/installations",hL="@firebase/installations-compat",fL="@firebase/messaging",pL="@firebase/messaging-compat",gL="@firebase/performance",mL="@firebase/performance-compat",yL="@firebase/remote-config",vL="@firebase/remote-config-compat",_L="@firebase/storage",IL="@firebase/storage-compat",wL="@firebase/firestore",EL="@firebase/vertexai-preview",DL="@firebase/firestore-compat",CL="firebase",bL="10.13.1";var Tm="[DEFAULT]",TL={[bm]:"fire-core",[eL]:"fire-core-compat",[nL]:"fire-analytics",[tL]:"fire-analytics-compat",[iL]:"fire-app-check",[rL]:"fire-app-check-compat",[sL]:"fire-auth",[oL]:"fire-auth-compat",[aL]:"fire-rtdb",[cL]:"fire-rtdb-compat",[uL]:"fire-fn",[lL]:"fire-fn-compat",[dL]:"fire-iid",[hL]:"fire-iid-compat",[fL]:"fire-fcm",[pL]:"fire-fcm-compat",[gL]:"fire-perf",[mL]:"fire-perf-compat",[yL]:"fire-rc",[vL]:"fire-rc-compat",[_L]:"fire-gcs",[IL]:"fire-gcs-compat",[wL]:"fire-fst",[DL]:"fire-fst-compat",[EL]:"fire-vertex","fire-js":"fire-js",[CL]:"fire-js-all"};var Oa=new Map,SL=new Map,Sm=new Map;function cT(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){let e=t.name;if(Sm.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;Sm.set(e,t);for(let n of Oa.values())cT(n,t);for(let n of SL.values())cT(n,t);return!0}function Fa(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}var AL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new Bn("app","Firebase",AL);var Am=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}};var Ar=bL;function Nm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Tm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Tr.create("bad-app-name",{appName:String(i)});if(n||(n=pm()),!n)throw Tr.create("no-options");let s=Oa.get(i);if(s){if(fi(n,s.options)&&fi(r,s.config))return s;throw Tr.create("duplicate-app",{appName:i})}let o=new Gl(i);for(let u of Sm.values())o.addComponent(u);let a=new Am(n,r,o);return Oa.set(i,a),a}function Vs(t=Tm){let e=Oa.get(t);if(!e&&t===Tm&&pm())return Nm();if(!e)throw Tr.create("no-app",{appName:t});return e}function Kl(){return Array.from(Oa.values())}function $e(t,e,n){var r;let i=(r=TL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(a.join(" "));return}Sr(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RL="firebase-heartbeat-database",ML=1,ka="firebase-heartbeat-store",Dm=null;function hT(){return Dm||(Dm=oT(RL,ML,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ka)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Dm}function NL(t){return w(this,null,function*(){try{let n=(yield hT()).transaction(ka),r=yield n.objectStore(ka).get(fT(t));return yield n.done,r}catch(e){if(e instanceof Rt)$n.warn(e.message);else{let n=Tr.create("idb-get",{originalErrorMessage:e?.message});$n.warn(n.message)}}})}function uT(t,e){return w(this,null,function*(){try{let r=(yield hT()).transaction(ka,"readwrite");yield r.objectStore(ka).put(e,fT(t)),yield r.done}catch(n){if(n instanceof Rt)$n.warn(n.message);else{let r=Tr.create("idb-set",{originalErrorMessage:n?.message});$n.warn(r.message)}}})}function fT(t){return`${t.name}!${t.options.appId}`}var xL=1024,PL=30*24*60*60*1e3,Rm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Mm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=PL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$n.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=lT(),{heartbeatsToSend:r,unsentEntries:i}=OL(this._heartbeatsCache.heartbeats),s=xa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $n.warn(n),""}})}};function lT(){return new Date().toISOString().substring(0,10)}function OL(t,e=xL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Mm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return mm()?Zb().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield NL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return uT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function dT(t){return xa(JSON.stringify({version:2,heartbeats:t})).length}function kL(t){Sr(new jt("platform-logger",e=>new Cm(e),"PRIVATE")),Sr(new jt("heartbeat",e=>new Rm(e),"PRIVATE")),$e(bm,aT,t),$e(bm,aT,"esm2017"),$e("fire-js","")}kL("");var FL="firebase",LL="10.13.1";$e(FL,LL,"app");var mi=new Mn("ANGULARFIRE2_VERSION");function Yl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var La=(t,e)=>{let n=e?[e]:Kl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},js=class{constructor(){return La(VL)}},VL="app-check";function Us(){}var Ql=class{zone;delegate;constructor(e,n=mf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},xm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us)),n.pipe(Be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bs=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=n.run(()=>new Ql(Zone.current,gf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(Ie))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function UL(t){return Zl().ngZone.runOutsideAngular(()=>t())}function gi(t){return Zl().ngZone.run(()=>t())}function jL(t){return BL(Zl())(t)}function BL(t){return function(n){return n=n.lift(new xm(t.ngZone)),n.pipe(or(t.outsideAngular),sr(t.insideAngular))}}var $L=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gi(()=>t.apply(void 0,r))},Yt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=gi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Us,{},Us,Us))),r[s]=$L(r[s],n));let i=UL(()=>t.apply(this,r));if(!e)if(i instanceof fe){let s=Zl();return i.pipe(or(s.outsideAngular),sr(s.insideAngular))}else return gi(()=>i);return i instanceof fe?i.pipe(jL):i instanceof Promise?gi(()=>new Promise((s,o)=>i.then(a=>gi(()=>s(a)),a=>gi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:gi(()=>i)};var qn=class{constructor(e){return e}},yi=class{constructor(){return Kl()}};function HL(t){return t&&t.length===1?t[0]:new qn(Vs())}var Pm=new U("angularfire2._apps"),qL={provide:qn,useFactory:HL,deps:[[new dt,Pm]]},zL={provide:yi,deps:[[new dt,Pm]]};function GL(t){return(e,n)=>{let r=n.get(ln);$e("angularfire",mi.full,"core"),$e("angularfire",mi.full,"app"),$e("angular",yC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new qn(i)}}function pT(t,...e){return cn([qL,zL,{provide:Pm,useFactory:GL(t),multi:!0,deps:[Ie,Ye,Bs,...e]}])}var gT=Yt(Nm,!0);function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var NT=MT,xT=new Bn("auth","Firebase",MT());var rd=new br("@firebase/auth");function WL(t,...e){rd.logLevel<=de.WARN&&rd.warn(`Auth (${Ar}): ${t}`,...e)}function Xl(t,...e){rd.logLevel<=de.ERROR&&rd.error(`Auth (${Ar}): ${t}`,...e)}function Mr(t,...e){throw Xm(t,...e)}function _i(t,...e){return Xm(t,...e)}function PT(t,e,n){let r=Object.assign(Object.assign({},NT()),{[e]:n});return new Bn("auth","Firebase",r).create(e,{appName:t.name})}function vi(t){return PT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xT.create(t,...e)}function Q(t,e,...n){if(!t)throw Xm(e,...n)}function zn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Xl(e),new Error(e)}function Nr(t,e){t||zn(e)}function Lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KL(){return mT()==="http:"||mT()==="https:"}function mT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function QL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KL()||Wb()||"connection"in navigator)?navigator.onLine:!0}function YL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ii=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=Gb()||Kb()}get(){return QL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ey(t,e){Nr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var id=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var JL=new Ii(3e4,6e4);function ty(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Hs(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return OT(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Pa(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),id.fetch()(kT(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function OT(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},ZL),e);try{let i=new Vm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Jl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Jl(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PT(t,h,l);Mr(t,h)}}catch(i){if(i instanceof Rt)throw i;Mr(t,"network-request-failed",{message:String(i)})}})}function XL(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Hs(t,e,n,r,i);return"mfaPendingCredential"in l&&Mr(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function kT(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ey(t.config,i):`${t.config.apiScheme}://${i}`}var Vm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),JL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Jl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_i(t,e,r);return i.customData._tokenResponse=n,i}function eV(t,e){return w(this,null,function*(){return Hs(t,"POST","/v1/accounts:delete",e)})}function FT(t,e){return w(this,null,function*(){return Hs(t,"POST","/v1/accounts:lookup",e)})}function Va(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ny(t,e=!1){return w(this,null,function*(){let n=wt(t),r=yield n.getIdToken(e),i=ry(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Va(Om(i.auth_time)),issuedAtTime:Va(Om(i.iat)),expirationTime:Va(Om(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Om(t){return Number(t)*1e3}function ry(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xl("JWT malformed, contained fewer than 3 sections"),null;try{let i=hm(n);return i?JSON.parse(i):(Xl("Failed to decode base64 JWT payload"),null)}catch(i){return Xl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yT(t){let e=ry(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ja(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Rt&&tV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function tV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Um=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ba=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sd(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ja(t,FT(n,{idToken:r}));Q(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?LT(s.providerUserInfo):[],a=nV(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ba(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function iy(t){return w(this,null,function*(){let e=wt(t);yield sd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function nV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LT(t){return t.map(e=>{var{providerId:n}=e,r=yf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function rV(t,e){return w(this,null,function*(){let n=yield OT(t,{},()=>w(this,null,function*(){let r=Pa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=kT(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",id.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function iV(t,e){return w(this,null,function*(){return Hs(t,"POST","/v2/accounts:revokeToken",ty(t,e))})}var Ua=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let n=yT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield rV(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return zn("not implemented")}};function Rr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var $s=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=yf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Um(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ba(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield ja(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ny(this,e)}reload(){return iy(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield sd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Hn(this.auth.app))return Promise.reject(vi(this.auth));let e=yield this.getIdToken();return yield ja(this,eV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:q,emailVerified:se,isAnonymous:Me,providerData:Z,stsTokenManager:D}=n;Q(q&&D,e,"internal-error");let y=Ua.fromJSON(this.name,D);Q(typeof q=="string",e,"internal-error"),Rr(p,e.name),Rr(m,e.name),Q(typeof se=="boolean",e,"internal-error"),Q(typeof Me=="boolean",e,"internal-error"),Rr(v,e.name),Rr(S,e.name),Rr(N,e.name),Rr(M,e.name),Rr(F,e.name),Rr($,e.name);let _=new t({uid:q,auth:e,email:m,emailVerified:se,displayName:p,isAnonymous:Me,photoURL:S,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:F,lastLoginAt:$});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(E=>Object.assign({},E))),M&&(_._redirectEventId=M),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new Ua;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];Q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?LT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ua;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ba(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var vT=new Map;function Gn(t){Nr(t instanceof Function,"Expected a class definition");let e=vT.get(t);return e?(Nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vT.set(t,e),e)}var sV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),jm=sV;function ed(t,e,n){return`firebase:${t}:${e}:${n}`}var od=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ed(this.userKey,i.apiKey,s),this.fullPersistenceKey=ed("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Gn(jm),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Gn(jm),o=ed(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=$s._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function _T(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HT(e))return"Blackberry";if(qT(e))return"Webos";if(UT(e))return"Safari";if((e.includes("chrome/")||jT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function VT(t=ze()){return/firefox\//i.test(t)}function UT(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jT(t=ze()){return/crios\//i.test(t)}function BT(t=ze()){return/iemobile/i.test(t)}function $T(t=ze()){return/android/i.test(t)}function HT(t=ze()){return/blackberry/i.test(t)}function qT(t=ze()){return/webos/i.test(t)}function sy(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oV(t=ze()){var e;return sy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aV(){return Qb()&&document.documentMode===10}function zT(t=ze()){return sy(t)||$T(t)||qT(t)||HT(t)||/windows phone/i.test(t)||BT(t)}function GT(t,e=[]){let n;switch(t){case"Browser":n=_T(ze());break;case"Worker":n=`${_T(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ar}/${r}`}var Bm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function cV(n){return w(this,arguments,function*(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",ty(t,e))})}var uV=6,$m=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ad(this),this.idTokenSubscription=new ad(this),this.beforeStateQueue=new Bm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield od.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield FT(this,{idToken:e}),r=yield $s._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Hn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield sd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=YL()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Hn(this.app))return Promise.reject(vi(this));let n=e?wt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Hn(this.app)?Promise.reject(vi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Hn(this.app)?Promise.reject(vi(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Gn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield cV(this),n=new $m(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield iV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Gn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=yield od.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&WL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function oy(t){return wt(t)}var ad=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xb(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ay={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lV(t){ay=t}function dV(t){return ay.loadJS(t)}function hV(){return ay.gapiScript}function WT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function cy(t,e){let n=Fa(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(fi(s,e??{}))return i;Mr(i,"already-initialized")}return n.initialize({options:e})}function fV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function uy(t,e,n){let r=oy(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=KT(e),{host:o,port:a}=pV(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gV()}function KT(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pV(t){let e=KT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:IT(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:IT(o)}}}function IT(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function gV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var cd=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}};function km(t,e){return w(this,null,function*(){return XL(t,"POST","/v1/accounts:signInWithIdp",ty(t,e))})}var ud=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var qm=class extends ud{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var $a=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield $s._fromIdTokenResponse(e,r,i),o=wT(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=wT(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function wT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var zm=class t extends Rt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function QT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zm._fromErrorAndOperation(t,s,e,r):s})}function mV(t,e,n=!1){return w(this,null,function*(){let r=yield ja(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return $a._forOperation(t,"link",r)})}function yV(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(Hn(r.app))return Promise.reject(vi(r));let i="reauthenticate";try{let s=yield ja(t,QT(r,i,e,t),n);Q(s.idToken,r,"internal-error");let o=ry(s.idToken);Q(o,r,"internal-error");let{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),$a._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mr(r,"user-mismatch"),s}})}function vV(t,e,n=!1){return w(this,null,function*(){if(Hn(t.app))return Promise.reject(vi(t));let r="signIn",i=yield QT(t,r,e),s=yield $a._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ly(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function dy(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}var ld="__sak";var dd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var _V=1e3,IV=10,wV=(()=>{class t extends dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);aV()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,IV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},_V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield nr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield nr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield nr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),YT=wV;var EV=(()=>{class t extends dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),hy=EV;function DV(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var CV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield DV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ZT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Gm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=ZT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function gn(){return window}function bV(t){gn().location.href=t}function JT(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}function TV(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function SV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AV(){return JT()?self:null}var XT="firebaseLocalStorageDb",RV=1,hd="firebaseLocalStorage",e0="fbase_key",wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function pd(t,e){return t.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function MV(){let t=indexedDB.deleteDatabase(XT);return new wi(t).toPromise()}function Wm(){let t=indexedDB.open(XT,RV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(hd,{keyPath:e0})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(hd)?e(r):(r.close(),yield MV(),e(yield Wm()))}))})}function ET(t,e,n){return w(this,null,function*(){let r=pd(t,!0).put({[e0]:e,value:n});return new wi(r).toPromise()})}function NV(t,e){return w(this,null,function*(){let n=pd(t,!1).get(e),r=yield new wi(n).toPromise();return r===void 0?null:r.value})}function DT(t,e){let n=pd(t,!0).delete(e);return new wi(n).toPromise()}var xV=800,PV=3,OV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Wm(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>PV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return JT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=CV._getInstance(AV()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield TV(),!this.activeServiceWorker)return;this.sender=new Gm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||SV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Wm();return yield ET(n,ld,"1"),yield DT(n,ld),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>ET(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>NV(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>DT(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=pd(s,!1).getAll();return new wi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),t0=OV;var jW=WT("rcb"),BW=new Ii(3e4,6e4);function kV(t,e){return e?Gn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ha=class extends cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return km(e,this._buildIdpRequest())}_linkToIdToken(e,n){return km(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return km(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function FV(t){return vV(t.auth,new Ha(t),t.bypassAuthState)}function LV(t){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),yV(n,new Ha(t),t.bypassAuthState)}function VV(t){return w(this,null,function*(){let{auth:e,user:n}=t;return Q(n,e,"internal-error"),mV(n,new Ha(t),t.bypassAuthState)})}var Km=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FV;case"linkViaPopup":case"linkViaRedirect":return VV;case"reauthViaPopup":case"reauthViaRedirect":return LV;default:Mr(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $W=new Ii(2e3,1e4);var UV="pendingRedirect",td=new Map,Qm=class t extends Km{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=td.get(this.auth._key());if(!e){try{let r=(yield jV(this.resolver,this.auth))?yield nr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return nr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,nr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function jV(t,e){return w(this,null,function*(){let n=HV(e),r=$V(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function BV(t,e){td.set(t._key(),e)}function $V(t){return Gn(t._redirectPersistence)}function HV(t){return ed(UV,t.config.apiKey,t.name)}function qV(t,e,n=!1){return w(this,null,function*(){if(Hn(t.app))return Promise.reject(vi(t));let r=oy(t),i=kV(r,e),o=yield new Qm(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var zV=10*60*1e3,Ym=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!n0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zV&&this.cachedEventUids.clear(),this.cachedEventUids.has(CT(e))}saveEventToCache(e){this.cachedEventUids.add(CT(e)),this.lastProcessedEventTime=Date.now()}};function CT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function GV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n0(t);default:return!1}}function WV(n){return w(this,arguments,function*(t,e={}){return Hs(t,"GET","/v1/projects",e)})}var KV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QV=/^https?/;function YV(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield WV(t);for(let n of e)try{if(ZV(n))return}catch{}Mr(t,"unauthorized-domain")})}function ZV(t){let e=Lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QV.test(n))return!1;if(KV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var JV=new Ii(3e4,6e4);function bT(){let t=gn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XV(t){return new Promise((e,n)=>{var r,i,s;function o(){bT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bT(),n(_i(t,"network-request-failed"))},timeout:JV.get()})}if(!((i=(r=gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gn().gapi)===null||s===void 0)&&s.load)o();else{let a=WT("iframefcb");return gn()[a]=()=>{gapi.load?o():n(_i(t,"network-request-failed"))},dV(`${hV()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw nd=null,e})}var nd=null;function eU(t){return nd=nd||XV(t),nd}var tU=new Ii(5e3,15e3),nU="__/auth/iframe",rU="emulator/auth/iframe",iU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oU(t){let e=t.config;Q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ey(e,rU):`https://${t.config.authDomain}/${nU}`,r={apiKey:e.apiKey,appName:t.name,v:Ar},i=sU.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Pa(r).slice(1)}`}function aU(t){return w(this,null,function*(){let e=yield eU(t),n=gn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:oU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iU,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=_i(t,"network-request-failed"),a=gn().setTimeout(()=>{s(o)},tU.get());function u(){gn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var cU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uU=500,lU=600,dU="_blank",hU="http://localhost",fd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function fU(t,e,n,r=uU,i=lU){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},cU),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=jT(l)?dU:n),VT(l)&&(e=e||hU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,S])=>`${m}${v}=${S},`,"");if(oV(l)&&a!=="_self")return pU(e||"",a),new fd(null);let p=window.open(e||"",a,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new fd(p)}function pU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var gU="__/auth/handler",mU="emulator/auth/handler",yU=encodeURIComponent("fac");function TT(t,e,n,r,i,s){return w(this,null,function*(){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ar,eventId:i};if(e instanceof ud){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Jb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof qm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${yU}=${encodeURIComponent(u)}`:"";return`${vU(t)}?${Pa(a).slice(1)}${l}`})}function vU({config:t}){return t.emulator?ey(t,mU):`https://${t.authDomain}/${gU}`}var Fm="webStorageSupport",Zm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hy,this._completeRedirectFn=qV,this._overrideRedirectResult=BV}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Nr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield TT(e,n,r,Lm(),i);return fU(e,o,ZT())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield TT(e,n,r,Lm(),i);return bV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Nr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield aU(e),r=new Ym(e);return n.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Fm];o!==void 0&&n(!!o),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zT()||UT()||sy()}},r0=Zm;var ST="@firebase/auth",AT="1.7.8";var Jm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function _U(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IU(t){Sr(new jt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GT(t)},l=new Hm(r,i,s,u);return fV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new jt("auth-internal",e=>{let n=oy(e.getProvider("auth").getImmediate());return(r=>new Jm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(ST,AT,_U(t)),$e(ST,AT,"esm2017")}var wU=5*60,EU=gm("authIdTokenMaxAge")||wU,RT=null,DU=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EU)return;let i=n?.token;RT!==i&&(RT=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function fy(t=Vs()){let e=Fa(t,"auth");if(e.isInitialized())return e.getImmediate();let n=cy(t,{popupRedirectResolver:r0,persistence:[t0,YT,hy]}),r=gm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=DU(s.toString());dy(n,o,()=>o(n.currentUser)),ly(n,a=>o(a))}}let i=fm("auth");return i&&uy(n,`http://${i}`),n}function CU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=_i("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",CU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IU("Browser");var i0="auth",qa=class{constructor(e){return e}},za=class{constructor(){return La(i0)}};var py=new U("angularfire2.auth-instances");function vj(t,e){let n=Yl(i0,t,e);return n&&new qa(n)}function _j(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qa(r)}}var Ij={provide:za,deps:[[new dt,py]]},wj={provide:qa,useFactory:vj,deps:[[new dt,py],qn]};function s0(t,...e){return $e("angularfire",mi.full,"auth"),cn([wj,Ij,{provide:py,useFactory:_j(t),multi:!0,deps:[Ie,Ye,Bs,yi,[new dt,js],...e]}])}var o0=Yt(fy,!0);var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c0={};var xr,gy;(function(){var t;function e(D,y){function _(){}_.prototype=y.prototype,D.D=y.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,C,T){for(var I=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)I[Dn-2]=arguments[Dn];return y.prototype[C].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(C=0;16>C;++C)E[C]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=D.g[0],_=D.g[1],C=D.g[2];var T=D.g[3],I=y+(T^_&(C^T))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[2]+606105819&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[3]+3250441966&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[6]+2821735955&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[7]+4249261313&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[10]+4294925233&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[11]+2304563134&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[14]+2792965006&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[15]+1236535329&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(C^T&(_^C))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[11]+643717713&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[0]+3921069994&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[15]+3634488961&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[4]+3889429448&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[3]+4107603335&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[8]+1163531501&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[7]+1735328473&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[12]+2368359562&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(_^C^T)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[11]+1839030562&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[14]+4259657740&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[7]+4139469664&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[10]+3200236656&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[3]+3572445317&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[6]+76029189&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[15]+530742520&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[2]+3299628645&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(C^(_|~T))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[14]+2878612391&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[5]+4237533241&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[10]+4293915773&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[1]+2240044497&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[6]+2734768916&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[13]+1309151649&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[2]+718787259&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var _=y-this.blockSize,E=this.B,C=this.h,T=0;T<y;){if(C==0)for(;T<=_;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<y;)if(E[C++]=D.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<y;)if(E[C++]=D[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var _=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=_&255,_/=256;for(this.u(D),D=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)D[_++]=this.g[y]>>>E&255;return D};function s(D,y){var _=a;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=y(D)}function o(D,y){this.h=y;for(var _=[],E=!0,C=D.length-1;0<=C;C--){var T=D[C]|0;E&&T==y||(_[C]=T,E=!1)}this.g=_}var a={};function u(D){return-128<=D&&128>D?s(D,function(y){return new o([y|0],0>y?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var y=[],_=1,E=0;D>=_;E++)y[E]=D/_|0,_*=4294967296;return new o(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return M(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,C=0;C<D.length;C+=8){var T=Math.min(8,D.length-C),I=parseInt(D.substring(C,C+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-M(this).m();for(var D=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(N(this))return"-"+M(this).toString(D);for(var y=l(Math.pow(D,6)),_=this,E="";;){var C=se(_,y).g;_=F(_,C.j(y));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=C,S(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=F(this,D),N(D)?-1:S(D)?0:1};function M(D){for(var y=D.g.length,_=[],E=0;E<y;E++)_[E]=~D.g[E];return new o(_,~D.h).add(m)}t.abs=function(){return N(this)?M(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0,C=0;C<=y;C++){var T=E+(this.i(C)&65535)+(D.i(C)&65535),I=(T>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=I>>>16,T&=65535,I&=65535,_[C]=I<<16|T}return new o(_,_[_.length-1]&-2147483648?-1:0)};function F(D,y){return D.add(M(y))}t.j=function(D){if(S(this)||S(D))return p;if(N(this))return N(D)?M(this).j(M(D)):M(M(this).j(D));if(N(D))return M(this.j(M(D)));if(0>this.l(v)&&0>D.l(v))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var T=this.i(E)>>>16,I=this.i(E)&65535,Dn=D.i(C)>>>16,Io=D.i(C)&65535;_[2*E+2*C]+=I*Io,$(_,2*E+2*C),_[2*E+2*C+1]+=T*Io,$(_,2*E+2*C+1),_[2*E+2*C+1]+=I*Dn,$(_,2*E+2*C+1),_[2*E+2*C+2]+=T*Dn,$(_,2*E+2*C+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function $(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function q(D,y){this.g=D,this.h=y}function se(D,y){if(S(y))throw Error("division by zero");if(S(D))return new q(p,p);if(N(D))return y=se(M(D),y),new q(M(y.g),M(y.h));if(N(y))return y=se(D,M(y)),new q(M(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(D);)_=Me(_),E=Me(E);var C=Z(_,1),T=Z(E,1);for(E=Z(E,2),_=Z(_,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(C=C.add(_),T=I),E=Z(E,1),_=Z(_,1)}return y=F(D,C.j(y)),new q(C,y)}for(C=p;0<=D.l(y);){for(_=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(y);N(I)||0<I.l(D);)_-=E,T=l(_),I=T.j(y);S(T)&&(T=m),C=C.add(T),D=F(D,I)}return new q(C,D)}t.A=function(D){return se(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&D.i(E);return new o(_,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|D.i(E);return new o(_,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^D.i(E);return new o(_,this.h^D.h)};function Me(D){for(var y=D.g.length+1,_=[],E=0;E<y;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(_,D.h)}function Z(D,y){var _=y>>5;y%=32;for(var E=D.g.length-_,C=[],T=0;T<E;T++)C[T]=0<y?D.i(T+_)>>>y|D.i(T+_+1)<<32-y:D.i(T+_);return new o(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gy=c0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,xr=c0.Integer=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};var my,yy,qs,vy,Ga,md,_y,Iy,wy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[b].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=g[O]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function se(c){return se[" "](c),c}se[" "]=function(){};var Me=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Th;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Dn{constructor(){this.h=this.g=null}add(d,f){let g=Io.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Io=new F(()=>new BA,c=>c.reset());class BA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let wo,Eo=!1,Th=new Dn,j_=()=>{let c=a.Promise.resolve(void 0);wo=()=>{c.then($A)}};var $A=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=Io;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Eo=!1};function Jn(){this.s=this.s,this.C=this.C}Jn.prototype.s=!1,Jn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var HA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Do(c,d){if(Xe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Me){e:{try{se(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:qA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Do.aa.h.call(this)}}S(Do,Xe);var qA={2:"touch",3:"pen",4:"mouse"};Do.prototype.h=function(){Do.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Co="closure_listenable_"+(1e6*Math.random()|0),zA=0;function GA(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++zA,this.da=this.fa=!1}function Cc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bc(c){this.src=c,this.g={},this.h=0}bc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Ah(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new GA(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Sh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Cc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ah(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Rh="closure_lm_"+(1e6*Math.random()|0),Mh={};function B_(c,d,f,g,b){if(g&&g.once)return H_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)B_(c,d[A],f,g,b);return null}return f=Oh(f),c&&c[Co]?c.K(d,f,l(g)?!!g.capture:!!g,b):$_(c,d,f,!1,g,b)}function $_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ee=xh(c);if(Ee||(c[Rh]=Ee=new bc(c)),f=Ee.add(d,f,g,O,A),f.proxy)return f;if(g=WA(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)HA||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(z_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function WA(){function c(f){return d.call(c.src,c.listener,f)}let d=KA;return c}function H_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)H_(c,d[A],f,g,b);return null}return f=Oh(f),c&&c[Co]?c.L(d,f,l(g)?!!g.capture:!!g,b):$_(c,d,f,!0,g,b)}function q_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)q_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Oh(f),c&&c[Co]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Ah(A,f,g,b),-1<f&&(Cc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=xh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ah(d,f,g,b)),(f=-1<c?d[c]:null)&&Nh(f))}function Nh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Co])Sh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(z_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=xh(d))?(Sh(f,c),f.h==0&&(f.src=null,d[Rh]=null)):Cc(c)}}}function z_(c){return c in Mh?Mh[c]:Mh[c]="on"+c}function KA(c,d){if(c.da)c=!0;else{d=new Do(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Nh(c),c=f.call(g,d)}return c}function xh(c){return c=c[Rh],c instanceof bc?c:null}var Ph="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oh(c){return typeof c=="function"?c:(c[Ph]||(c[Ph]=function(d){return c.handleEvent(d)}),c[Ph])}function et(){Jn.call(this),this.i=new bc(this),this.M=this,this.F=null}S(et,Jn),et.prototype[Co]=!0,et.prototype.removeEventListener=function(c,d,f,g){q_(this,c,d,f,g)};function ot(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Xe(d,c);else if(d instanceof Xe)d.target=d.target||c;else{var b=d;d=new Xe(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=Tc(O,g,!0,d)&&b}if(O=d.g=c,b=Tc(O,g,!0,d)&&b,b=Tc(O,g,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=Tc(O,g,!1,d)&&b}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Cc(f[g]);delete c.g[d],c.h--}}this.F=null},et.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},et.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Tc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,We=O.ha||O.src;O.fa&&Sh(c.i,O),b=Ee.call(We,g)!==!1&&b}}return b&&!g.defaultPrevented}function G_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function W_(c){c.g=G_(()=>{c.g=null,c.i&&(c.i=!1,W_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class QA extends Jn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:W_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bo(c){Jn.call(this),this.h=c,this.g={}}S(bo,Jn);var K_=[];function Q_(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&Nh(d)},c),c.g={}}bo.prototype.N=function(){bo.aa.N.call(this),Q_(this)},bo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kh=a.JSON.stringify,YA=a.JSON.parse,ZA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Fh(){}Fh.prototype.h=null;function Y_(c){return c.h||(c.h=c.i())}function Z_(){}var To={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lh(){Xe.call(this,"d")}S(Lh,Xe);function Vh(){Xe.call(this,"c")}S(Vh,Xe);var Br={},J_=null;function Sc(){return J_=J_||new et}Br.La="serverreachability";function X_(c){Xe.call(this,Br.La,c)}S(X_,Xe);function So(c){let d=Sc();ot(d,new X_(d))}Br.STAT_EVENT="statevent";function eI(c,d){Xe.call(this,Br.STAT_EVENT,c),this.stat=d}S(eI,Xe);function at(c){let d=Sc();ot(d,new eI(d,c))}Br.Ma="timingevent";function tI(c,d){Xe.call(this,Br.Ma,c),this.size=d}S(tI,Xe);function Ao(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function JA(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),We=0;We<Ee.length;We++){var ye=Ee[We].split("=");if(1<ye.length){var tt=ye[0];ye=ye[1];var nt=tt.split("_");O=2<=nt.length&&nt[1]=="type"?O+(tt+"="+ye+"&"):O+(tt+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function XA(c,d,f,g,b,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function Oi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+tR(c,f)+(g?" "+g:"")})}function eR(c,d){c.info(function(){return"TIMEOUT: "+d})}Ro.prototype.info=function(){};function tR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return kh(f)}catch{return d}}var Ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uh;function Rc(){}S(Rc,Fh),Rc.prototype.g=function(){return new XMLHttpRequest},Rc.prototype.i=function(){return{}},Uh=new Rc;function Xn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new bo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rI}function rI(){this.i=null,this.g="",this.h=!1}var iI={},jh={};function Bh(c,d,f){c.L=1,c.v=Pc(Cn(d)),c.m=f,c.P=!0,sI(c,null)}function sI(c,d){c.F=Date.now(),Mc(c),c.A=Cn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),_I(f.i,"t",g),c.C=0,f=c.j.J,c.h=new rI,c.g=LI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new QA(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(K_[0]=b.toString()),b=K_);for(var A=0;A<b.length;A++){var O=B_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),So(),JA(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;let d=this.M;d&&bn(c)==3?d.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{let nt=bn(this.g);var d=this.g.Ba();let Li=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||TI(this.g)))){this.J||nt!=4||d==7||(d==8||0>=Li?So(3):So(2)),$h(this);var f=this.g.Z();this.X=f;t:if(oI(this)){var g=TI(this.g);c="";var b=g.length,A=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Mo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,XA(this.i,this.u,this.A,this.l,this.R,nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,We=this.g;if((Ee=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ee)){var ye=Ee;break t}}ye=null}if(f=ye)Oi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hh(this,f);else{this.o=!1,this.s=3,at(12),$r(this),Mo(this);break e}}if(this.P){f=!0;let $t;for(;!this.J&&this.C<O.length;)if($t=nR(this,O),$t==jh){nt==4&&(this.s=4,at(14),f=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if($t==iI){this.s=4,at(15),Oi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Oi(this.i,this.l,$t,null),Hh(this,$t);if(oI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||O.length!=0||this.h.h||(this.s=1,at(16),f=!1),this.o=this.o&&f,!f)Oi(this.i,this.l,O,"[Invalid Chunked Response]"),$r(this),Mo(this);else if(0<O.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Qh(tt),tt.M=!0,at(11))}}else Oi(this.i,this.l,O,null),Hh(this,O);nt==4&&$r(this),this.o&&!this.J&&(nt==4?PI(this.j,this):(this.o=!1,Mc(this)))}else _R(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),$r(this),Mo(this)}}}catch{}finally{}};function oI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function nR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?jh:(f=Number(d.substring(f,g)),isNaN(f)?iI:(g+=1,g+f>d.length?jh:(d=d.slice(g,g+f),c.C=g+f,d)))}Xn.prototype.cancel=function(){this.J=!0,$r(this)};function Mc(c){c.S=Date.now()+c.I,aI(c,c.I)}function aI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ao(m(c.ba,c),d)}function $h(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(eR(this.i,this.A),this.L!=2&&(So(),at(17)),$r(this),this.s=2,Mo(this)):aI(this,this.S-c)};function Mo(c){c.j.G==0||c.J||PI(c.j,c)}function $r(c){$h(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Q_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Hh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||qh(f.h,c))){if(!c.K&&qh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Vc(f),Fc(f);else break e;Kh(f),at(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ao(m(f.Za,f),6e3));if(1>=lI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else qr(f,11)}else if((c.K||f.g==c)&&Vc(f),!$(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ye=b[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let tt=ye[3];tt!=null&&(f.la=tt,f.j.info("VER="+f.la));let nt=ye[4];nt!=null&&(f.Aa=nt,f.j.info("SVER="+f.Aa));let Li=ye[5];Li!=null&&typeof Li=="number"&&0<Li&&(g=1.5*Li,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let $t=c.g;if($t){let jc=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var A=g.h;A.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(zh(A,A.h),A.h=null))}if(g.D){let Yh=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;Yh&&(g.ya=Yh,be(g.I,g.D,Yh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=FI(g,g.J?g.ia:null,g.W),O.K){dI(g.h,O);var Ee=O,We=g.L;We&&(Ee.I=We),Ee.B&&($h(Ee),Mc(Ee)),g.g=O}else NI(g);0<f.i.length&&Lc(f)}else ye[0]!="stop"&&ye[0]!="close"||qr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?qr(f,7):Wh(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}So(4)}catch{}}var rR=class{constructor(c,d){this.g=c,this.map=d}};function cI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lI(c){return c.h?1:c.g?c.g.size:0}function qh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function zh(c,d){c.g?c.g.add(d):c.h=d}function dI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}cI.prototype.cancel=function(){if(this.i=hI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function hI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function iR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function sR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function fI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=sR(c),g=iR(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var pI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Hr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Hr){this.h=c.h,Nc(this,c.j),this.o=c.o,this.g=c.g,xc(this,c.s),this.l=c.l;var d=c.i,f=new Po;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),gI(this,f),this.m=c.m}else c&&(d=String(c).match(pI))?(this.h=!1,Nc(this,d[1]||"",!0),this.o=No(d[2]||""),this.g=No(d[3]||"",!0),xc(this,d[4]),this.l=No(d[5]||"",!0),gI(this,d[6]||"",!0),this.m=No(d[7]||"")):(this.h=!1,this.i=new Po(null,this.h))}Hr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(xo(d,mI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(xo(d,mI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(xo(f,f.charAt(0)=="/"?uR:cR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",xo(f,dR)),c.join("")};function Cn(c){return new Hr(c)}function Nc(c,d,f){c.j=f?No(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function xc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function gI(c,d,f){d instanceof Po?(c.i=d,hR(c.i,c.h)):(f||(d=xo(d,lR)),c.i=new Po(d,c.h))}function be(c,d,f){c.i.set(d,f)}function Pc(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function No(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,aR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var mI=/[#\/\?@]/g,cR=/[#\?:]/g,uR=/[#\?]/g,lR=/[#\?@]/g,dR=/#/g;function Po(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&oR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Po.prototype,t.add=function(c,d){er(this),this.i=null,c=ki(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function yI(c,d){er(c),d=ki(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function vI(c,d){return er(c),d=ki(c,d),c.g.has(d)}t.forEach=function(c,d){er(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){er(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){er(this);let d=[];if(typeof c=="string")vI(this,c)&&(d=d.concat(this.g.get(ki(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return er(this),this.i=null,c=ki(this,c),vI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function _I(c,d,f){yI(c,d),0<f.length&&(c.i=null,c.g.set(ki(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=A;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function ki(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function hR(c,d){d&&!c.j&&(er(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(yI(this,g),_I(this,b,f))},c)),c.j=d}function fR(c,d){let f=new Ro;if(a.Image){let g=new Image;g.onload=v(tr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(tr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(tr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(tr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function pR(c,d){let f=new Ro,g=new AbortController,b=setTimeout(()=>{g.abort(),tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?tr(f,"TestPingServer: ok",!0,d):tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),tr(f,"TestPingServer: error",!1,d)})}function tr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function gR(){this.g=new ZA}function mR(c,d,f){let g=f||"";try{fI(c,function(b,A){let O=b;l(b)&&(O=kh(b)),d.push(g+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Oo(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Oo,Fh),Oo.prototype.g=function(){return new Oc(this.l,this.j)},Oo.prototype.i=function(c){return function(){return c}}({});function Oc(c,d){et.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Oc,et),t=Oc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Fo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;II(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function II(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ko(this):Fo(this),this.readyState==3&&II(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ko(this))},t.Qa=function(c){this.g&&(this.response=c,ko(this))},t.ga=function(){this.g&&ko(this)};function ko(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Fo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wI(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Gh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=wI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):be(c,d,f))}function Ne(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ne,et);var yR=/^https?$/i,vR=["POST","PUT"];t=Ne.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uh.g(),this.v=this.o?Y_(this.o):Y_(Uh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){EI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vR,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){EI(this,A)}};function EI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,DI(c),kc(c)}function DI(c){c.A||(c.A=!0,ot(c,"complete"),ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ot(this,"complete"),ot(this,"abort"),kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kc(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?CI(this):this.bb())},t.bb=function(){CI(this)};function CI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)G_(c.Ea,0,c);else if(ot(c,"readystatechange"),bn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(pI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!yR.test(b?b.toLowerCase():"")}f=g}if(f)ot(c,"complete"),ot(c,"success");else{c.m=6;try{var A=2<bn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",DI(c)}}finally{kc(c)}}}}function kc(c,d){if(c.g){bI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ot(c,"ready");try{f.onreadystatechange=g}catch{}}}function bI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),YA(d)}};function TI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _R(c){let d={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if($(c[g]))continue;var f=C(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function SI(c){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,c),this.cb=Lo("retryDelaySeedMs",1e4,c),this.Wa=Lo("forwardChannelMaxRetries",2,c),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cI(c&&c.concurrentRequestLimit),this.Da=new gR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=SI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){at(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=FI(this,null,this.W),Lc(this)};function Wh(c){if(AI(c),c.G==3){var d=c.U++,f=Cn(c.I);if(be(f,"SID",c.K),be(f,"RID",d),be(f,"TYPE","terminate"),Vo(c,f),d=new Xn(c,c.j,d),d.L=2,d.v=Pc(Cn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=LI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Mc(d)}kI(c)}function Fc(c){c.g&&(Qh(c),c.g.cancel(),c.g=null)}function AI(c){Fc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Vc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Lc(c){if(!uI(c.h)&&!c.s){c.s=!0;var d=c.Ga;wo||j_(),Eo||(wo(),Eo=!0),Th.add(d,c),c.B=0}}function IR(c,d){return lI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ao(m(c.Ga,c,d),OI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Xn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=MI(this,b,d),f=Cn(this.I),be(f,"RID",c),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),Vo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(wI(A)))+"&"+d:this.m&&Gh(f,this.m,A)),zh(this.h,b),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),b.T=!0,Bh(b,f,null)):Bh(b,f,d),this.G=2}}else this.G==3&&(c?RI(this,c):this.i.length==0||uI(this.h)||RI(this))};function RI(c,d){var f;d?f=d.l:f=c.U++;let g=Cn(c.I);be(g,"SID",c.K),be(g,"RID",f),be(g,"AID",c.T),Vo(c,g),c.m&&c.o&&Gh(g,c.m,c.o),f=new Xn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=MI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),zh(c.h,f),Bh(f,g,d)}function Vo(c,d){c.H&&Z(c.H,function(f,g){be(d,g,f)}),c.l&&fI({},function(f,g){be(d,g,f)})}function MI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let We=0;We<f;We++){let ye=b[We].g,tt=b[We].map;if(ye-=A,0>ye)A=Math.max(0,b[We].g-100),Ee=!1;else try{mR(tt,O,"req"+ye+"_")}catch{g&&g(tt)}}if(Ee){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function NI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;wo||j_(),Eo||(wo(),Eo=!0),Th.add(d,c),c.v=0}}function Kh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ao(m(c.Fa,c),OI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ao(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Fc(this),xI(this))};function Qh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xI(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Cn(c.qa);be(d,"RID","rpc"),be(d,"SID",c.K),be(d,"AID",c.T),be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(d,"TO",c.ja),be(d,"TYPE","xmlhttp"),Vo(c,d),c.m&&c.o&&Gh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Pc(Cn(d)),f.m=null,f.P=!0,sI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Fc(this),Kh(this),at(19))};function Vc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function PI(c,d){var f=null;if(c.g==d){Vc(c),Qh(c),c.g=null;var g=2}else if(qh(c.h,d))f=d.D,dI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Sc(),ot(g,new tI(g,f)),Lc(c)}else NI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&IR(c,d)||g==2&&Kh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:qr(c,5);break;case 4:qr(c,10);break;case 3:qr(c,6);break;default:qr(c,2)}}}function OI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function qr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Hr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Nc(g,"https"),Pc(g),b?fR(g.toString(),f):pR(g.toString(),f)}else at(2);c.G=0,c.l&&c.l.sa(d),kI(c),AI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function kI(c){if(c.G=0,c.ka=[],c.l){let d=hI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function FI(c,d,f){var g=f instanceof Hr?Cn(f):new Hr(f);if(g.g!="")d&&(g.g=d+"."+g.g),xc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Hr(null);g&&Nc(A,g),d&&(A.g=d),b&&xc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&be(g,f,d),be(g,"VER",c.la),Vo(c,g),g}function LI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new Oo({eb:f})):new Ne(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function VI(){}t=VI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uc(){}Uc.prototype.g=function(c,d){return new Et(c,d)};function Et(c,d){et.call(this),this.g=new SI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Fi(this)}S(Et,et),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Wh(this.g)},Et.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=kh(c),c=f);d.i.push(new rR(d.Ya++,c)),d.G==3&&Lc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Wh(this.g),delete this.g,Et.aa.N.call(this)};function UI(c){Lh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(UI,Lh);function jI(){Vh.call(this),this.status=1}S(jI,Vh);function Fi(c){this.g=c}S(Fi,VI),Fi.prototype.ua=function(){ot(this.g,"a")},Fi.prototype.ta=function(c){ot(this.g,new UI(c))},Fi.prototype.sa=function(c){ot(this.g,new jI)},Fi.prototype.ra=function(){ot(this.g,"b")},Uc.prototype.createWebChannel=Uc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,wy=Wn.createWebChannelTransport=function(){return new Uc},Iy=Wn.getStatEventTarget=function(){return Sc()},_y=Wn.Event=Br,md=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,Ga=Wn.ErrorCode=Ac,nI.COMPLETE="complete",vy=Wn.EventType=nI,Z_.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",et.prototype.listen=et.prototype.K,qs=Wn.WebChannel=Z_,yy=Wn.FetchXmlHttpFactory=Oo,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,my=Wn.XhrIo=Ne}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});var u0="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var ho="10.13.1";var bi=new br("@firebase/firestore");function Wa(){return bi.logLevel}function V(t,...e){if(bi.logLevel<=de.DEBUG){let n=e.map(u_);bi.debug(`Firestore (${ho}): ${t}`,...n)}}function Kn(t,...e){if(bi.logLevel<=de.ERROR){let n=e.map(u_);bi.error(`Firestore (${ho}): ${t}`,...n)}}function Js(t,...e){if(bi.logLevel<=de.WARN){let n=e.map(u_);bi.warn(`Firestore (${ho}): ${t}`,...n)}}function u_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function G(t="Unexpected state"){let e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw Kn(e),new Error(e)}function Ce(t,e){t||G()}function Y(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Rt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var wd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ty=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},Sy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ay=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new wd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Ge(e)}},Ry=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},My=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ry(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ny=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Ej(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ed=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Ej(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function _e(t,e){return t<e?-1:t>e?1:0}function Xs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Je(0,0))}static max(){return new t(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Dd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends Dd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mt=class t extends Dd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Dj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var Py=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Py.UNKNOWN_ID=-1;function Cj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Ti(i,H.empty(),e)}function bj(t){return new Ti(t.readTime,t.key,-1)}var Ti=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),H.empty(),-1)}static max(){return new t(X.max(),H.empty(),-1)}};function Tj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}var Sj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Oy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function hc(t){return w(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==Sj)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Aj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fc(t){return t.name==="IndexedDbTransactionError"}var $0=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Zd(t){return t==null}function Xa(t){return t===0&&1/t==-1/0}function Rj(t){return typeof t=="number"&&Number.isInteger(t)&&!Xa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Mj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B6=[...Mj,"documentOverlays"],Nj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xj=Nj,Pj=[...xj,"indexConfiguration","indexState","indexEntries"];var $6=[...Pj,"globals"];function l0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pe=class t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ks(this.root,e,this.comparator,!0)}},Ks=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class t{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cd(this.data.getIterator())}getIteratorFrom(e){return new Cd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Cd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yn=class t{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new it(Mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var bd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var Oj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(t){if(Ce(!!t),typeof t=="string"){let e=0,n=Oj.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function l_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function d_(t){let e=t.mapValue.fields.__previous_value__;return l_(e)?d_(e):e}function ec(t){let e=Qn(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var ky=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Td=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var yd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:z0(t)?9007199254740991:q0(t)?10:11:G()}function En(t,e){if(t===e)return!0;let n=Si(t);if(n!==Si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ec(t).isEqual(ec(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Qn(i.timestampValue),a=Qn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Te(i.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Te(i.integerValue)===Te(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Te(i.doubleValue),a=Te(s.doubleValue);return o===a?Xa(o)===Xa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xs(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(l0(o)!==l0(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!En(o[u],a[u])))return!1;return!0}(t,e);default:return G()}}function tc(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function eo(t,e){if(t===e)return 0;let n=Si(t),r=Si(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Te(s.integerValue||s.doubleValue),u=Te(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return d0(t.timestampValue,e.timestampValue);case 4:return d0(ec(t),ec(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Or(s),u=Or(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=_e(a[l],u[l]);if(h!==0)return h}return _e(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=_e(Te(s.latitude),Te(o.latitude));return a!==0?a:_e(Te(s.longitude),Te(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=_e(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:h0(v,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===yd.mapValue&&o===yd.mapValue)return 0;if(s===yd.mapValue)return 1;if(o===yd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=_e(u[p],h[p]);if(m!==0)return m;let v=eo(a[u[p]],l[h[p]]);if(v!==0)return v}return _e(u.length,h.length)}(t.mapValue,e.mapValue);default:throw G()}}function d0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);let n=Qn(t),r=Qn(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function h0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=eo(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function to(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Fy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Fy(n.fields[o])}`;return i+"}"}(t.mapValue):G()}function f0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ly(t){return!!t&&"integerValue"in t}function h_(t){return!!t&&"arrayValue"in t}function p0(t){return!!t&&"nullValue"in t}function g0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _d(t){return!!t&&"mapValue"in t}function q0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return fo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qa(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Zt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(n)}setAll(e){let n=Mt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qa(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());_d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_d(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fo(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Qa(this.value))}};function G0(t){let e=[];return fo(t.fields,(n,r)=>{let i=new Mt([n]);if(_d(r)){let s=G0(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}var Jt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var no=class{constructor(e,n){this.position=e,this.inclusive=n}};function m0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=eo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}var ro=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function kj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Sd=class{},Ue=class t extends Sd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uy(e,n,r):n==="array-contains"?new $y(e,r):n==="in"?new Hy(e,r):n==="not-in"?new qy(e,r):n==="array-contains-any"?new zy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jy(e,r):new By(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(eo(n,this.value)):n!==null&&Si(this.value)===Si(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Xt=class t extends Sd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return W0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function W0(t){return t.op==="and"}function K0(t){return Fj(t)&&W0(t)}function Fj(t){for(let e of t.filters)if(e instanceof Xt)return!1;return!0}function Vy(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+to(t.value);if(K0(t))return t.filters.map(e=>Vy(e)).join(",");{let e=t.filters.map(n=>Vy(n)).join(",");return`${t.op}(${e})`}}function Q0(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(t,e):t instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Q0(o,i.filters[a]),!0):!1}(t,e):void G()}function Y0(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`}(t):t instanceof Xt?function(n){return n.op.toString()+" {"+n.getFilters().map(Y0).join(" ,")+"}"}(t):"Filter"}var Uy=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},jy=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=Z0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},By=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=Z0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Z0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var $y=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return h_(n)&&tc(n.arrayValue,this.value)}},Hy=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}},qy=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!tc(this.value.arrayValue,n)}},zy=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!h_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}};var Gy=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function v0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gy(t,e,n,r,i,s,o)}function f_(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>to(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>to(r)).join(",")),e.ue=n}return e.ue}function p_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Q0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y0(t.startAt,e.startAt)&&y0(t.endAt,e.endAt)}function Wy(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ai=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Lj(t,e,n,r,i,s,o,a){return new Ai(t,e,n,r,i,s,o,a)}function J0(t){return new Ai(t)}function _0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X0(t){return t.collectionGroup!==null}function Ya(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new it(Mt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ro(s,r))}),n.has(Mt.keyField().canonicalString())||e.ce.push(new ro(Mt.keyField(),r))}return e.ce}function In(t){let e=Y(t);return e.le||(e.le=Vj(e,Ya(t))),e.le}function Vj(t,e){if(t.limitType==="F")return v0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ro(i.field,s)});let n=t.endAt?new no(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new no(t.startAt.position,t.startAt.inclusive):null;return v0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ky(t,e){let n=t.filters.concat([e]);return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qy(t,e,n){return new Ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jd(t,e){return p_(In(t),In(e))&&t.limitType===e.limitType}function eS(t){return`${f_(In(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Y0(i)).join(", ")}]`),Zd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>to(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>to(i)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Xd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=m0(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ya(r),i)||r.endAt&&!function(o,a,u){let l=m0(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ya(r),i))}(t,e)}function Uj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tS(t){return(e,n)=>{let r=!1;for(let i of Ya(t)){let s=jj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jj(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?eo(u,l):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var kr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return H0(this.inner)}size(){return this.innerSize}};var Bj=new Pe(H.comparator);function Yn(){return Bj}var nS=new Pe(H.comparator);function Ka(...t){let e=nS;for(let n of t)e=e.insert(n.key,n);return e}function rS(t){let e=nS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return Za()}function iS(){return Za()}function Za(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}var $j=new Pe(H.comparator),Hj=new it(H.comparator);function he(...t){let e=Hj;for(let n of t)e=e.add(n);return e}var qj=new it(_e);function zj(){return qj}function g_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(e)?"-0":e}}function sS(t){return{integerValue:""+t}}function Gj(t,e){return Rj(e)?sS(e):g_(t,e)}var io=class{constructor(){this._=void 0}};function Wj(t,e,n){return t instanceof so?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&l_(s)&&(s=d_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ri?aS(t,e):t instanceof Mi?cS(t,e):function(i,s){let o=oS(i,s),a=I0(o)+I0(i.Pe);return Ly(o)&&Ly(i.Pe)?sS(a):g_(i.serializer,a)}(t,e)}function Kj(t,e,n){return t instanceof Ri?aS(t,e):t instanceof Mi?cS(t,e):n}function oS(t,e){return t instanceof oo?function(r){return Ly(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var so=class extends io{},Ri=class extends io{constructor(e){super(),this.elements=e}};function aS(t,e){let n=uS(e);for(let r of t.elements)n.some(i=>En(i,r))||n.push(r);return{arrayValue:{values:n}}}var Mi=class extends io{constructor(e){super(),this.elements=e}};function cS(t,e){let n=uS(e);for(let r of t.elements)n=n.filter(i=>!En(i,r));return{arrayValue:{values:n}}}var oo=class extends io{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function I0(t){return Te(t.integerValue||t.doubleValue)}function uS(t){return h_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Qj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ri&&i instanceof Ri||r instanceof Mi&&i instanceof Mi?Xs(r.elements,i.elements,En):r instanceof oo&&i instanceof oo?En(r.Pe,i.Pe):r instanceof so&&i instanceof so}(t.transform,e.transform)}var Yy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ci=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Id(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ao=class{};function lS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ad(t.key,Ci.none()):new Ni(t.key,t.data,Ci.none());{let n=t.data,r=Zt.empty(),i=new it(Mt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zn(t.key,r,new yn(i.toArray()),Ci.none())}}function Yj(t,e,n){t instanceof Ni?function(i,s,o){let a=i.value.clone(),u=E0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zn?function(i,s,o){if(!Id(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=E0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(dS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Ni?function(s,o,a,u){if(!Id(s.precondition,o))return a;let l=s.value.clone(),h=D0(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zn?function(s,o,a,u){if(!Id(s.precondition,o))return a;let l=D0(s.fieldTransforms,u,o),h=o.data;return h.setAll(dS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Id(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Zj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=oS(r.transform,i||null);s!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,s))}return n||null}function w0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xs(r,i,(s,o)=>Qj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ni=class extends ao{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zn=class extends ao{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function dS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function E0(t,e,n){let r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Kj(o,a,n[i]))}return r}function D0(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Wj(s,o,e))}return r}var Ad=class extends ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zy=class extends ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Yj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=iS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=lS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(n,r)=>w0(n,r))&&Xs(this.baseMutations,e.baseMutations,(n,r)=>w0(n,r))}},Xy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return $j}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var ev=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var tv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,ge;function Jj(t){switch(t){default:return G();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function hS(t){if(t===void 0)return Kn("GRPC error has no .code"),R.UNKNOWN;switch(t){case Le.OK:return R.OK;case Le.CANCELLED:return R.CANCELLED;case Le.UNKNOWN:return R.UNKNOWN;case Le.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Le.INTERNAL:return R.INTERNAL;case Le.UNAVAILABLE:return R.UNAVAILABLE;case Le.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Le.NOT_FOUND:return R.NOT_FOUND;case Le.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Le.ABORTED:return R.ABORTED;case Le.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Le.DATA_LOSS:return R.DATA_LOSS;default:return G()}}(ge=Le||(Le={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var C0=null;function Xj(){return new TextEncoder}var e2=new xr([4294967295,4294967295],0);function b0(t){let e=Xj().encode(t),n=new gy;return n.update(e),new Uint8Array(n.digest())}function T0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xr([n,r],0),new xr([i,s],0)]}var nv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Di(`Invalid padding: ${n}`);if(r<0)throw new Di(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Di(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Di(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=xr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(xr.fromNumber(r)));return i.compare(e2)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=b0(e),[r,i]=T0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=b0(e),[r,i]=T0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Di=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Rd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Pe(_e),Yn(),he())}},nc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var Ys=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Md=class{constructor(e,n){this.targetId=e,this.me=n}},Nd=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},xd=class{constructor(){this.fe=0,this.ge=A0(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new nc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=A0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},rv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=S0(),this.Qe=new Pe(_e)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Wy(s))if(r===0){let o=new H(s.path);this.Ue(n,o,Jt.newNoDocument(o,X.min()))}else Ce(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}C0?.et(function(h,p,m,v,S){var N,M,F,$,q,se;let Me={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Me.bloomFilter={applied:S===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(F=(M=Z?.bits)===null||M===void 0?void 0:M.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(se=(q=Z?.bits)===null||q===void 0?void 0:q.padding)!==null&&se!==void 0?se:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),Me}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Or(r).toUint8Array()}catch(u){if(u instanceof bd)return Js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new nv(o,i,s)}catch(u){return Js(u instanceof Di?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Wy(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Jt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Rd(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=S0(),this.Qe=new Pe(_e),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(_e),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function S0(){return new Pe(H.comparator)}function A0(){return new Pe(H.comparator)}var t2={asc:"ASCENDING",desc:"DESCENDING"},n2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r2={and:"AND",or:"OR"},iv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function sv(t,e){return t.useProto3Json||Zd(e)?e:{value:e}}function Pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i2(t,e){return Pd(t,e.toTimestamp())}function wn(t){return Ce(!!t),X.fromTimestamp(function(n){let r=Qn(n);return new Je(r.seconds,r.nanos)}(t))}function m_(t,e){return ov(t,e).canonicalString()}function ov(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pS(t){let e=Re.fromString(t);return Ce(_S(e)),e}function av(t,e){return m_(t.databaseId,e.path)}function Ey(t,e){let n=pS(e);if(n.get(1)!==t.databaseId.projectId)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(mS(n))}function gS(t,e){return m_(t.databaseId,e)}function s2(t){let e=pS(t);return e.length===4?Re.emptyPath():mS(e)}function cv(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mS(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R0(t,e,n){return{name:av(t,e),fields:n.value.mapValue.fields}}function o2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ce(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?R.UNKNOWN:hS(l.code);return new L(h,l.message||"")}(o);n=new Nd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ey(t,r.document.name),s=wn(r.document.updateTime),o=r.document.createTime?wn(r.document.createTime):X.min(),a=new Zt({mapValue:{fields:r.document.fields}}),u=Jt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ys(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ey(t,r.document),s=r.readTime?wn(r.readTime):X.min(),o=Jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ys([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ey(t,r.document),s=r.removedTargetIds||[];n=new Ys([],s,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new tv(i,s),a=r.targetId;n=new Md(a,o)}}return n}function a2(t,e){let n;if(e instanceof Ni)n={update:R0(t,e.key,e.value)};else if(e instanceof Ad)n={delete:av(t,e.key)};else if(e instanceof Zn)n={update:R0(t,e.key,e.data),updateMask:m2(e.fieldMask)};else{if(!(e instanceof Zy))return G();n={verify:av(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof so)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ri)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:i2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(t,e.precondition)),n}function c2(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?wn(i.updateTime):wn(s);return o.isEqual(X.min())&&(o=wn(s)),new Yy(o,i.transformResults||[])}(n,e))):[]}function u2(t,e){return{documents:[gS(t,e.path)]}}function l2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gS(t,i);let s=function(l){if(l.length!==0)return vS(Xt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Gs(m.field),direction:f2(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=sv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function d2(t){let e=s2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ce(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=yS(p);return m instanceof Xt&&K0(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new ro(Ws(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Zd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new no(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new no(v,m)}(n.endAt)),Lj(e,i,o,s,a,"F",u,l)}function h2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ws(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ws(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ws(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ws(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Ws(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xt.create(n.compositeFilter.filters.map(r=>yS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function f2(t){return t2[t]}function p2(t){return n2[t]}function g2(t){return r2[t]}function Gs(t){return{fieldPath:t.canonicalString()}}function Ws(t){return Mt.fromServerFormat(t.fieldPath)}function vS(t){return t instanceof Ue?function(n){if(n.op==="=="){if(g0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NAN"}};if(p0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NAN"}};if(p0(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(n.field),op:p2(n.op),value:n.value}}}(t):t instanceof Xt?function(n){let r=n.getFilters().map(i=>vS(i));return r.length===1?r[0]:{compositeFilter:{op:g2(n.op),filters:r}}}(t):G()}function m2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _S(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rc=class t{constructor(e,n,r,i,s=X.min(),o=X.min(),a=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uv=class{constructor(e){this.ct=e}};function y2(t){let e=d2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qy(e,e.limit,"L"):e}var Od=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Xa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Qn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Or(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?z0(e)?this.dt(n,Number.MAX_SAFE_INTEGER):q0(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):G()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Te(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Od.vt=new Od;var lv=class{constructor(){this.un=new dv}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ti.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},dv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Re.comparator)).toArray()}};var q6=new Uint8Array(0);var mn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);var ic=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var hv=class{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var pv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ja(r.mutation,i,yn.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ka();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Yn(),o=Za(),a=function(){return Za()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Zn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Ja(h.mutation,l,h.mutation.getFieldMask(),Je.now())):o.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new fv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Za(),i=new Pe((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||yn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=iS();h.forEach(m=>{if(!s.has(m)){let v=lS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Ei()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:rS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Ka();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ka();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Ai(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Jt.newInvalidDocument(h)))});let a=Ka();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Ja(h.mutation,l,yn.empty(),Je.now()),Xd(n,l)&&(a=a.insert(u,l))}),a})}};var gv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:y2(i.bundledQuery),readTime:wn(i.readTime)}}(n)),x.resolve()}};var mv=class{constructor(){this.overlays=new Pe(H.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ei();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Ei(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Ei(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ei(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ev(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var yv=class{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var sc=class{constructor(){this.Tr=new it(Ve.Er),this.dr=new it(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||H.comparator(e.key,n.key)}};var vv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new it(Ve.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Jy(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ve(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(_e);return n.forEach(i=>{let s=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Ve(new H(s),0),a=new it(_e);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Ve(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ve(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var _v=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Yn(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Tj(bj(h),r)<=0||(i.has(h.key)||Xd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Iv(this)}getSize(e){return x.resolve(this.size)}},Iv=class extends hv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var wv=class{constructor(e){this.persistence=e,this.Nr=new kr(n=>f_(n),p_),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sc,this.targetCount=0,this.kr=ic.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Ev=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $0(0),this.Kr=!1,this.Kr=!0,this.$r=new yv,this.referenceDelegate=e(this),this.Ur=new wv(this),this.indexManager=new lv,this.remoteDocumentCache=function(i){return new _v(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uv(n),this.Gr=new gv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Dv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Dv=class extends Oy{constructor(e){super(),this.currentSequenceNumber=e}},Cv=class t{constructor(e){this.persistence=e,this.Jr=new sc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var bv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Tv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Sv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Yb()?8:Aj(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Tv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Wa()<=de.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Wa()<=de.DEBUG&&V("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wa()<=de.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):x.resolve())}Yi(e,n){if(_0(n))return x.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qy(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Qy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return _0(n)||i.isEqual(X.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Wa()<=de.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zs(n)),this.rs(e,o,n,Cj(i,-1)).next(a=>a))})}ts(e,n){let r=new it(tS(e));return n.forEach((i,s)=>{Xd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Wa()<=de.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ti.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Av=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Pe(_e),this._s=new kr(s=>f_(s),p_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function v2(t,e,n,r){return new Av(t,e,n,r)}function IS(t,e){return w(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=he();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function _2(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(S=>{v=v.next(()=>h.getEntry(u,S)).next(N=>{let M=l.docVersions.get(S);Ce(M!==null),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wS(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function I2(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(st.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,M,F){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=Yn(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(w2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function w2(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Yn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function E2(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D2(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new rc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Rv(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function M0(t,e,n){let r=Y(t),i=X.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,In(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:he())).next(a=>(C2(r,Uj(e),a),{documents:a,Ts:s})))}function C2(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var kd=class{constructor(){this.activeTargetIds=zj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Mv=class{constructor(){this.so=new kd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Nv=class{_o(e){}shutdown(){}};var Fd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vd=null;function Dy(){return vd===null?vd=function(){return 268435456+Math.round(2147483648*Math.random())}():vd++,"0x"+vd.toString(16)}var b2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var xv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var rt="WebChannelConnection",Pv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Dy(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Js("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=b2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Dy();return new Promise((o,a)=>{let u=new my;u.setWithCredentials(!0),u.listenOnce(vy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ga.NO_ERROR:let h=u.getResponseJson();V(rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ga.TIMEOUT:V(rt,`RPC '${e}' ${s} timed out`),a(new L(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:let p=u.getStatus();if(V(rt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let S=function(M){let F=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(F)>=0?F:R.UNKNOWN}(v.status);a(new L(S,v.message))}else a(new L(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new L(R.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{V(rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(rt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Dy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wy(),a=Iy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new yy({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(rt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,S=new xv({Io:M=>{v?V(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(V(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(rt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),N=(M,F,$)=>{M.listen(F,q=>{try{$(q)}catch(se){setTimeout(()=>{throw se},0)}})};return N(p,qs.EventType.OPEN,()=>{v||(V(rt,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),N(p,qs.EventType.CLOSE,()=>{v||(v=!0,V(rt,`RPC '${e}' stream ${i} transport closed`),S.So())}),N(p,qs.EventType.ERROR,M=>{v||(v=!0,Js(rt,`RPC '${e}' stream ${i} transport errored:`,M),S.So(new L(R.UNAVAILABLE,"The operation could not be completed")))}),N(p,qs.EventType.MESSAGE,M=>{var F;if(!v){let $=M.data[0];Ce(!!$);let q=$,se=q.error||((F=q[0])===null||F===void 0?void 0:F.error);if(se){V(rt,`RPC '${e}' stream ${i} received error:`,se);let Me=se.status,Z=function(_){let E=Le[_];if(E!==void 0)return hS(E)}(Me),D=se.message;Z===void 0&&(Z=R.INTERNAL,D="Unknown error status: "+Me+" with message "+se.message),v=!0,S.So(new L(Z,D)),p.close()}else V(rt,`RPC '${e}' stream ${i} received:`,$),S.bo($)}}),N(a,_y.STAT_EVENT,M=>{M.stat===md.PROXY?V(rt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===md.NOPROXY&&V(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Cy(){return typeof document<"u"?document:null}function eh(t){return new iv(t,!0)}var Ld=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Vd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ld(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new L(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ov=class extends Vd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=o2(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?wn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=cv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Wy(u)?{documents:u2(s,u)}:{query:l2(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fS(s,o.resumeToken);let l=sv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Pd(s,o.snapshotVersion.toTimestamp());let l=sv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=h2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=cv(this.serializer),n.removeTarget=e,this.a_(n)}},kv=class extends Vd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=c2(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=cv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>a2(this.serializer,r))};this.a_(n)}};var Fv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ov(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(R.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ov(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(R.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Lv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kn(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Vv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){xi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Y(u);l.L_.add(4),yield pc(l),l.q_.set("Unknown"),l.L_.delete(4),yield th(l)})}(this))}))}),this.q_=new Lv(r,i)}};function th(t){return w(this,null,function*(){if(xi(t))for(let e of t.B_)yield e(!0)})}function pc(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function ES(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),I_(n)?__(n):po(n).r_()&&v_(n,e))}function y_(t,e){let n=Y(t),r=po(n);n.N_.delete(e),r.r_()&&DS(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function v_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function DS(t,e){t.Q_.xe(e),po(t).R_(e)}function __(t){t.Q_=new rv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function I_(t){return xi(t)&&!po(t).n_()&&t.N_.size>0}function xi(t){return Y(t).L_.size===0}function CS(t){t.Q_=void 0}function T2(t){return w(this,null,function*(){t.q_.set("Online")})}function S2(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{v_(t,e)})})}function A2(t,e){return w(this,null,function*(){CS(t),I_(t)?(t.q_.M_(e),__(t)):t.q_.set("Unknown")})}function R2(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof Nd&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ud(t,r)}else if(e instanceof Ys?t.Q_.Ke(e):e instanceof Md?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield wS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),DS(s,u);let p=new rc(h.target,u,l,h.sequenceNumber);v_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Ud(t,r)}})}function Ud(t,e,n){return w(this,null,function*(){if(!fc(e))throw e;t.L_.add(1),yield pc(t),t.q_.set("Offline"),n||(n=()=>wS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield th(t)}))})}function bS(t,e){return e().catch(n=>Ud(t,n,e))}function nh(t){return w(this,null,function*(){let e=Y(t),n=Fr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;M2(e);)try{let i=yield E2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,N2(e,i)}catch(i){yield Ud(e,i)}TS(e)&&SS(e)})}function M2(t){return xi(t)&&t.O_.length<10}function N2(t,e){t.O_.push(e);let n=Fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TS(t){return xi(t)&&!Fr(t).n_()&&t.O_.length>0}function SS(t){Fr(t).start()}function x2(t){return w(this,null,function*(){Fr(t).p_()})}function P2(t){return w(this,null,function*(){let e=Fr(t);for(let n of t.O_)e.m_(n.mutations)})}function O2(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=Xy.from(r,e,n);yield bS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield nh(t)})}function k2(t,e){return w(this,null,function*(){e&&Fr(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return Jj(o)&&o!==R.ABORTED}(i.code)){let s=r.O_.shift();Fr(r).s_(),yield bS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield nh(r)}})}(t,e)),TS(t)&&SS(t)})}function N0(t,e){return w(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=xi(n);n.L_.add(3),yield pc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield th(n)})}function F2(t,e){return w(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield th(n)):e||(n.L_.add(2),yield pc(n),n.q_.set("Unknown"))})}function po(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new Ov(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:T2.bind(null,t),Ro:S2.bind(null,t),mo:A2.bind(null,t),d_:R2.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),I_(t)?__(t):t.q_.set("Unknown")):(yield t.K_.stop(),CS(t))}))),t.K_}function Fr(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new kv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x2.bind(null,t),mo:k2.bind(null,t),f_:P2.bind(null,t),g_:O2.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield nh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Uv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function w_(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),fc(t))return new L(R.UNAVAILABLE,`${e}: ${t}`);throw t}var jd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Ka(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Bd=class{constructor(){this.W_=new Pe(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},co=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,jd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var jv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Bv=class{constructor(){this.queries=x0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=x0(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new L(R.ABORTED,"Firestore shutting down"))}};function x0(){return new kr(t=>eS(t),Jd)}function L2(t,e){return w(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new jv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=w_(o,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&E_(n)})}function V2(t,e){return w(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function U2(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&E_(n)}function j2(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function E_(t){t.Y_.forEach(e=>{e.next()})}var $v,P0;(P0=$v||($v={})).ea="default",P0.Cache="cache";var Hv=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$v.Cache}};var $d=class{constructor(e){this.key=e}},Hd=class{constructor(e){this.key=e}},qv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=tS(e),this.Ra=new jd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Bd,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Xd(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),M=!1;m&&v?m.data.isEqual(v.data)?S!==N&&(r.track({type:3,doc:v}),M=!0):this.ga(m,v)||(r.track({type:2,doc:v}),M=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),M=!0):m&&!v&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,S){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return N(v)-N(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new co(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Bd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Hd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $d(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},zv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Gv=class{constructor(e){this.key=e,this.va=!1}},Wv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new kr(a=>eS(a),Jd),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(H.comparator),this.Na=new Map,this.La=new sc,this.Ba={},this.ka=new Map,this.qa=ic.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function B2(t,e,n=!0){return w(this,null,function*(){let r=PS(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield AS(r,e,n,!0),i})}function $2(t,e){return w(this,null,function*(){let n=PS(t);yield AS(n,e,!0,!1)})}function AS(t,e,n,r){return w(this,null,function*(){let i=yield D2(t.localStore,In(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield H2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ES(t.remoteStore,i),a})}function H2(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,v)=>function(N,M,F,$){return w(this,null,function*(){let q=M.view.ma(F);q.ns&&(q=yield M0(N.localStore,M.query,!1).then(({documents:D})=>M.view.ma(D,q)));let se=$&&$.targetChanges.get(M.targetId),Me=$&&$.targetMismatches.get(M.targetId)!=null,Z=M.view.applyChanges(q,N.isPrimaryClient,se,Me);return k0(N,M.targetId,Z.wa),Z.snapshot})}(t,p,m,v);let s=yield M0(t.localStore,e,!0),o=new qv(e,s.Ts),a=o.ma(s.documents),u=nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);k0(t,n,l.wa);let h=new zv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function q2(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Jd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Rv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&y_(r.remoteStore,i.targetId),Kv(r,i.targetId)}).catch(hc))):(Kv(r,i.targetId),yield Rv(r.localStore,i.targetId,!0))})}function z2(t,e){return w(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),y_(n.remoteStore,r.targetId))})}function G2(t,e,n){return w(this,null,function*(){let r=X2(t);try{let i=yield function(o,a){let u=Y(o),l=Je.now(),h=a.reduce((v,S)=>v.add(S.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=Yn(),N=he();return u.cs.getEntries(v,h).next(M=>{S=M,S.forEach((F,$)=>{$.isValidDocument()||(N=N.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(M=>{p=M;let F=[];for(let $ of a){let q=Zj($,p.get($.key).overlayedDocument);q!=null&&F.push(new Zn($.key,q,G0(q.value.mapValue),Ci.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,F,a)}).next(M=>{m=M;let F=M.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,M.batchId,F)})}).then(()=>({batchId:m.batchId,changes:rS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Pe(_e)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield gc(r,i.changes),yield nh(r.remoteStore)}catch(i){let s=w_(i,"Failed to persist write");n.reject(s)}})}function RS(t,e){return w(this,null,function*(){let n=Y(t);try{let r=yield I2(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ce(o.va):i.removedDocuments.size>0&&(Ce(o.va),o.va=!1))}),yield gc(n,r,e)}catch(r){yield hc(r)}})}function O0(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Y(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&E_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function W2(t,e,n){return w(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pe(H.comparator);o=o.insert(s,Jt.newNoDocument(s,X.min()));let a=he().add(s),u=new Rd(X.min(),new Map,new Pe(_e),o,a);yield RS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),D_(r)}else yield Rv(r.localStore,e,!1).then(()=>Kv(r,e,n)).catch(hc)})}function K2(t,e){return w(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield _2(n.localStore,e);NS(n,r,null),MS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield gc(n,i)}catch(i){yield hc(i)}})}function Q2(t,e,n){return w(this,null,function*(){let r=Y(t);try{let i=yield function(o,a){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ce(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);NS(r,e,n),MS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield gc(r,i)}catch(i){yield hc(i)}})}function MS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NS(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Kv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||xS(t,r)})}function xS(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(y_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),D_(t))}function k0(t,e,n){for(let r of n)r instanceof $d?(t.La.addReference(r.key,e),Y2(t,r)):r instanceof Hd?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||xS(t,r.key)):G()}function Y2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),D_(t))}function D_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new Gv(n)),t.Oa=t.Oa.insert(n,r),ES(t.remoteStore,new rc(In(J0(n.path)),r,"TargetPurposeLimboResolution",$0.oe))}}function gc(t,e,n){return w(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=bv.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!fc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),S=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function Z2(t,e){return w(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield IS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new L(R.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gc(n,r.hs)}})}function J2(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function PS(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W2.bind(null,e),e.Ca.d_=U2.bind(null,e.eventManager),e.Ca.$a=j2.bind(null,e.eventManager),e}function X2(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q2.bind(null,e),e}var qd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return v2(this.persistence,new Sv,e.initialUser,this.serializer)}createPersistence(e){return new Ev(Cv.Zr,this.serializer)}createSharedClientState(e){return new Mv}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Qv=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z2.bind(null,this.syncEngine),yield F2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Bv}()}createDatastore(e){let n=eh(e.databaseInfo.databaseId),r=function(s){return new Pv(s)}(e.databaseInfo);return function(s,o,a,u){return new Fv(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Vv(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>O0(this.syncEngine,n,0),function(){return Fd.D()?new Fd:new Nv}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new Wv(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=Y(i);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield pc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var Yv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Zv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Ed.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=w_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function by(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield IS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function F0(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield tB(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>N0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>N0(e.remoteStore,i)),t._onlineComponents=e})}function eB(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function tB(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield by(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!eB(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),yield by(t,new qd)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield by(t,new qd);return t._offlineComponents})}function OS(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield F0(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield F0(t,new Qv))),t._onlineComponents})}function nB(t){return OS(t).then(e=>e.syncEngine)}function rB(t){return w(this,null,function*(){let e=yield OS(t),n=e.eventManager;return n.onListen=B2.bind(null,e.syncEngine),n.onUnlisten=q2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z2.bind(null,e.syncEngine),n})}function iB(t,e,n={}){let r=new vn;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,l){let h=new Yv({next:m=>{o.enqueueAndForget(()=>V2(s,p)),m.fromCache&&u.source==="server"?l.reject(new L(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Hv(a,h,{includeMetadataChanges:!0,_a:!0});return L2(s,p)}(yield rB(t),t.asyncQueue,e,n,r)})),r.promise}function kS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var L0=new Map;function FS(t,e,n){if(!n)throw new L(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sB(t,e,n,r){if(e===!0&&r===!0)throw new L(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function V0(t){if(!H.isDocumentKey(t))throw new L(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U0(t){if(H.isDocumentKey(t))throw new L(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function zd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=rh(t);throw new L(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Gd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},uo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ty;switch(r.type){case"firstParty":return new My(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=L0.get(n);r&&(V("ComponentProvider","Removing Datastore"),L0.delete(n),r.terminate())}(this),Promise.resolve()}};function LS(t,e,n,r={}){var i;let s=(t=zd(t,uo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=zb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new L(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(l)}t._authCredentials=new Sy(new wd(a,u))}}var lo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Bt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Pr=class t extends lo{constructor(e,n,r){super(e,n,J0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function VS(t,e,...n){if(t=wt(t),FS("collection","path",e),t instanceof uo){let r=Re.fromString(e,...n);return U0(r),new Pr(t,null,r)}{if(!(t instanceof Bt||t instanceof Pr))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return U0(r),new Pr(t.firestore,null,r)}}function US(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Ed.newId()),FS("doc","path",e),t instanceof uo){let r=Re.fromString(e,...n);return V0(r),new Bt(t,null,new H(r))}{if(!(t instanceof Bt||t instanceof Pr))throw new L(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return V0(r),new Bt(t.firestore,t instanceof Pr?t.converter:null,new H(r))}}var Jv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ld(this,"async_queue_retry"),this.Eu=()=>{let n=Cy();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Cy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Cy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new vn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!fc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=Uv.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&G()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};var oc=class extends uo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Jv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$S(this),this._firestoreClient.terminate()}};function jS(t,e){let n=typeof t=="object"?t:Vs(),r=typeof t=="string"?t:e||"(default)",i=Fa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qb("firestore");s&&LS(i,...s)}return i}function BS(t){return t._firestoreClient||$S(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $S(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new ky(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Zv(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var ac=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new L(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var cc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wd=class{constructor(e){this._methodName=e}};var uc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var lc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var oB=/^__.*__$/,Xv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ni(e,this.data,n,this.fieldTransforms)}};function HS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var e_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Kd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(HS(this.wu)&&oB.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},t_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eh(e)}Nu(e,n,r,i=!1){return new e_({wu:e,methodName:n,Ou:r,path:Mt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qS(t){let e=t._freezeSettings(),n=eh(t._databaseId);return new t_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aB(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);WS("Data must be an object, but it was:",o,r);let a=zS(r,o),u,l;if(s.merge)u=new yn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=uB(e,p,n);if(!o.contains(m))throw new L(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dB(h,m)||h.push(m)}u=new yn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Xv(new Zt(a),u,l)}function cB(t,e,n,r=!1){return C_(n,t.Nu(r?4:3,e))}function C_(t,e){if(GS(t=wt(t)))return WS("Unsupported field value:",e,t),zS(t,e);if(t instanceof Wd)return function(r,i){if(!HS(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=C_(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:Pd(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pd(i.serializer,s)}}if(r instanceof uc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ac)return{bytesValue:fS(i.serializer,r._byteString)};if(r instanceof Bt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:m_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return g_(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${rh(r)}`)}(t,e)}function zS(t,e){let n={};return H0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(t,(r,i)=>{let s=C_(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function GS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof uc||t instanceof ac||t instanceof Bt||t instanceof Wd||t instanceof lc)}function WS(t,e,n){if(!GS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=rh(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function uB(t,e,n){if((e=wt(e))instanceof cc)return e._internalPath;if(typeof e=="string")return KS(t,e);throw Kd("Field path arguments must be of type string or ",t,!1,void 0,n)}var lB=new RegExp("[~\\*/\\[\\]]");function KS(t,e,n){if(e.search(lB)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cc(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new L(R.INVALID_ARGUMENT,a+t+u)}function dB(t,e){return t.some(n=>n.isEqual(e))}var Qd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new n_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(b_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},n_=class extends Qd{data(){return super.data()}};function b_(t,e){return typeof e=="string"?KS(t,e):e instanceof cc?e._internalPath:e._delegate._internalPath}function hB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dc=class{},r_=class extends dc{};function QS(t,e,...n){let r=[];e instanceof dc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof i_).length,a=s.filter(u=>u instanceof Yd).length;if(o>1||o>0&&a>0)throw new L(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Yd=class t extends r_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return ZS(e._query,n),new lo(e.firestore,e.converter,Ky(e._query,n))}_parse(e){let n=qS(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){B0(p,h);let v=[];for(let S of p)v.push(j0(u,s,S));m={arrayValue:{values:v}}}else m=j0(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||B0(p,h),m=cB(a,o,p,h==="in"||h==="not-in");return Ue.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function YS(t,e,n){let r=e,i=b_("where",t);return Yd._create(i,r,n)}var i_=class t extends dc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)ZS(o,u),o=Ky(o,u)}(e._query,n),new lo(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function j0(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new L(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X0(e)&&n.indexOf("/")!==-1)throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Re.fromString(n));if(!H.isDocumentKey(r))throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return f0(t,new H(r))}if(n instanceof Bt)return f0(t,n._key);throw new L(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(n)}.`)}function B0(t,e){if(!Array.isArray(t)||t.length===0)throw new L(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZS(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var s_=class{convertValue(e,n="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return fo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Te(o.doubleValue));return new lc(s)}convertGeoPoint(e){return new uc(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=d_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){let n=Qn(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);Ce(_S(r));let i=new Td(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function fB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Qs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},o_=class extends Qd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Zs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(b_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Zs=class extends o_{data(e={}){return super.data(e)}},a_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zs(this._firestore,this._userDataWriter,r.key,r,new Qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Zs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Zs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:pB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function pB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}var c_=class extends s_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}};function JS(t){t=zd(t,lo);let e=zd(t.firestore,oc),n=BS(e),r=new c_(e);return hB(t._query),iB(n,t._query).then(i=>new a_(e,r,t,i))}function XS(t,e){let n=zd(t.firestore,oc),r=US(t),i=fB(t.converter,e);return gB(n,[aB(qS(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ci.exists(!1))]).then(()=>r)}function gB(t,e){return function(r,i){let s=new vn;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return G2(yield nB(r),i,s)})),s.promise}(BS(t),e)}(function(e,n=!0){(function(i){ho=i})(Ar),Sr(new jt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new oc(new Ay(r.getProvider("auth-internal")),new xy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$e(u0,"4.7.1",e),$e(u0,"4.7.1","esm2017")})();var Pi=class{constructor(e){return e}},eA="firestore",T_=class{constructor(){return La(eA)}};var S_=new U("angularfire2.firestore-instances");function mB(t,e){let n=Yl(eA,t,e);return n&&new Pi(n)}function yB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Pi(r)}}var vB={provide:T_,deps:[[new dt,S_]]},_B={provide:Pi,useFactory:mB,deps:[[new dt,S_],qn]};function tA(t,...e){return $e("angularfire",mi.full,"fst"),cn([_B,vB,{provide:S_,useFactory:yB(t),multi:!0,deps:[Ie,Ye,Bs,yi,[new dt,za],[new dt,js],...e]}])}var nA=Yt(XS,!0);var A_=Yt(VS,!0);var rA=Yt(JS,!0);var iA=Yt(jS,!0);var sA=Yt(QS,!0);var R_=Yt(YS,!0);var Lr=class t{constructor(e){this.firestore=e}users=[{name:"Fiorella",password:"123"},{name:"Jose",password:"456"}];loggedIn=!1;login(e){return w(this,null,function*(){try{let n=A_(this.firestore,"registers"),r=sA(n,R_("user.name","==",e.name),R_("user.password","==",e.password));return(yield rA(r)).empty?(this.loggedIn=!1,!1):(this.loggedIn=!0,!0)}catch(n){return console.error("Error al iniciar sesi\xF3n:",n),this.loggedIn=!1,!1}})}logout(){this.loggedIn=!1}isLoggedIn(){return this.loggedIn}register(e){return this.users.push(e)!==void 0}registerDatabase(e){return w(this,null,function*(){try{let n=A_(this.firestore,"registers");return yield nA(n,{fecha:new Date,user:e}),this.loggedIn=!0,!0}catch(n){return console.error("Error al agregar el documento:",n),this.loggedIn=!1,!1}})}static \u0275fac=function(n){return new(n||t)(z(Pi))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function wB(t,e){t&1&&(re(0,"div",4)(1,"button",5),ve(2,"Login"),ie(),re(3,"button",6),ve(4,"Registrarse"),ie()())}function EB(t,e){t&1&&(re(0,"div",10)(1,"ul")(2,"li")(3,"a",11),ve(4,"Qui\xE9n Soy"),ie()(),re(5,"li")(6,"a",12),ve(7,"Juegos"),ie()()()())}function DB(t,e){if(t&1){let n=cg();re(0,"div",7)(1,"button",8),ht("click",function(){xp(n);let i=dn();return Pp(i.toggleSidebar())}),ve(2,"\u2630 Men\xFA"),ie(),wr(3,EB,8,0,"div",9),ie()}if(t&2){let n=dn();Ze(3),_t("ngIf",n.isSidebarVisible)}}function CB(t,e){if(t&1){let n=cg();re(0,"div",4)(1,"button",13),ht("click",function(){xp(n);let i=dn();return Pp(i.logout())}),ve(2,"Cerrar Sesi\xF3n"),ie()()}}var ih=class t{constructor(e,n){this.userService=e;this.router=n}isSidebarVisible=!1;logout(){this.userService.logout(),this.router.navigate(["/home"])}toggleSidebar(){this.isSidebarVisible=!this.isSidebarVisible}static \u0275fac=function(n){return new(n||t)(ne(Lr),ne(pt))};static \u0275cmp=mt({type:t,selectors:[["app-home"]],standalone:!0,features:[It],decls:9,vars:3,consts:[[1,"home-container"],["class","header",4,"ngIf"],["class","sidebar-container",4,"ngIf"],[1,"content"],[1,"header"],["routerLink","/login"],["routerLink","/register"],[1,"sidebar-container"],[1,"menu-btn",3,"click"],["class","sidebar",4,"ngIf"],[1,"sidebar"],["routerLink","/about-me"],["routerLink","/juegos"],[3,"click"]],template:function(n,r){n&1&&(re(0,"div",0),wr(1,wB,5,0,"div",1)(2,DB,4,1,"div",2)(3,CB,3,0,"div",1),re(4,"div",3)(5,"h1"),ve(6,"Bienvenidos a la Sala de Juegos"),ie(),re(7,"p"),ve(8,"Disfruta de los mejores juegos y desaf\xEDa tus habilidades."),ie()()()),n&2&&(Ze(),_t("ngIf",!r.userService.isLoggedIn()),Ze(),_t("ngIf",r.userService.isLoggedIn()),Ze(),_t("ngIf",r.userService.isLoggedIn()))},dependencies:[Ts,$l,Ob],styles:['@charset "UTF-8";.header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:10px;background-color:#f5f5f5}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;padding:10px 20px;font-size:16px;cursor:pointer}.sidebar-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;display:flex;flex-direction:column;align-items:flex-start;background-color:#333;padding:10px;box-shadow:2px 0 5px #00000080}.menu-btn[_ngcontent-%COMP%]{background-color:#444;color:#fff;border:none;padding:10px 20px;font-size:18px;cursor:pointer;margin-bottom:10px}.sidebar[_ngcontent-%COMP%]{margin-top:20px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;text-align:center}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:20px}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em}']})};var sh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["app-about-me"]],standalone:!0,features:[It],decls:10,vars:0,consts:[["src","fotoDePerfil.jpg","alt","Foto del alumno",1,"img-4x4"]],template:function(n,r){n&1&&(re(0,"div")(1,"h2"),ve(2,"Qui\xE9n soy"),ie(),Tt(3,"img",0),re(4,"p"),ve(5,"Nombre: Fiorella Aguayo"),ie(),re(6,"p"),ve(7,"Descripci\xF3n: Soy una estudiante..."),ie(),re(8,"p"),ve(9,"Juego propio: El juego trata de..."),ie()())},styles:[".img-4x4[_ngcontent-%COMP%]{width:10rem;height:10rem;object-fit:cover}"]})};var pA=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ne(oi),ne(_r))},e.\u0275dir=yt({type:e});let t=e;return t})(),bB=(()=>{let e=class e extends pA{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=na(e)))(s||e)}})(),e.\u0275dir=yt({type:e,features:[Ir]});let t=e;return t})(),gA=new U("");var TB={provide:gA,useExisting:ys(()=>_o),multi:!0};function SB(){let t=Ln()?Ln().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var AB=new U(""),_o=(()=>{let e=class e extends pA{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!SB())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ne(oi),ne(_r),ne(AB,8))},e.\u0275dir=yt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ht("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[pl([TB]),Ir]});let t=e;return t})();function Vr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function mA(t){return t!=null&&typeof t.length=="number"}var yA=new U(""),vA=new U(""),RB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ur=class{static min(e){return MB(e)}static max(e){return NB(e)}static required(e){return xB(e)}static requiredTrue(e){return PB(e)}static email(e){return OB(e)}static minLength(e){return kB(e)}static maxLength(e){return FB(e)}static pattern(e){return LB(e)}static nullValidator(e){return _A(e)}static compose(e){return bA(e)}static composeAsync(e){return SA(e)}};function MB(t){return e=>{if(Vr(e.value)||Vr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function NB(t){return e=>{if(Vr(e.value)||Vr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function xB(t){return Vr(t.value)?{required:!0}:null}function PB(t){return t.value===!0?null:{required:!0}}function OB(t){return Vr(t.value)||RB.test(t.value)?null:{email:!0}}function kB(t){return e=>Vr(e.value)||!mA(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function FB(t){return e=>mA(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function LB(t){if(!t)return _A;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Vr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function _A(t){return null}function IA(t){return t!=null}function wA(t){return ci(t)?Se(t):t}function EA(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function DA(t,e){return e.map(n=>n(t))}function VB(t){return!t.validate}function CA(t){return t.map(e=>VB(e)?e:n=>e.validate(n))}function bA(t){if(!t)return null;let e=t.filter(IA);return e.length==0?null:function(n){return EA(DA(n,e))}}function TA(t){return t!=null?bA(CA(t)):null}function SA(t){if(!t)return null;let e=t.filter(IA);return e.length==0?null:function(n){let r=DA(n,e).map(wA);return _f(r).pipe(ae(EA))}}function AA(t){return t!=null?SA(CA(t)):null}function oA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function RA(t){return t._rawValidators}function MA(t){return t._rawAsyncValidators}function N_(t){return t?Array.isArray(t)?t:[t]:[]}function ch(t,e){return Array.isArray(t)?t.includes(e):t===e}function aA(t,e){let n=N_(e);return N_(t).forEach(i=>{ch(n,i)||n.push(i)}),n}function cA(t,e){return N_(e).filter(n=>!ch(t,n))}var uh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},yo=class extends uh{get formDirective(){return null}get path(){return null}},wc=class extends uh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},lh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},O5=oe(k({},UB),{"[class.ng-submitted]":"isSubmitted"}),gh=(()=>{let e=class e extends lh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(wc,2))},e.\u0275dir=yt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&fl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ir]});let t=e;return t})(),mh=(()=>{let e=class e extends lh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(yo,10))},e.\u0275dir=yt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&fl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ir]});let t=e;return t})();var yc="VALID",oh="INVALID",go="PENDING",vc="DISABLED",jr=class{},dh=class extends jr{constructor(e,n){super(),this.value=e,this.source=n}},_c=class extends jr{constructor(e,n){super(),this.pristine=e,this.source=n}},Ic=class extends jr{constructor(e,n){super(),this.touched=e,this.source=n}},mo=class extends jr{constructor(e,n){super(),this.status=e,this.source=n}},x_=class extends jr{constructor(e){super(),this.source=e}},P_=class extends jr{constructor(e){super(),this.source=e}};function F_(t){return(yh(t)?t.validators:t)||null}function jB(t){return Array.isArray(t)?TA(t):t||null}function L_(t,e){return(yh(e)?e.asyncValidators:t)||null}function BB(t){return Array.isArray(t)?AA(t):t||null}function yh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function NA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[n])throw new B(1001,"")}function xA(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new B(1002,"")})}var vo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=oa(()=>this.statusReactive()),this.statusReactive=sa(void 0),this._pristine=oa(()=>this.pristineReactive()),this.pristineReactive=sa(!0),this._touched=oa(()=>this.touchedReactive()),this.touchedReactive=sa(!1),this._events=new He,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return kn(this.statusReactive)}set status(e){kn(()=>this.statusReactive.set(e))}get valid(){return this.status===yc}get invalid(){return this.status===oh}get pending(){return this.status==go}get disabled(){return this.status===vc}get enabled(){return this.status!==vc}get pristine(){return kn(this.pristineReactive)}set pristine(e){kn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return kn(this.touchedReactive)}set touched(e){kn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cA(e,this._rawAsyncValidators))}hasValidator(e){return ch(this._rawValidators,e)}hasAsyncValidator(e){return ch(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ic(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ic(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new _c(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new _c(!0,r))}markAsPending(e={}){this.status=go;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vc,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dh(this.value,r)),this._events.next(new mo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=yc,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yc||this.status===go)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dh(this.value,n)),this._events.next(new mo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vc:yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=go,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=wA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new mo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?vc:this.errors?oh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(go)?go:this._anyControlsHaveStatus(oh)?oh:yc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new _c(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ic(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=jB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=BB(this._rawAsyncValidators)}},hh=class extends vo{constructor(e,n,r){super(F_(n),L_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){xA(this,!0,e),Object.keys(e).forEach(r=>{NA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var O_=class extends hh{};var V_=new U("CallSetDisabledState",{providedIn:"root",factory:()=>vh}),vh="always";function $B(t,e){return[...e.path,t]}function uA(t,e,n=vh){U_(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),qB(t,e),GB(t,e),zB(t,e),HB(t,e)}function lA(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ph(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function fh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function HB(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function U_(t,e){let n=RA(t);e.validator!==null?t.setValidators(oA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=MA(t);e.asyncValidator!==null?t.setAsyncValidators(oA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();fh(e._rawValidators,i),fh(e._rawAsyncValidators,i)}function ph(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=RA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=MA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return fh(e._rawValidators,r),fh(e._rawAsyncValidators,r),n}function qB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&PA(t,e)})}function zB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&PA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function PA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function GB(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function WB(t,e){t==null,U_(t,e)}function KB(t,e){return ph(t,e)}function QB(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function YB(t){return Object.getPrototypeOf(t.constructor)===bB}function ZB(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function JB(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===_o?n=s:YB(s)?r=s:i=s}),i||r||n||null}function XB(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function dA(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function hA(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ah=class extends vo{constructor(e=null,n,r){super(F_(n),L_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(hA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var e$=t=>t instanceof ah;var _h=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=yt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var OA=new U("");var t$={provide:yo,useExisting:ys(()=>Ec)},Ec=(()=>{let e=class e extends yo{get submitted(){return kn(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=oa(()=>this._submittedReactive()),this._submittedReactive=sa(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ph(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return uA(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){lA(r.control||null,r,!1),XB(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),ZB(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new x_(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new P_(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(lA(i||null,r),e$(s)&&(uA(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);WB(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&KB(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){U_(this.form,this),this._oldForm&&ph(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ne(yA,10),ne(vA,10),ne(V_,8))},e.\u0275dir=yt({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&ht("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pl([t$]),Ir,yr]});let t=e;return t})();var n$={provide:wc,useExisting:ys(()=>Dc)},Dc=(()=>{let e=class e extends wc{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Fe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=JB(this,o)}ngOnChanges(r){this._added||this._setUpControl(),QB(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return $B(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ne(yo,13),ne(yA,10),ne(vA,10),ne(gA,10),ne(OA,8))},e.\u0275dir=yt({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pl([n$]),Ir,yr]});let t=e;return t})();var kA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xn({type:e}),e.\u0275inj=Nn({});let t=e;return t})(),k_=class extends vo{constructor(e,n,r){super(F_(n),L_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){xA(this,!1,e),e.forEach((r,i)=>{NA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function fA(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ih=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return fA(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new hh(s,o)}record(r,i=null){let s=this._reduceControls(r);return new O_(s,i)}control(r,i,s){let o={};return this.useNonNullable?(fA(i)?o=i:(o.validators=i,o.asyncValidators=s),new ah(r,oe(k({},o),{nonNullable:!0}))):new ah(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new k_(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof ah)return r;if(r instanceof vo)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var FA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:V_,useValue:r.callSetDisabledState??vh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xn({type:e}),e.\u0275inj=Nn({imports:[kA]});let t=e;return t})(),wh=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:OA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:V_,useValue:r.callSetDisabledState??vh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=xn({type:e}),e.\u0275inj=Nn({imports:[kA]});let t=e;return t})();function r$(t,e){if(t&1&&(re(0,"p",11),ve(1),ie()),t&2){let n=dn();Ze(),ai(n.successMessage)}}function i$(t,e){if(t&1&&(re(0,"p",12),ve(1),ie()),t&2){let n=dn();Ze(),ai(n.errorMessage)}}var Eh=class t{constructor(e,n,r){this.userService=e;this.formBuilder=n;this.router=r;this.loginForm=this.formBuilder.group({name:["",Ur.required],password:["",Ur.required]})}user={name:"",password:""};errorMessage="";successMessage="";loginForm;login(){return w(this,null,function*(){this.user.name=this.loginForm.value.name,this.user.password=this.loginForm.value.password,(yield this.userService.login(this.user))?(this.successMessage=`\xA1Bienvenido, ${this.user.name}!`,this.errorMessage="",setTimeout(()=>{this.router.navigate(["/home"])},2e3)):(this.errorMessage="Usuario o contrase\xF1a incorrectos.",this.successMessage="")})}cancel(){this.router.navigate(["/home"])}static \u0275fac=function(n){return new(n||t)(ne(Lr),ne(Ih),ne(pt))};static \u0275cmp=mt({type:t,selectors:[["app-login"]],standalone:!0,features:[It],decls:17,vars:3,consts:[[1,"modal-backdrop"],[1,"modal-content"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","formControlName","name"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit"],["type","button",3,"click"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"success-message"],[1,"error-message"]],template:function(n,r){n&1&&(re(0,"div",0)(1,"div",1)(2,"h2"),ve(3,"Iniciar Sesi\xF3n"),ie(),re(4,"form",2),ht("ngSubmit",function(){return r.login()}),re(5,"label",3),ve(6,"Nombre de usuario:"),ie(),Tt(7,"input",4),re(8,"label",5),ve(9,"Contrase\xF1a:"),ie(),Tt(10,"input",6),re(11,"button",7),ve(12,"Iniciar Sesi\xF3n"),ie(),re(13,"button",8),ht("click",function(){return r.cancel()}),ve(14,"Cancelar"),ie(),wr(15,r$,2,1,"p",9)(16,i$,2,1,"p",10),ie()()()),n&2&&(Ze(4),_t("formGroup",r.loginForm),Ze(11),_t("ngIf",r.successMessage),Ze(),_t("ngIf",r.errorMessage))},dependencies:[wh,_h,_o,gh,mh,Ec,Dc,Ts],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:300px;box-shadow:0 4px 8px #0003}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-top:10px}input[_ngcontent-%COMP%]{padding:8px;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:15px;padding:10px;cursor:pointer}"]})};var Dh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["app-not-found"]],standalone:!0,features:[It],decls:2,vars:0,template:function(n,r){n&1&&(re(0,"p"),ve(1,"not-found works!"),ie())}})};function s$(t,e){if(t&1&&(re(0,"p",11),ve(1),ie()),t&2){let n=dn();Ze(),ai(n.successMessage)}}function o$(t,e){if(t&1&&(re(0,"p",12),ve(1),ie()),t&2){let n=dn();Ze(),ai(n.errorMessage)}}var Ch=class t{constructor(e,n,r){this.userService=e;this.formBuilder=n;this.router=r;this.registerForm=this.formBuilder.group({name:["",Ur.required],password:["",Ur.required]})}user={name:"",password:""};successMessage="";errorMessage="";registerForm;register(){return w(this,null,function*(){let e={name:this.registerForm.value.name,password:this.registerForm.value.password};try{(yield this.userService.registerDatabase(e))?(this.successMessage="Usuario registrado con \xE9xito.",setTimeout(()=>{this.router.navigate(["/home"])},2e3)):this.errorMessage="Error al registrar el usuario."}catch(n){console.error(n),this.errorMessage="Ocurri\xF3 un error durante el registro."}})}cancel(){this.router.navigate(["/home"])}static \u0275fac=function(n){return new(n||t)(ne(Lr),ne(Ih),ne(pt))};static \u0275cmp=mt({type:t,selectors:[["app-register"]],standalone:!0,features:[It],decls:17,vars:3,consts:[[1,"modal-backdrop"],[1,"modal-content"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","formControlName","name"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit"],["type","button",3,"click"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"success-message"],[1,"error-message"]],template:function(n,r){n&1&&(re(0,"div",0)(1,"div",1)(2,"h2"),ve(3,"Registro"),ie(),re(4,"form",2),ht("ngSubmit",function(){return r.register()}),re(5,"label",3),ve(6,"Nombre de usuario:"),ie(),Tt(7,"input",4),re(8,"label",5),ve(9,"Contrase\xF1a:"),ie(),Tt(10,"input",6),re(11,"button",7),ve(12,"Registrarse"),ie(),re(13,"button",8),ht("click",function(){return r.cancel()}),ve(14,"Cancelar"),ie(),wr(15,s$,2,1,"p",9)(16,o$,2,1,"p",10),ie()()()),n&2&&(Ze(4),_t("formGroup",r.registerForm),Ze(11),_t("ngIf",r.successMessage),Ze(),_t("ngIf",r.errorMessage))},dependencies:[wh,_h,_o,gh,mh,Ec,Dc,Ts],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:300px;box-shadow:0 4px 8px #0003}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-top:10px}input[_ngcontent-%COMP%]{padding:8px;margin-top:5px}button[_ngcontent-%COMP%]{margin-top:15px;padding:10px;cursor:pointer}"]})};var VA=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:ih},{path:"login",component:Eh},{path:"register",component:Ch},{path:"about-me",component:sh},{path:"**",component:Dh}];var UA={projectId:"tp-saladejuegos-78bb2",appId:"1:415244318929:web:349bb19f311a8b42cb6df0",storageBucket:"tp-saladejuegos-78bb2.appspot.com",apiKey:"AIzaSyBUi5M2YrzeTU9AsMpLGr39M6Ts1h2N1KY",authDomain:"tp-saladejuegos-78bb2.firebaseapp.com",messagingSenderId:"415244318929"};var jA={providers:[EC({eventCoalescing:!0}),Fb(VA),pT(()=>gT(UA)),s0(()=>o0()),tA(()=>iA())]};var bh=class t{title="Tp_SalaDeJuegos";userService;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=mt({type:t,selectors:[["app-root"]],standalone:!0,features:[It],decls:2,vars:0,consts:[[1,"app-container"]],template:function(n,r){n&1&&(re(0,"div",0),Tt(1,"router-outlet"),ie())},dependencies:[$l,rm,FA,yg],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:10px;background-color:#f5f5f5}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;padding:10px 20px;font-size:16px;cursor:pointer}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;text-align:center}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;margin-bottom:20px}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em}"]})};zC(bh,jA).catch(t=>console.error(t));
